                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.5.5 #9498 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module Enemy
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _enemy_AI_aggressive
                             12 	.globl _enemy_AI_passive
                             13 	.globl _enemy_roam
                             14 	.globl _enemy_flee
                             15 	.globl _enemy_go_to_player
                             16 	.globl _enemy_attack
                             17 	.globl _enemy_move
                             18 	.globl _enemy_remove
                             19 	.globl _enemy_get_distance_to_obstacle
                             20 	.globl _enemy_collision_at_dir
                             21 	.globl _enemy_new_enemy
                             22 	.globl _enemy_is_adjacent_to_player
                             23 	.globl _enemy_can_view
                             24 	.globl _dist
                             25 	.globl _abs
                             26 	.globl _level_get_level
                             27 	.globl _item_try_new_spawn_at
                             28 	.globl _ui_log_render
                             29 	.globl _ui_log_add_log
                             30 	.globl _integer_to_string
                             31 	.globl _ui_playerstats_render_hp
                             32 	.globl _cpct_getRandom_mxor_u8
                             33 	.globl _cpct_memcpy
                             34 	.globl _cpct_memset
                             35 	.globl _enemyArray
                             36 	.globl _activeEnemies
                             37 	.globl _enemy_get_at
                             38 	.globl _enemy_init_enemies
                             39 	.globl _enemy_try_new_spawn
                             40 	.globl _enemy_attack_enemy
                             41 	.globl _enemy_update
                             42 ;--------------------------------------------------------
                             43 ; special function registers
                             44 ;--------------------------------------------------------
                             45 ;--------------------------------------------------------
                             46 ; ram data
                             47 ;--------------------------------------------------------
                             48 	.area _DATA
   0000                      49 _activeEnemies::
   0000                      50 	.ds 1
   0001                      51 _enemyArray::
   0001                      52 	.ds 120
                             53 ;--------------------------------------------------------
                             54 ; ram data
                             55 ;--------------------------------------------------------
                             56 	.area _INITIALIZED
                             57 ;--------------------------------------------------------
                             58 ; absolute external ram data
                             59 ;--------------------------------------------------------
                             60 	.area _DABS (ABS)
                             61 ;--------------------------------------------------------
                             62 ; global & static initialisations
                             63 ;--------------------------------------------------------
                             64 	.area _HOME
                             65 	.area _GSINIT
                             66 	.area _GSFINAL
                             67 	.area _GSINIT
                             68 ;--------------------------------------------------------
                             69 ; Home
                             70 ;--------------------------------------------------------
                             71 	.area _HOME
                             72 	.area _HOME
                             73 ;--------------------------------------------------------
                             74 ; code
                             75 ;--------------------------------------------------------
                             76 	.area _CODE
                             77 ;src/Enemy.c:34: Enemy* const enemy_get_at(u8 index) {
                             78 ;	---------------------------------
                             79 ; Function enemy_get_at
                             80 ; ---------------------------------
   0000                      81 _enemy_get_at::
   0000 DD E5         [15]   82 	push	ix
   0002 DD 21 00 00   [14]   83 	ld	ix,#0
   0006 DD 39         [15]   84 	add	ix,sp
                             85 ;src/Enemy.c:35: return (enemyArray+index);
   0008 01r01r00      [10]   86 	ld	bc,#_enemyArray+0
   000B DD 6E 04      [19]   87 	ld	l,4 (ix)
   000E 26 00         [ 7]   88 	ld	h,#0x00
   0010 29            [11]   89 	add	hl, hl
   0011 29            [11]   90 	add	hl, hl
   0012 29            [11]   91 	add	hl, hl
   0013 09            [11]   92 	add	hl,bc
   0014 DD E1         [14]   93 	pop	ix
   0016 C9            [10]   94 	ret
                             95 ;src/Enemy.c:38: void enemy_init_enemies(){
                             96 ;	---------------------------------
                             97 ; Function enemy_init_enemies
                             98 ; ---------------------------------
   0017                      99 _enemy_init_enemies::
                            100 ;src/Enemy.c:40: cpct_memset(enemyArray, 0, ENEMY_MAX_ENEMIES*sizeof(Enemy));
   0017 21 78 00      [10]  101 	ld	hl,#0x0078
   001A E5            [11]  102 	push	hl
   001B AF            [ 4]  103 	xor	a, a
   001C F5            [11]  104 	push	af
   001D 33            [ 6]  105 	inc	sp
   001E 21r01r00      [10]  106 	ld	hl,#_enemyArray
   0021 E5            [11]  107 	push	hl
   0022 CDr00r00      [17]  108 	call	_cpct_memset
                            109 ;src/Enemy.c:41: activeEnemies=0;
   0025 21r00r00      [10]  110 	ld	hl,#_activeEnemies + 0
   0028 36 00         [10]  111 	ld	(hl), #0x00
                            112 ;src/Enemy.c:43: if(level_get_level()!=KING_LEVEL){
   002A CDr00r00      [17]  113 	call	_level_get_level
   002D 7D            [ 4]  114 	ld	a,l
   002E D6 20         [ 7]  115 	sub	a, #0x20
   0030 28 0B         [12]  116 	jr	Z,00105$
                            117 ;src/Enemy.c:44: while(activeEnemies<ENEMY_MAX_ENEMIES){
   0032                     118 00101$:
   0032 3Ar00r00      [13]  119 	ld	a,(#_activeEnemies + 0)
   0035 D6 0F         [ 7]  120 	sub	a, #0x0F
   0037 D0            [11]  121 	ret	NC
                            122 ;src/Enemy.c:45: enemy_try_new_spawn();  
   0038 CDr87r03      [17]  123 	call	_enemy_try_new_spawn
   003B 18 F5         [12]  124 	jr	00101$
   003D                     125 00105$:
                            126 ;src/Enemy.c:49: activeEnemies=1;
   003D 21r00r00      [10]  127 	ld	hl,#_activeEnemies + 0
   0040 36 01         [10]  128 	ld	(hl), #0x01
                            129 ;src/Enemy.c:51: enemyArray->id=0;
   0042 21r01r00      [10]  130 	ld	hl,#_enemyArray
   0045 36 00         [10]  131 	ld	(hl),#0x00
                            132 ;src/Enemy.c:53: enemyArray->type=1;
   0047 21r02r00      [10]  133 	ld	hl,#(_enemyArray + 0x0001)
   004A 36 01         [10]  134 	ld	(hl),#0x01
                            135 ;src/Enemy.c:55: enemyArray->hitPoints=ENEMY_INITIAL_HP;
   004C 21r06r00      [10]  136 	ld	hl,#(_enemyArray + 0x0005)
   004F 36 FF         [10]  137 	ld	(hl),#0xFF
                            138 ;src/Enemy.c:57: enemyArray->attackValue = 64;
   0051 21r07r00      [10]  139 	ld	hl,#(_enemyArray + 0x0006)
   0054 36 40         [10]  140 	ld	(hl),#0x40
                            141 ;src/Enemy.c:58: enemyArray->defenseValue = 54;
   0056 21r08r00      [10]  142 	ld	hl,#(_enemyArray + 0x0007)
   0059 36 36         [10]  143 	ld	(hl),#0x36
                            144 ;src/Enemy.c:60: enemyArray->direction=MOVEMENT_SOUTH;
   005B 21r03r00      [10]  145 	ld	hl,#(_enemyArray + 0x0002)
   005E 36 06         [10]  146 	ld	(hl),#0x06
                            147 ;src/Enemy.c:62: enemyArray->position.x = KING_LEVEL_KING_X;
   0060 21r04r00      [10]  148 	ld	hl,#(_enemyArray + 0x0003)
   0063 36 04         [10]  149 	ld	(hl),#0x04
                            150 ;src/Enemy.c:63: enemyArray->position.y = KING_LEVEL_KING_Y;
   0065 21r05r00      [10]  151 	ld	hl,#(_enemyArray + 0x0004)
   0068 36 02         [10]  152 	ld	(hl),#0x02
                            153 ;src/Enemy.c:65: *(u8*)(MAP_MEM + KING_LEVEL_KING_X + (KING_LEVEL_KING_Y*MAP_WIDTH)) = 1;
   006A 21 14 89      [10]  154 	ld	hl,#0x8914
   006D 36 01         [10]  155 	ld	(hl),#0x01
   006F C9            [10]  156 	ret
                            157 ;src/Enemy.c:71: i8 abs(i8 n) {
                            158 ;	---------------------------------
                            159 ; Function abs
                            160 ; ---------------------------------
   0070                     161 _abs::
                            162 ;src/Enemy.c:72: if(n<0) n=-n;
   0070 FD 21 02 00   [14]  163 	ld	iy,#2
   0074 FD 39         [15]  164 	add	iy,sp
   0076 FD CB 00 7E   [20]  165 	bit	7,0 (iy)
   007A 28 07         [12]  166 	jr	Z,00102$
   007C AF            [ 4]  167 	xor	a, a
   007D FD 96 00      [19]  168 	sub	a, 0 (iy)
   0080 FD 77 00      [19]  169 	ld	0 (iy),a
   0083                     170 00102$:
                            171 ;src/Enemy.c:73: return n;
   0083 FD 21 02 00   [14]  172 	ld	iy,#2
   0087 FD 39         [15]  173 	add	iy,sp
   0089 FD 6E 00      [19]  174 	ld	l,0 (iy)
   008C C9            [10]  175 	ret
                            176 ;src/Enemy.c:76: u8 dist(u8 x0, u8 y0, u8 x1, u8 y1){
                            177 ;	---------------------------------
                            178 ; Function dist
                            179 ; ---------------------------------
   008D                     180 _dist::
                            181 ;src/Enemy.c:78: dx = abs(x1-x0);
   008D 21 02 00      [10]  182 	ld	hl,#2
   0090 39            [11]  183 	add	hl,sp
   0091 FD 21 04 00   [14]  184 	ld	iy,#4
   0095 FD 39         [15]  185 	add	iy,sp
   0097 FD 7E 00      [19]  186 	ld	a,0 (iy)
   009A 96            [ 7]  187 	sub	a, (hl)
   009B 47            [ 4]  188 	ld	b,a
   009C C5            [11]  189 	push	bc
   009D 33            [ 6]  190 	inc	sp
   009E CDr70r00      [17]  191 	call	_abs
   00A1 33            [ 6]  192 	inc	sp
   00A2 4D            [ 4]  193 	ld	c,l
                            194 ;src/Enemy.c:79: dy = abs(y1-y0);
   00A3 21 03 00      [10]  195 	ld	hl,#3
   00A6 39            [11]  196 	add	hl,sp
   00A7 FD 21 05 00   [14]  197 	ld	iy,#5
   00AB FD 39         [15]  198 	add	iy,sp
   00AD FD 7E 00      [19]  199 	ld	a,0 (iy)
   00B0 96            [ 7]  200 	sub	a, (hl)
   00B1 47            [ 4]  201 	ld	b,a
   00B2 C5            [11]  202 	push	bc
   00B3 C5            [11]  203 	push	bc
   00B4 33            [ 6]  204 	inc	sp
   00B5 CDr70r00      [17]  205 	call	_abs
   00B8 33            [ 6]  206 	inc	sp
   00B9 C1            [10]  207 	pop	bc
                            208 ;src/Enemy.c:81: return dx+dy;
   00BA 09            [11]  209 	add	hl, bc
   00BB C9            [10]  210 	ret
                            211 ;src/Enemy.c:85: u8 enemy_can_view(Enemy* e){
                            212 ;	---------------------------------
                            213 ; Function enemy_can_view
                            214 ; ---------------------------------
   00BC                     215 _enemy_can_view::
   00BC DD E5         [15]  216 	push	ix
   00BE DD 21 00 00   [14]  217 	ld	ix,#0
   00C2 DD 39         [15]  218 	add	ix,sp
   00C4 21 F1 FF      [10]  219 	ld	hl,#-15
   00C7 39            [11]  220 	add	hl,sp
   00C8 F9            [ 6]  221 	ld	sp,hl
                            222 ;src/Enemy.c:89: x0 = player_position.x;
   00C9 21r00r00      [10]  223 	ld	hl,#_player_position+0
   00CC 4E            [ 7]  224 	ld	c,(hl)
                            225 ;src/Enemy.c:90: y0 = player_position.y;
   00CD 3Ar01r00      [13]  226 	ld	a,(#_player_position+1)
   00D0 DD 77 F2      [19]  227 	ld	-14 (ix),a
                            228 ;src/Enemy.c:92: x1 = e->position.x;
   00D3 DD 5E 04      [19]  229 	ld	e,4 (ix)
   00D6 DD 56 05      [19]  230 	ld	d,5 (ix)
   00D9 D5            [11]  231 	push	de
   00DA FD E1         [14]  232 	pop	iy
   00DC FD 7E 03      [19]  233 	ld	a,3 (iy)
   00DF DD 77 F3      [19]  234 	ld	-13 (ix),a
                            235 ;src/Enemy.c:93: y1 = e->position.y;
   00E2 D5            [11]  236 	push	de
   00E3 FD E1         [14]  237 	pop	iy
   00E5 FD 7E 04      [19]  238 	ld	a,4 (iy)
   00E8 DD 77 F1      [19]  239 	ld	-15 (ix),a
                            240 ;src/Enemy.c:95: mask = (CELL_WALL_MASK|CELL_ENEMY_MASK)^(e->id+1);
   00EB 1A            [ 7]  241 	ld	a,(de)
   00EC 3C            [ 4]  242 	inc	a
   00ED EE 8F         [ 7]  243 	xor	a, #0x8F
   00EF DD 77 F6      [19]  244 	ld	-10 (ix),a
                            245 ;src/Enemy.c:97: dx = abs(x1-x0);
   00F2 DD 7E F3      [19]  246 	ld	a,-13 (ix)
   00F5 91            [ 4]  247 	sub	a, c
   00F6 47            [ 4]  248 	ld	b,a
   00F7 C5            [11]  249 	push	bc
   00F8 C5            [11]  250 	push	bc
   00F9 33            [ 6]  251 	inc	sp
   00FA CDr70r00      [17]  252 	call	_abs
   00FD 33            [ 6]  253 	inc	sp
   00FE C1            [10]  254 	pop	bc
   00FF DD 75 F9      [19]  255 	ld	-7 (ix),l
                            256 ;src/Enemy.c:98: dy = abs(y1-y0);
   0102 DD 7E F1      [19]  257 	ld	a,-15 (ix)
   0105 DD 96 F2      [19]  258 	sub	a, -14 (ix)
   0108 47            [ 4]  259 	ld	b,a
   0109 C5            [11]  260 	push	bc
   010A C5            [11]  261 	push	bc
   010B 33            [ 6]  262 	inc	sp
   010C CDr70r00      [17]  263 	call	_abs
   010F 33            [ 6]  264 	inc	sp
   0110 C1            [10]  265 	pop	bc
   0111 DD 75 F7      [19]  266 	ld	-9 (ix),l
                            267 ;src/Enemy.c:100: sx = (x0<x1)?1:-1;
   0114 79            [ 4]  268 	ld	a,c
   0115 DD 96 F3      [19]  269 	sub	a, -13 (ix)
   0118 E2r1Dr01      [10]  270 	jp	PO, 00168$
   011B EE 80         [ 7]  271 	xor	a, #0x80
   011D                     272 00168$:
   011D F2r24r01      [10]  273 	jp	P,00117$
   0120 06 01         [ 7]  274 	ld	b,#0x01
   0122 18 02         [12]  275 	jr	00118$
   0124                     276 00117$:
   0124 06 FF         [ 7]  277 	ld	b,#0xFF
   0126                     278 00118$:
   0126 DD 70 F8      [19]  279 	ld	-8 (ix),b
                            280 ;src/Enemy.c:101: sy = (y0<y1)?1:-1;
   0129 DD 7E F2      [19]  281 	ld	a,-14 (ix)
   012C DD 96 F1      [19]  282 	sub	a, -15 (ix)
   012F E2r34r01      [10]  283 	jp	PO, 00169$
   0132 EE 80         [ 7]  284 	xor	a, #0x80
   0134                     285 00169$:
   0134 F2r3Br01      [10]  286 	jp	P,00119$
   0137 1E 01         [ 7]  287 	ld	e,#0x01
   0139 18 02         [12]  288 	jr	00120$
   013B                     289 00119$:
   013B 1E FF         [ 7]  290 	ld	e,#0xFF
   013D                     291 00120$:
   013D DD 73 F5      [19]  292 	ld	-11 (ix),e
                            293 ;src/Enemy.c:103: e1 = ((dx>dy)?dx:-dy)/2;
   0140 DD 7E F9      [19]  294 	ld	a,-7 (ix)
   0143 DD 77 FA      [19]  295 	ld	-6 (ix),a
   0146 DD 7E F9      [19]  296 	ld	a,-7 (ix)
   0149 17            [ 4]  297 	rla
   014A 9F            [ 4]  298 	sbc	a, a
   014B DD 77 FB      [19]  299 	ld	-5 (ix),a
   014E DD 7E F7      [19]  300 	ld	a,-9 (ix)
   0151 DD 96 F9      [19]  301 	sub	a, -7 (ix)
   0154 E2r59r01      [10]  302 	jp	PO, 00170$
   0157 EE 80         [ 7]  303 	xor	a, #0x80
   0159                     304 00170$:
   0159 F2r64r01      [10]  305 	jp	P,00121$
   015C DD 6E FA      [19]  306 	ld	l,-6 (ix)
   015F DD 66 FB      [19]  307 	ld	h,-5 (ix)
   0162 18 10         [12]  308 	jr	00122$
   0164                     309 00121$:
   0164 DD 5E F7      [19]  310 	ld	e,-9 (ix)
   0167 DD 7E F7      [19]  311 	ld	a,-9 (ix)
   016A 17            [ 4]  312 	rla
   016B 9F            [ 4]  313 	sbc	a, a
   016C 57            [ 4]  314 	ld	d,a
   016D AF            [ 4]  315 	xor	a, a
   016E 93            [ 4]  316 	sub	a, e
   016F 6F            [ 4]  317 	ld	l,a
   0170 3E 00         [ 7]  318 	ld	a, #0x00
   0172 9A            [ 4]  319 	sbc	a, d
   0173 67            [ 4]  320 	ld	h,a
   0174                     321 00122$:
   0174 5D            [ 4]  322 	ld	e, l
   0175 54            [ 4]  323 	ld	d, h
   0176 CB 7C         [ 8]  324 	bit	7, h
   0178 28 02         [12]  325 	jr	Z,00123$
   017A EB            [ 4]  326 	ex	de,hl
   017B 13            [ 6]  327 	inc	de
   017C                     328 00123$:
   017C 43            [ 4]  329 	ld	b,e
   017D CB 2A         [ 8]  330 	sra	d
   017F CB 18         [ 8]  331 	rr	b
                            332 ;src/Enemy.c:105: while(1){
   0181                     333 00113$:
                            334 ;src/Enemy.c:106: e2 = e1;
   0181 DD 70 F4      [19]  335 	ld	-12 (ix),b
                            336 ;src/Enemy.c:107: if (e2 >-dx) {
   0184 AF            [ 4]  337 	xor	a, a
   0185 DD 96 FA      [19]  338 	sub	a, -6 (ix)
   0188 5F            [ 4]  339 	ld	e,a
   0189 3E 00         [ 7]  340 	ld	a, #0x00
   018B DD 9E FB      [19]  341 	sbc	a, -5 (ix)
   018E 57            [ 4]  342 	ld	d,a
   018F 78            [ 4]  343 	ld	a,b
   0190 6F            [ 4]  344 	ld	l,a
   0191 17            [ 4]  345 	rla
   0192 9F            [ 4]  346 	sbc	a, a
   0193 67            [ 4]  347 	ld	h,a
   0194 7B            [ 4]  348 	ld	a,e
   0195 95            [ 4]  349 	sub	a, l
   0196 7A            [ 4]  350 	ld	a,d
   0197 9C            [ 4]  351 	sbc	a, h
   0198 E2r9Dr01      [10]  352 	jp	PO, 00171$
   019B EE 80         [ 7]  353 	xor	a, #0x80
   019D                     354 00171$:
   019D F2rAAr01      [10]  355 	jp	P,00102$
                            356 ;src/Enemy.c:108: e1 -= dy;
   01A0 78            [ 4]  357 	ld	a,b
   01A1 DD 96 F7      [19]  358 	sub	a, -9 (ix)
   01A4 47            [ 4]  359 	ld	b,a
                            360 ;src/Enemy.c:109: x0 += sx;
   01A5 79            [ 4]  361 	ld	a,c
   01A6 DD 86 F8      [19]  362 	add	a, -8 (ix)
   01A9 4F            [ 4]  363 	ld	c,a
   01AA                     364 00102$:
                            365 ;src/Enemy.c:111: if (e2 < dy) {
   01AA DD 7E F4      [19]  366 	ld	a,-12 (ix)
   01AD DD 96 F7      [19]  367 	sub	a, -9 (ix)
   01B0 E2rB5r01      [10]  368 	jp	PO, 00172$
   01B3 EE 80         [ 7]  369 	xor	a, #0x80
   01B5                     370 00172$:
   01B5 F2rC6r01      [10]  371 	jp	P,00104$
                            372 ;src/Enemy.c:112: e1 += dx;
   01B8 78            [ 4]  373 	ld	a,b
   01B9 DD 86 F9      [19]  374 	add	a, -7 (ix)
   01BC 47            [ 4]  375 	ld	b,a
                            376 ;src/Enemy.c:113: y0 += sy;
   01BD DD 7E F2      [19]  377 	ld	a,-14 (ix)
   01C0 DD 86 F5      [19]  378 	add	a, -11 (ix)
   01C3 DD 77 F2      [19]  379 	ld	-14 (ix),a
   01C6                     380 00104$:
                            381 ;src/Enemy.c:116: if((*(u8*)(MAP_MEM+(x0+(y0*MAP_WIDTH)))&(mask))||(
   01C6 79            [ 4]  382 	ld	a,c
   01C7 5F            [ 4]  383 	ld	e,a
   01C8 17            [ 4]  384 	rla
   01C9 9F            [ 4]  385 	sbc	a, a
   01CA 57            [ 4]  386 	ld	d,a
   01CB DD 7E F2      [19]  387 	ld	a,-14 (ix)
   01CE DD 77 FE      [19]  388 	ld	-2 (ix),a
   01D1 DD 7E F2      [19]  389 	ld	a,-14 (ix)
   01D4 17            [ 4]  390 	rla
   01D5 9F            [ 4]  391 	sbc	a, a
   01D6 DD 77 FF      [19]  392 	ld	-1 (ix),a
   01D9 DD 7E FE      [19]  393 	ld	a,-2 (ix)
   01DC DD 77 FC      [19]  394 	ld	-4 (ix),a
   01DF DD 7E FF      [19]  395 	ld	a,-1 (ix)
   01E2 DD 77 FD      [19]  396 	ld	-3 (ix),a
   01E5 3E 06         [ 7]  397 	ld	a,#0x05+1
   01E7 18 08         [12]  398 	jr	00174$
   01E9                     399 00173$:
   01E9 DD CB FC 26   [23]  400 	sla	-4 (ix)
   01ED DD CB FD 16   [23]  401 	rl	-3 (ix)
   01F1                     402 00174$:
   01F1 3D            [ 4]  403 	dec	a
   01F2 20 F5         [12]  404 	jr	NZ,00173$
   01F4 DD 6E FC      [19]  405 	ld	l,-4 (ix)
   01F7 DD 66 FD      [19]  406 	ld	h,-3 (ix)
   01FA 19            [11]  407 	add	hl,de
   01FB D5            [11]  408 	push	de
   01FC 11 D0 88      [10]  409 	ld	de,#0x88D0
   01FF 19            [11]  410 	add	hl, de
   0200 D1            [10]  411 	pop	de
   0201 7E            [ 7]  412 	ld	a,(hl)
   0202 DD A6 F6      [19]  413 	and	a, -10 (ix)
   0205 B7            [ 4]  414 	or	a, a
   0206 20 47         [12]  415 	jr	NZ,00105$
                            416 ;src/Enemy.c:117: (*(u8*)(MAP_MEM+((x0)+((y0-sy)*MAP_WIDTH)))&(mask))&&
   0208 DD 6E F5      [19]  417 	ld	l,-11 (ix)
   020B DD 7E F5      [19]  418 	ld	a,-11 (ix)
   020E 17            [ 4]  419 	rla
   020F 9F            [ 4]  420 	sbc	a, a
   0210 67            [ 4]  421 	ld	h,a
   0211 DD 7E FE      [19]  422 	ld	a,-2 (ix)
   0214 95            [ 4]  423 	sub	a, l
   0215 6F            [ 4]  424 	ld	l,a
   0216 DD 7E FF      [19]  425 	ld	a,-1 (ix)
   0219 9C            [ 4]  426 	sbc	a, h
   021A 67            [ 4]  427 	ld	h,a
   021B 29            [11]  428 	add	hl, hl
   021C 29            [11]  429 	add	hl, hl
   021D 29            [11]  430 	add	hl, hl
   021E 29            [11]  431 	add	hl, hl
   021F 29            [11]  432 	add	hl, hl
   0220 19            [11]  433 	add	hl,de
   0221 D5            [11]  434 	push	de
   0222 11 D0 88      [10]  435 	ld	de,#0x88D0
   0225 19            [11]  436 	add	hl, de
   0226 D1            [10]  437 	pop	de
   0227 7E            [ 7]  438 	ld	a,(hl)
   0228 DD A6 F6      [19]  439 	and	a, -10 (ix)
   022B B7            [ 4]  440 	or	a, a
   022C 28 25         [12]  441 	jr	Z,00106$
                            442 ;src/Enemy.c:118: (*(u8*)(MAP_MEM+((x0-sx)+(y0*MAP_WIDTH)))&(mask))
   022E DD 6E F8      [19]  443 	ld	l,-8 (ix)
   0231 DD 7E F8      [19]  444 	ld	a,-8 (ix)
   0234 17            [ 4]  445 	rla
   0235 9F            [ 4]  446 	sbc	a, a
   0236 67            [ 4]  447 	ld	h,a
   0237 7B            [ 4]  448 	ld	a,e
   0238 95            [ 4]  449 	sub	a, l
   0239 5F            [ 4]  450 	ld	e,a
   023A 7A            [ 4]  451 	ld	a,d
   023B 9C            [ 4]  452 	sbc	a, h
   023C 57            [ 4]  453 	ld	d,a
   023D DD 6E FC      [19]  454 	ld	l,-4 (ix)
   0240 DD 66 FD      [19]  455 	ld	h,-3 (ix)
   0243 19            [11]  456 	add	hl,de
   0244 11 D0 88      [10]  457 	ld	de,#0x88D0
   0247 19            [11]  458 	add	hl,de
   0248 7E            [ 7]  459 	ld	a,(hl)
   0249 DD A6 F6      [19]  460 	and	a, -10 (ix)
   024C B7            [ 4]  461 	or	a, a
   024D 28 04         [12]  462 	jr	Z,00106$
   024F                     463 00105$:
                            464 ;src/Enemy.c:121: return 0;
   024F 2E 00         [ 7]  465 	ld	l,#0x00
   0251 18 12         [12]  466 	jr	00115$
   0253                     467 00106$:
                            468 ;src/Enemy.c:123: if ((x0==x1 && y0==y1)){
   0253 DD 7E F3      [19]  469 	ld	a,-13 (ix)
   0256 91            [ 4]  470 	sub	a, c
   0257 C2r81r01      [10]  471 	jp	NZ,00113$
   025A DD 7E F2      [19]  472 	ld	a,-14 (ix)
   025D DD 96 F1      [19]  473 	sub	a, -15 (ix)
   0260 C2r81r01      [10]  474 	jp	NZ,00113$
                            475 ;src/Enemy.c:128: return 1;
   0263 2E 01         [ 7]  476 	ld	l,#0x01
   0265                     477 00115$:
   0265 DD F9         [10]  478 	ld	sp, ix
   0267 DD E1         [14]  479 	pop	ix
   0269 C9            [10]  480 	ret
                            481 ;src/Enemy.c:131: u8 enemy_is_adjacent_to_player(Enemy* e){    
                            482 ;	---------------------------------
                            483 ; Function enemy_is_adjacent_to_player
                            484 ; ---------------------------------
   026A                     485 _enemy_is_adjacent_to_player::
   026A DD E5         [15]  486 	push	ix
   026C DD 21 00 00   [14]  487 	ld	ix,#0
   0270 DD 39         [15]  488 	add	ix,sp
   0272 F5            [11]  489 	push	af
                            490 ;src/Enemy.c:132: return (dist(player_position.x,player_position.y,e->position.x,e->position.y)==1);
   0273 DD 6E 04      [19]  491 	ld	l,4 (ix)
   0276 DD 66 05      [19]  492 	ld	h,5 (ix)
   0279 E5            [11]  493 	push	hl
   027A FD E1         [14]  494 	pop	iy
   027C 11 04 00      [10]  495 	ld	de, #0x0004
   027F 19            [11]  496 	add	hl, de
   0280 7E            [ 7]  497 	ld	a,(hl)
   0281 DD 77 FF      [19]  498 	ld	-1 (ix),a
   0284 FD 7E 03      [19]  499 	ld	a,3 (iy)
   0287 DD 77 FE      [19]  500 	ld	-2 (ix),a
   028A 21r01r00      [10]  501 	ld	hl, #_player_position + 1
   028D 4E            [ 7]  502 	ld	c,(hl)
   028E 21r00r00      [10]  503 	ld	hl, #_player_position + 0
   0291 5E            [ 7]  504 	ld	e,(hl)
   0292 DD 66 FF      [19]  505 	ld	h,-1 (ix)
   0295 DD 6E FE      [19]  506 	ld	l,-2 (ix)
   0298 E5            [11]  507 	push	hl
   0299 51            [ 4]  508 	ld	d, c
   029A D5            [11]  509 	push	de
   029B CDr8Dr00      [17]  510 	call	_dist
   029E F1            [10]  511 	pop	af
   029F F1            [10]  512 	pop	af
   02A0 2D            [ 4]  513 	dec	l
   02A1 20 04         [12]  514 	jr	NZ,00103$
   02A3 3E 01         [ 7]  515 	ld	a,#0x01
   02A5 18 01         [12]  516 	jr	00104$
   02A7                     517 00103$:
   02A7 AF            [ 4]  518 	xor	a,a
   02A8                     519 00104$:
   02A8 6F            [ 4]  520 	ld	l,a
   02A9 DD F9         [10]  521 	ld	sp, ix
   02AB DD E1         [14]  522 	pop	ix
   02AD C9            [10]  523 	ret
                            524 ;src/Enemy.c:136: void enemy_new_enemy(Vec2u* position) {
                            525 ;	---------------------------------
                            526 ; Function enemy_new_enemy
                            527 ; ---------------------------------
   02AE                     528 _enemy_new_enemy::
   02AE DD E5         [15]  529 	push	ix
   02B0 DD 21 00 00   [14]  530 	ld	ix,#0
   02B4 DD 39         [15]  531 	add	ix,sp
   02B6 F5            [11]  532 	push	af
   02B7 F5            [11]  533 	push	af
   02B8 3B            [ 6]  534 	dec	sp
                            535 ;src/Enemy.c:138: Enemy* enemy=(enemyArray+ENEMY_MAX_ENEMIES);
   02B9 01r79r00      [10]  536 	ld	bc,#_enemyArray+120
                            537 ;src/Enemy.c:141: x=position->x;
   02BC DD 6E 04      [19]  538 	ld	l,4 (ix)
   02BF DD 66 05      [19]  539 	ld	h,5 (ix)
   02C2 7E            [ 7]  540 	ld	a,(hl)
   02C3 DD 77 FB      [19]  541 	ld	-5 (ix),a
                            542 ;src/Enemy.c:142: y=position->y;
   02C6 23            [ 6]  543 	inc	hl
   02C7 7E            [ 7]  544 	ld	a,(hl)
   02C8 DD 77 FF      [19]  545 	ld	-1 (ix),a
                            546 ;src/Enemy.c:144: memPos = (MAP_MEM+x+(y*MAP_WIDTH));
   02CB DD 5E FB      [19]  547 	ld	e,-5 (ix)
   02CE 16 00         [ 7]  548 	ld	d,#0x00
   02D0 21 D0 88      [10]  549 	ld	hl,#0x88D0
   02D3 19            [11]  550 	add	hl,de
   02D4 EB            [ 4]  551 	ex	de,hl
   02D5 DD 6E FF      [19]  552 	ld	l,-1 (ix)
   02D8 26 00         [ 7]  553 	ld	h,#0x00
   02DA 29            [11]  554 	add	hl, hl
   02DB 29            [11]  555 	add	hl, hl
   02DC 29            [11]  556 	add	hl, hl
   02DD 29            [11]  557 	add	hl, hl
   02DE 29            [11]  558 	add	hl, hl
   02DF 19            [11]  559 	add	hl,de
   02E0 DD 75 FD      [19]  560 	ld	-3 (ix),l
   02E3 DD 74 FE      [19]  561 	ld	-2 (ix),h
                            562 ;src/Enemy.c:146: while(i){
   02E6 DD 36 FC 0F   [19]  563 	ld	-4 (ix),#0x0F
   02EA                     564 00103$:
   02EA DD 7E FC      [19]  565 	ld	a,-4 (ix)
   02ED B7            [ 4]  566 	or	a, a
   02EE CAr82r03      [10]  567 	jp	Z,00106$
                            568 ;src/Enemy.c:147: --i;
   02F1 DD 35 FC      [23]  569 	dec	-4 (ix)
                            570 ;src/Enemy.c:148: --enemy;
   02F4 79            [ 4]  571 	ld	a,c
   02F5 C6 F8         [ 7]  572 	add	a,#0xF8
   02F7 4F            [ 4]  573 	ld	c,a
   02F8 78            [ 4]  574 	ld	a,b
   02F9 CE FF         [ 7]  575 	adc	a,#0xFF
   02FB 47            [ 4]  576 	ld	b,a
                            577 ;src/Enemy.c:149: if(enemy->hitPoints==0){
   02FC 21 05 00      [10]  578 	ld	hl,#0x0005
   02FF 09            [11]  579 	add	hl,bc
   0300 EB            [ 4]  580 	ex	de,hl
   0301 1A            [ 7]  581 	ld	a,(de)
   0302 B7            [ 4]  582 	or	a, a
   0303 20 E5         [12]  583 	jr	NZ,00103$
                            584 ;src/Enemy.c:150: enemy->id=i;
   0305 DD 7E FC      [19]  585 	ld	a,-4 (ix)
   0308 02            [ 7]  586 	ld	(bc),a
                            587 ;src/Enemy.c:152: enemy->type=cpct_getRandom_mxor_u8()&1;
   0309 69            [ 4]  588 	ld	l, c
   030A 60            [ 4]  589 	ld	h, b
   030B 23            [ 6]  590 	inc	hl
   030C E5            [11]  591 	push	hl
   030D C5            [11]  592 	push	bc
   030E D5            [11]  593 	push	de
   030F CDr00r00      [17]  594 	call	_cpct_getRandom_mxor_u8
   0312 7D            [ 4]  595 	ld	a,l
   0313 D1            [10]  596 	pop	de
   0314 C1            [10]  597 	pop	bc
   0315 E1            [10]  598 	pop	hl
   0316 E6 01         [ 7]  599 	and	a, #0x01
   0318 77            [ 7]  600 	ld	(hl),a
                            601 ;src/Enemy.c:154: enemy->hitPoints=ENEMY_INITIAL_HP;
   0319 3E FF         [ 7]  602 	ld	a,#0xFF
   031B 12            [ 7]  603 	ld	(de),a
                            604 ;src/Enemy.c:156: enemy->attackValue = (10)+level_get_level()+(cpct_getRandom_mxor_u8()&7);
   031C 21 06 00      [10]  605 	ld	hl,#0x0006
   031F 09            [11]  606 	add	hl,bc
   0320 E5            [11]  607 	push	hl
   0321 C5            [11]  608 	push	bc
   0322 CDr00r00      [17]  609 	call	_level_get_level
   0325 7D            [ 4]  610 	ld	a,l
   0326 C1            [10]  611 	pop	bc
   0327 E1            [10]  612 	pop	hl
   0328 C6 0A         [ 7]  613 	add	a, #0x0A
   032A 5F            [ 4]  614 	ld	e,a
   032B E5            [11]  615 	push	hl
   032C C5            [11]  616 	push	bc
   032D D5            [11]  617 	push	de
   032E CDr00r00      [17]  618 	call	_cpct_getRandom_mxor_u8
   0331 7D            [ 4]  619 	ld	a,l
   0332 D1            [10]  620 	pop	de
   0333 C1            [10]  621 	pop	bc
   0334 E1            [10]  622 	pop	hl
   0335 E6 07         [ 7]  623 	and	a, #0x07
   0337 83            [ 4]  624 	add	a,e
   0338 77            [ 7]  625 	ld	(hl),a
                            626 ;src/Enemy.c:157: enemy->defenseValue = level_get_level()+(cpct_getRandom_mxor_u8()&7);
   0339 21 07 00      [10]  627 	ld	hl,#0x0007
   033C 09            [11]  628 	add	hl,bc
   033D E5            [11]  629 	push	hl
   033E C5            [11]  630 	push	bc
   033F CDr00r00      [17]  631 	call	_level_get_level
   0342 5D            [ 4]  632 	ld	e,l
   0343 D5            [11]  633 	push	de
   0344 CDr00r00      [17]  634 	call	_cpct_getRandom_mxor_u8
   0347 7D            [ 4]  635 	ld	a,l
   0348 D1            [10]  636 	pop	de
   0349 C1            [10]  637 	pop	bc
   034A E1            [10]  638 	pop	hl
   034B E6 07         [ 7]  639 	and	a, #0x07
   034D 83            [ 4]  640 	add	a,e
   034E 77            [ 7]  641 	ld	(hl),a
                            642 ;src/Enemy.c:159: enemy->direction=(cpct_getRandom_mxor_u8()&3)*2;
   034F 59            [ 4]  643 	ld	e, c
   0350 50            [ 4]  644 	ld	d, b
   0351 13            [ 6]  645 	inc	de
   0352 13            [ 6]  646 	inc	de
   0353 C5            [11]  647 	push	bc
   0354 D5            [11]  648 	push	de
   0355 CDr00r00      [17]  649 	call	_cpct_getRandom_mxor_u8
   0358 D1            [10]  650 	pop	de
   0359 C1            [10]  651 	pop	bc
   035A 7D            [ 4]  652 	ld	a,l
   035B E6 03         [ 7]  653 	and	a, #0x03
   035D 87            [ 4]  654 	add	a, a
   035E 12            [ 7]  655 	ld	(de),a
                            656 ;src/Enemy.c:161: enemy->position.x = x;
   035F 03            [ 6]  657 	inc	bc
   0360 03            [ 6]  658 	inc	bc
   0361 03            [ 6]  659 	inc	bc
   0362 DD 7E FB      [19]  660 	ld	a,-5 (ix)
   0365 02            [ 7]  661 	ld	(bc),a
                            662 ;src/Enemy.c:162: enemy->position.y = y;
   0366 03            [ 6]  663 	inc	bc
   0367 DD 7E FF      [19]  664 	ld	a,-1 (ix)
   036A 02            [ 7]  665 	ld	(bc),a
                            666 ;src/Enemy.c:164: *memPos=(i+1)|(*memPos);
   036B DD 4E FC      [19]  667 	ld	c,-4 (ix)
   036E 0C            [ 4]  668 	inc	c
   036F DD 6E FD      [19]  669 	ld	l,-3 (ix)
   0372 DD 66 FE      [19]  670 	ld	h,-2 (ix)
   0375 7E            [ 7]  671 	ld	a,(hl)
   0376 B1            [ 4]  672 	or	a, c
   0377 DD 6E FD      [19]  673 	ld	l,-3 (ix)
   037A DD 66 FE      [19]  674 	ld	h,-2 (ix)
   037D 77            [ 7]  675 	ld	(hl),a
                            676 ;src/Enemy.c:166: ++activeEnemies;
   037E 21r00r00      [10]  677 	ld	hl, #_activeEnemies+0
   0381 34            [11]  678 	inc	(hl)
                            679 ;src/Enemy.c:167: break;
   0382                     680 00106$:
   0382 DD F9         [10]  681 	ld	sp, ix
   0384 DD E1         [14]  682 	pop	ix
   0386 C9            [10]  683 	ret
                            684 ;src/Enemy.c:213: u8 enemy_try_new_spawn(){
                            685 ;	---------------------------------
                            686 ; Function enemy_try_new_spawn
                            687 ; ---------------------------------
   0387                     688 _enemy_try_new_spawn::
   0387 DD E5         [15]  689 	push	ix
   0389 DD 21 00 00   [14]  690 	ld	ix,#0
   038D DD 39         [15]  691 	add	ix,sp
   038F 21 F9 FF      [10]  692 	ld	hl,#-7
   0392 39            [11]  693 	add	hl,sp
   0393 F9            [ 6]  694 	ld	sp,hl
                            695 ;src/Enemy.c:216: if(activeEnemies<ENEMY_MAX_ENEMIES){
   0394 3Ar00r00      [13]  696 	ld	a,(#_activeEnemies + 0)
   0397 D6 0F         [ 7]  697 	sub	a, #0x0F
   0399 30 74         [12]  698 	jr	NC,00106$
                            699 ;src/Enemy.c:217: pos.x=cpct_getRandom_mxor_u8()%MAP_WIDTH;
   039B 21 00 00      [10]  700 	ld	hl,#0x0000
   039E 39            [11]  701 	add	hl,sp
   039F E5            [11]  702 	push	hl
   03A0 CDr00r00      [17]  703 	call	_cpct_getRandom_mxor_u8
   03A3 7D            [ 4]  704 	ld	a,l
   03A4 E1            [10]  705 	pop	hl
   03A5 E6 1F         [ 7]  706 	and	a, #0x1F
   03A7 77            [ 7]  707 	ld	(hl),a
                            708 ;src/Enemy.c:218: pos.y=cpct_getRandom_mxor_u8()%MAP_HEIGHT;
   03A8 21 00 00      [10]  709 	ld	hl,#0x0000
   03AB 39            [11]  710 	add	hl,sp
   03AC DD 75 FE      [19]  711 	ld	-2 (ix),l
   03AF DD 74 FF      [19]  712 	ld	-1 (ix),h
   03B2 23            [ 6]  713 	inc	hl
   03B3 E5            [11]  714 	push	hl
   03B4 CDr00r00      [17]  715 	call	_cpct_getRandom_mxor_u8
   03B7 C1            [10]  716 	pop	bc
   03B8 7D            [ 4]  717 	ld	a,l
   03B9 E6 1F         [ 7]  718 	and	a, #0x1F
   03BB DD 77 FD      [19]  719 	ld	-3 (ix), a
   03BE 02            [ 7]  720 	ld	(bc),a
                            721 ;src/Enemy.c:220: if((*(u8*)(MAP_MEM+pos.x+(pos.y*MAP_WIDTH))&(CELL_WALL_MASK|CELL_ENEMY_MASK))==0){
   03BF DD 6E FE      [19]  722 	ld	l,-2 (ix)
   03C2 DD 66 FF      [19]  723 	ld	h,-1 (ix)
   03C5 7E            [ 7]  724 	ld	a,(hl)
   03C6 DD 77 FC      [19]  725 	ld	-4 (ix), a
   03C9 5F            [ 4]  726 	ld	e, a
   03CA 16 00         [ 7]  727 	ld	d,#0x00
   03CC 21 D0 88      [10]  728 	ld	hl,#0x88D0
   03CF 19            [11]  729 	add	hl,de
   03D0 EB            [ 4]  730 	ex	de,hl
   03D1 0A            [ 7]  731 	ld	a,(bc)
   03D2 DD 77 FB      [19]  732 	ld	-5 (ix),a
   03D5 DD 6E FD      [19]  733 	ld	l,-3 (ix)
   03D8 26 00         [ 7]  734 	ld	h,#0x00
   03DA 29            [11]  735 	add	hl, hl
   03DB 29            [11]  736 	add	hl, hl
   03DC 29            [11]  737 	add	hl, hl
   03DD 29            [11]  738 	add	hl, hl
   03DE 29            [11]  739 	add	hl, hl
   03DF 19            [11]  740 	add	hl,de
   03E0 7E            [ 7]  741 	ld	a,(hl)
   03E1 E6 8F         [ 7]  742 	and	a, #0x8F
   03E3 20 2A         [12]  743 	jr	NZ,00106$
                            744 ;src/Enemy.c:221: if(dist(player_position.x, player_position.y, pos.x, pos.y)>ENEMY_VIEW_DISTANCE){
   03E5 21r01r00      [10]  745 	ld	hl, #_player_position + 1
   03E8 4E            [ 7]  746 	ld	c,(hl)
   03E9 21r00r00      [10]  747 	ld	hl, #_player_position + 0
   03EC 5E            [ 7]  748 	ld	e,(hl)
   03ED DD 66 FB      [19]  749 	ld	h,-5 (ix)
   03F0 DD 6E FC      [19]  750 	ld	l,-4 (ix)
   03F3 E5            [11]  751 	push	hl
   03F4 51            [ 4]  752 	ld	d, c
   03F5 D5            [11]  753 	push	de
   03F6 CDr8Dr00      [17]  754 	call	_dist
   03F9 F1            [10]  755 	pop	af
   03FA F1            [10]  756 	pop	af
   03FB 3E 06         [ 7]  757 	ld	a,#0x06
   03FD 95            [ 4]  758 	sub	a, l
   03FE 30 0F         [12]  759 	jr	NC,00106$
                            760 ;src/Enemy.c:222: enemy_new_enemy(&pos);
   0400 DD 4E FE      [19]  761 	ld	c,-2 (ix)
   0403 DD 46 FF      [19]  762 	ld	b,-1 (ix)
   0406 C5            [11]  763 	push	bc
   0407 CDrAEr02      [17]  764 	call	_enemy_new_enemy
   040A F1            [10]  765 	pop	af
                            766 ;src/Enemy.c:223: return 1;
   040B 2E 01         [ 7]  767 	ld	l,#0x01
   040D 18 02         [12]  768 	jr	00107$
   040F                     769 00106$:
                            770 ;src/Enemy.c:227: return 0;
   040F 2E 00         [ 7]  771 	ld	l,#0x00
   0411                     772 00107$:
   0411 DD F9         [10]  773 	ld	sp, ix
   0413 DD E1         [14]  774 	pop	ix
   0415 C9            [10]  775 	ret
                            776 ;src/Enemy.c:230: u8 enemy_collision_at_dir(Vec2u* pos, u8 dir){
                            777 ;	---------------------------------
                            778 ; Function enemy_collision_at_dir
                            779 ; ---------------------------------
   0416                     780 _enemy_collision_at_dir::
   0416 DD E5         [15]  781 	push	ix
   0418 DD 21 00 00   [14]  782 	ld	ix,#0
   041C DD 39         [15]  783 	add	ix,sp
   041E F5            [11]  784 	push	af
   041F 3B            [ 6]  785 	dec	sp
                            786 ;src/Enemy.c:235: dx = movement_directionArray[dir];
   0420 01r00r00      [10]  787 	ld	bc,#_movement_directionArray+0
   0423 DD 6E 06      [19]  788 	ld	l,6 (ix)
   0426 26 00         [ 7]  789 	ld	h,#0x00
   0428 09            [11]  790 	add	hl,bc
   0429 5E            [ 7]  791 	ld	e,(hl)
                            792 ;src/Enemy.c:236: dy = movement_directionArray[dir+1];
   042A DD 56 06      [19]  793 	ld	d,6 (ix)
   042D 14            [ 4]  794 	inc	d
   042E 6A            [ 4]  795 	ld	l,d
   042F 26 00         [ 7]  796 	ld	h,#0x00
   0431 09            [11]  797 	add	hl,bc
   0432 7E            [ 7]  798 	ld	a,(hl)
   0433 DD 77 FD      [19]  799 	ld	-3 (ix),a
                            800 ;src/Enemy.c:238: val = *(u8*)(MAP_MEM + (pos->x + dx) + ((pos->y + dy)*MAP_WIDTH));
   0436 DD 4E 04      [19]  801 	ld	c,4 (ix)
   0439 DD 46 05      [19]  802 	ld	b,5 (ix)
   043C 0A            [ 7]  803 	ld	a,(bc)
   043D 6F            [ 4]  804 	ld	l,a
   043E 26 00         [ 7]  805 	ld	h,#0x00
   0440 7B            [ 4]  806 	ld	a,e
   0441 17            [ 4]  807 	rla
   0442 9F            [ 4]  808 	sbc	a, a
   0443 57            [ 4]  809 	ld	d,a
   0444 19            [11]  810 	add	hl,de
   0445 DD 75 FE      [19]  811 	ld	-2 (ix),l
   0448 DD 74 FF      [19]  812 	ld	-1 (ix),h
   044B EB            [ 4]  813 	ex	de,hl
   044C 21 D0 88      [10]  814 	ld	hl,#0x88D0
   044F 19            [11]  815 	add	hl,de
   0450 EB            [ 4]  816 	ex	de,hl
   0451 69            [ 4]  817 	ld	l, c
   0452 60            [ 4]  818 	ld	h, b
   0453 23            [ 6]  819 	inc	hl
   0454 4E            [ 7]  820 	ld	c,(hl)
   0455 06 00         [ 7]  821 	ld	b,#0x00
   0457 DD 6E FD      [19]  822 	ld	l,-3 (ix)
   045A DD 7E FD      [19]  823 	ld	a,-3 (ix)
   045D 17            [ 4]  824 	rla
   045E 9F            [ 4]  825 	sbc	a, a
   045F 67            [ 4]  826 	ld	h,a
   0460 09            [11]  827 	add	hl,bc
   0461 4D            [ 4]  828 	ld	c,l
   0462 44            [ 4]  829 	ld	b,h
   0463 29            [11]  830 	add	hl, hl
   0464 29            [11]  831 	add	hl, hl
   0465 29            [11]  832 	add	hl, hl
   0466 29            [11]  833 	add	hl, hl
   0467 29            [11]  834 	add	hl, hl
   0468 19            [11]  835 	add	hl,de
   0469 7E            [ 7]  836 	ld	a,(hl)
                            837 ;src/Enemy.c:240: if((val & (CELL_WALL_MASK|CELL_ENEMY_MASK)) || (((pos->x + dx) == player_position.x) && ((pos->y + dy) == player_position.y))) return 1;
   046A E6 8F         [ 7]  838 	and	a, #0x8F
   046C 20 20         [12]  839 	jr	NZ,00101$
   046E 21r00r00      [10]  840 	ld	hl,#_player_position+0
   0471 5E            [ 7]  841 	ld	e,(hl)
   0472 16 00         [ 7]  842 	ld	d,#0x00
   0474 DD 7E FE      [19]  843 	ld	a,-2 (ix)
   0477 93            [ 4]  844 	sub	a, e
   0478 20 18         [12]  845 	jr	NZ,00102$
   047A DD 7E FF      [19]  846 	ld	a,-1 (ix)
   047D 92            [ 4]  847 	sub	a, d
   047E 20 12         [12]  848 	jr	NZ,00102$
   0480 21r01r00      [10]  849 	ld	hl,#_player_position+1
   0483 5E            [ 7]  850 	ld	e,(hl)
   0484 16 00         [ 7]  851 	ld	d,#0x00
   0486 79            [ 4]  852 	ld	a,c
   0487 93            [ 4]  853 	sub	a, e
   0488 20 08         [12]  854 	jr	NZ,00102$
   048A 78            [ 4]  855 	ld	a,b
   048B 92            [ 4]  856 	sub	a, d
   048C 20 04         [12]  857 	jr	NZ,00102$
   048E                     858 00101$:
   048E 2E 01         [ 7]  859 	ld	l,#0x01
   0490 18 02         [12]  860 	jr	00105$
   0492                     861 00102$:
                            862 ;src/Enemy.c:241: return 0;
   0492 2E 00         [ 7]  863 	ld	l,#0x00
   0494                     864 00105$:
   0494 DD F9         [10]  865 	ld	sp, ix
   0496 DD E1         [14]  866 	pop	ix
   0498 C9            [10]  867 	ret
                            868 ;src/Enemy.c:244: u8 enemy_get_distance_to_obstacle(Enemy* e, u8 direction){
                            869 ;	---------------------------------
                            870 ; Function enemy_get_distance_to_obstacle
                            871 ; ---------------------------------
   0499                     872 _enemy_get_distance_to_obstacle::
   0499 DD E5         [15]  873 	push	ix
   049B DD 21 00 00   [14]  874 	ld	ix,#0
   049F DD 39         [15]  875 	add	ix,sp
   04A1 21 F9 FF      [10]  876 	ld	hl,#-7
   04A4 39            [11]  877 	add	hl,sp
   04A5 F9            [ 6]  878 	ld	sp,hl
                            879 ;src/Enemy.c:250: dx = movement_directionArray[direction];
   04A6 01r00r00      [10]  880 	ld	bc,#_movement_directionArray+0
   04A9 DD 6E 06      [19]  881 	ld	l,6 (ix)
   04AC 26 00         [ 7]  882 	ld	h,#0x00
   04AE 09            [11]  883 	add	hl,bc
   04AF 7E            [ 7]  884 	ld	a,(hl)
   04B0 DD 77 FB      [19]  885 	ld	-5 (ix),a
                            886 ;src/Enemy.c:251: dy = movement_directionArray[direction+1];
   04B3 DD 5E 06      [19]  887 	ld	e,6 (ix)
   04B6 1C            [ 4]  888 	inc	e
   04B7 6B            [ 4]  889 	ld	l,e
   04B8 26 00         [ 7]  890 	ld	h,#0x00
   04BA 09            [11]  891 	add	hl,bc
   04BB 7E            [ 7]  892 	ld	a,(hl)
   04BC DD 77 F9      [19]  893 	ld	-7 (ix),a
                            894 ;src/Enemy.c:254: position.x = e->position.x;
   04BF 21 03 00      [10]  895 	ld	hl,#0x0003
   04C2 39            [11]  896 	add	hl,sp
   04C3 4D            [ 4]  897 	ld	c,l
   04C4 44            [ 4]  898 	ld	b,h
   04C5 DD 5E 04      [19]  899 	ld	e,4 (ix)
   04C8 DD 56 05      [19]  900 	ld	d,5 (ix)
   04CB 6B            [ 4]  901 	ld	l, e
   04CC 62            [ 4]  902 	ld	h, d
   04CD 23            [ 6]  903 	inc	hl
   04CE 23            [ 6]  904 	inc	hl
   04CF 23            [ 6]  905 	inc	hl
   04D0 7E            [ 7]  906 	ld	a,(hl)
   04D1 02            [ 7]  907 	ld	(bc),a
                            908 ;src/Enemy.c:255: position.y = e->position.y;
   04D2 21 03 00      [10]  909 	ld	hl,#0x0003
   04D5 39            [11]  910 	add	hl,sp
   04D6 DD 75 FE      [19]  911 	ld	-2 (ix),l
   04D9 DD 74 FF      [19]  912 	ld	-1 (ix),h
   04DC 23            [ 6]  913 	inc	hl
   04DD 4D            [ 4]  914 	ld	c,l
   04DE 44            [ 4]  915 	ld	b,h
   04DF D5            [11]  916 	push	de
   04E0 FD E1         [14]  917 	pop	iy
   04E2 FD 7E 04      [19]  918 	ld	a,4 (iy)
   04E5 02            [ 7]  919 	ld	(bc),a
                            920 ;src/Enemy.c:259: while(!(enemy_collision_at_dir(&position, direction))){
   04E6 DD 5E FE      [19]  921 	ld	e,-2 (ix)
   04E9 DD 56 FF      [19]  922 	ld	d,-1 (ix)
   04EC DD 36 FA 00   [19]  923 	ld	-6 (ix),#0x00
   04F0                     924 00101$:
   04F0 D5            [11]  925 	push	de
   04F1 FD E1         [14]  926 	pop	iy
   04F3 C5            [11]  927 	push	bc
   04F4 D5            [11]  928 	push	de
   04F5 DD 7E 06      [19]  929 	ld	a,6 (ix)
   04F8 F5            [11]  930 	push	af
   04F9 33            [ 6]  931 	inc	sp
   04FA FD E5         [15]  932 	push	iy
   04FC CDr16r04      [17]  933 	call	_enemy_collision_at_dir
   04FF F1            [10]  934 	pop	af
   0500 33            [ 6]  935 	inc	sp
   0501 D1            [10]  936 	pop	de
   0502 C1            [10]  937 	pop	bc
   0503 7D            [ 4]  938 	ld	a,l
   0504 B7            [ 4]  939 	or	a, a
   0505 20 1B         [12]  940 	jr	NZ,00103$
                            941 ;src/Enemy.c:260: ++count;
   0507 DD 34 FA      [23]  942 	inc	-6 (ix)
                            943 ;src/Enemy.c:261: position.x += dx;
   050A DD 6E FE      [19]  944 	ld	l,-2 (ix)
   050D DD 66 FF      [19]  945 	ld	h,-1 (ix)
   0510 7E            [ 7]  946 	ld	a, (hl)
   0511 DD 86 FB      [19]  947 	add	a, -5 (ix)
   0514 DD 6E FE      [19]  948 	ld	l,-2 (ix)
   0517 DD 66 FF      [19]  949 	ld	h,-1 (ix)
   051A 77            [ 7]  950 	ld	(hl),a
                            951 ;src/Enemy.c:262: position.y += dy;
   051B 0A            [ 7]  952 	ld	a,(bc)
   051C DD 86 F9      [19]  953 	add	a, -7 (ix)
   051F 02            [ 7]  954 	ld	(bc),a
   0520 18 CE         [12]  955 	jr	00101$
   0522                     956 00103$:
                            957 ;src/Enemy.c:265: return count;
   0522 DD 6E FA      [19]  958 	ld	l,-6 (ix)
   0525 DD F9         [10]  959 	ld	sp, ix
   0527 DD E1         [14]  960 	pop	ix
   0529 C9            [10]  961 	ret
                            962 ;src/Enemy.c:268: void enemy_remove(Enemy* e){
                            963 ;	---------------------------------
                            964 ; Function enemy_remove
                            965 ; ---------------------------------
   052A                     966 _enemy_remove::
   052A DD E5         [15]  967 	push	ix
   052C DD 21 00 00   [14]  968 	ld	ix,#0
   0530 DD 39         [15]  969 	add	ix,sp
                            970 ;src/Enemy.c:273: e->hitPoints=0;
   0532 DD 5E 04      [19]  971 	ld	e,4 (ix)
   0535 DD 56 05      [19]  972 	ld	d,5 (ix)
   0538 21 05 00      [10]  973 	ld	hl,#0x0005
   053B 19            [11]  974 	add	hl,de
   053C 36 00         [10]  975 	ld	(hl),#0x00
                            976 ;src/Enemy.c:275: (map[e->position.x + (e->position.y)*MAP_WIDTH]) &= (CELL_ITEM_MASK);
   053E 6B            [ 4]  977 	ld	l, e
   053F 62            [ 4]  978 	ld	h, d
   0540 23            [ 6]  979 	inc	hl
   0541 23            [ 6]  980 	inc	hl
   0542 23            [ 6]  981 	inc	hl
   0543 4E            [ 7]  982 	ld	c,(hl)
   0544 06 00         [ 7]  983 	ld	b,#0x00
   0546 D5            [11]  984 	push	de
   0547 FD E1         [14]  985 	pop	iy
   0549 FD 6E 04      [19]  986 	ld	l,4 (iy)
   054C 26 00         [ 7]  987 	ld	h,#0x00
   054E 29            [11]  988 	add	hl, hl
   054F 29            [11]  989 	add	hl, hl
   0550 29            [11]  990 	add	hl, hl
   0551 29            [11]  991 	add	hl, hl
   0552 29            [11]  992 	add	hl, hl
   0553 09            [11]  993 	add	hl,bc
   0554 01 D0 88      [10]  994 	ld	bc,#0x88D0
   0557 09            [11]  995 	add	hl,bc
   0558 7E            [ 7]  996 	ld	a,(hl)
   0559 E6 70         [ 7]  997 	and	a, #0x70
   055B 77            [ 7]  998 	ld	(hl),a
                            999 ;src/Enemy.c:276: --activeEnemies;
   055C 21r00r00      [10] 1000 	ld	hl, #_activeEnemies+0
   055F 35            [11] 1001 	dec	(hl)
   0560 DD E1         [14] 1002 	pop	ix
   0562 C9            [10] 1003 	ret
                           1004 ;src/Enemy.c:279: void enemy_move(Enemy* e, u8 d){
                           1005 ;	---------------------------------
                           1006 ; Function enemy_move
                           1007 ; ---------------------------------
   0563                    1008 _enemy_move::
   0563 DD E5         [15] 1009 	push	ix
   0565 DD 21 00 00   [14] 1010 	ld	ix,#0
   0569 DD 39         [15] 1011 	add	ix,sp
   056B 21 F8 FF      [10] 1012 	ld	hl,#-8
   056E 39            [11] 1013 	add	hl,sp
   056F F9            [ 6] 1014 	ld	sp,hl
                           1015 ;src/Enemy.c:287: x = e->position.x;
   0570 DD 5E 04      [19] 1016 	ld	e,4 (ix)
   0573 DD 56 05      [19] 1017 	ld	d,5 (ix)
   0576 21 03 00      [10] 1018 	ld	hl,#0x0003
   0579 19            [11] 1019 	add	hl,de
   057A DD 75 FA      [19] 1020 	ld	-6 (ix),l
   057D DD 74 FB      [19] 1021 	ld	-5 (ix),h
   0580 DD 6E FA      [19] 1022 	ld	l,-6 (ix)
   0583 DD 66 FB      [19] 1023 	ld	h,-5 (ix)
   0586 7E            [ 7] 1024 	ld	a,(hl)
   0587 DD 77 FF      [19] 1025 	ld	-1 (ix),a
                           1026 ;src/Enemy.c:288: y = e->position.y;
   058A 21 04 00      [10] 1027 	ld	hl,#0x0004
   058D 19            [11] 1028 	add	hl,de
   058E DD 75 FD      [19] 1029 	ld	-3 (ix),l
   0591 DD 74 FE      [19] 1030 	ld	-2 (ix),h
   0594 DD 6E FD      [19] 1031 	ld	l,-3 (ix)
   0597 DD 66 FE      [19] 1032 	ld	h,-2 (ix)
   059A 7E            [ 7] 1033 	ld	a,(hl)
   059B DD 77 FC      [19] 1034 	ld	-4 (ix),a
                           1035 ;src/Enemy.c:291: (map[x + (y)*MAP_WIDTH]) &= (CELL_ITEM_MASK);
   059E DD 4E FF      [19] 1036 	ld	c,-1 (ix)
   05A1 06 00         [ 7] 1037 	ld	b,#0x00
   05A3 DD 6E FC      [19] 1038 	ld	l,-4 (ix)
   05A6 26 00         [ 7] 1039 	ld	h,#0x00
   05A8 29            [11] 1040 	add	hl, hl
   05A9 29            [11] 1041 	add	hl, hl
   05AA 29            [11] 1042 	add	hl, hl
   05AB 29            [11] 1043 	add	hl, hl
   05AC 29            [11] 1044 	add	hl, hl
   05AD 09            [11] 1045 	add	hl,bc
   05AE 01 D0 88      [10] 1046 	ld	bc,#0x88D0
   05B1 09            [11] 1047 	add	hl,bc
   05B2 7E            [ 7] 1048 	ld	a,(hl)
   05B3 E6 70         [ 7] 1049 	and	a, #0x70
   05B5 77            [ 7] 1050 	ld	(hl),a
                           1051 ;src/Enemy.c:293: dx=movement_directionArray[d];
   05B6 01r00r00      [10] 1052 	ld	bc,#_movement_directionArray+0
   05B9 DD 6E 06      [19] 1053 	ld	l,6 (ix)
   05BC 26 00         [ 7] 1054 	ld	h,#0x00
   05BE 09            [11] 1055 	add	hl,bc
   05BF 7E            [ 7] 1056 	ld	a,(hl)
   05C0 DD 77 F9      [19] 1057 	ld	-7 (ix),a
                           1058 ;src/Enemy.c:294: dy=movement_directionArray[d+1];
   05C3 DD 6E 06      [19] 1059 	ld	l,6 (ix)
   05C6 2C            [ 4] 1060 	inc	l
   05C7 26 00         [ 7] 1061 	ld	h,#0x00
   05C9 09            [11] 1062 	add	hl,bc
   05CA 46            [ 7] 1063 	ld	b,(hl)
                           1064 ;src/Enemy.c:297: x+=dx;
   05CB DD 7E FF      [19] 1065 	ld	a, -1 (ix)
   05CE DD 86 F9      [19] 1066 	add	a, -7 (ix)
   05D1 4F            [ 4] 1067 	ld	c,a
                           1068 ;src/Enemy.c:298: y+=dy;
   05D2 DD 7E FC      [19] 1069 	ld	a, -4 (ix)
   05D5 80            [ 4] 1070 	add	a, b
   05D6 DD 77 F8      [19] 1071 	ld	-8 (ix),a
                           1072 ;src/Enemy.c:300: e->direction = d;
   05D9 6B            [ 4] 1073 	ld	l, e
   05DA 62            [ 4] 1074 	ld	h, d
   05DB 23            [ 6] 1075 	inc	hl
   05DC 23            [ 6] 1076 	inc	hl
   05DD DD 7E 06      [19] 1077 	ld	a,6 (ix)
   05E0 77            [ 7] 1078 	ld	(hl),a
                           1079 ;src/Enemy.c:302: e->position.x = x;
   05E1 DD 6E FA      [19] 1080 	ld	l,-6 (ix)
   05E4 DD 66 FB      [19] 1081 	ld	h,-5 (ix)
   05E7 71            [ 7] 1082 	ld	(hl),c
                           1083 ;src/Enemy.c:303: e->position.y = y;
   05E8 DD 6E FD      [19] 1084 	ld	l,-3 (ix)
   05EB DD 66 FE      [19] 1085 	ld	h,-2 (ix)
   05EE DD 7E F8      [19] 1086 	ld	a,-8 (ix)
   05F1 77            [ 7] 1087 	ld	(hl),a
                           1088 ;src/Enemy.c:306: (map[x + (y)*MAP_WIDTH]) |= ((e->id)+1);
   05F2 06 00         [ 7] 1089 	ld	b,#0x00
   05F4 DD 6E F8      [19] 1090 	ld	l,-8 (ix)
   05F7 26 00         [ 7] 1091 	ld	h,#0x00
   05F9 29            [11] 1092 	add	hl, hl
   05FA 29            [11] 1093 	add	hl, hl
   05FB 29            [11] 1094 	add	hl, hl
   05FC 29            [11] 1095 	add	hl, hl
   05FD 29            [11] 1096 	add	hl, hl
   05FE 09            [11] 1097 	add	hl, bc
   05FF E5            [11] 1098 	push	hl
   0600 FD E1         [14] 1099 	pop	iy
   0602 01 D0 88      [10] 1100 	ld	bc,#0x88D0
   0605 FD 09         [15] 1101 	add	iy, bc
   0607 FD 4E 00      [19] 1102 	ld	c, 0 (iy)
   060A 1A            [ 7] 1103 	ld	a,(de)
   060B 3C            [ 4] 1104 	inc	a
   060C B1            [ 4] 1105 	or	a, c
   060D FD 77 00      [19] 1106 	ld	0 (iy), a
   0610 DD F9         [10] 1107 	ld	sp, ix
   0612 DD E1         [14] 1108 	pop	ix
   0614 C9            [10] 1109 	ret
                           1110 ;src/Enemy.c:309: u8 enemy_attack_enemy(Enemy* e){
                           1111 ;	---------------------------------
                           1112 ; Function enemy_attack_enemy
                           1113 ; ---------------------------------
   0615                    1114 _enemy_attack_enemy::
   0615 DD E5         [15] 1115 	push	ix
   0617 DD 21 00 00   [14] 1116 	ld	ix,#0
   061B DD 39         [15] 1117 	add	ix,sp
   061D 3B            [ 6] 1118 	dec	sp
                           1119 ;src/Enemy.c:311: const char* t = "    DMG";
                           1120 ;src/Enemy.c:312: dmg = (player_attack_value - e->defenseValue);
   061E DD 4E 04      [19] 1121 	ld	c,4 (ix)
   0621 DD 46 05      [19] 1122 	ld	b,5 (ix)
   0624 C5            [11] 1123 	push	bc
   0625 FD E1         [14] 1124 	pop	iy
   0627 FD 5E 07      [19] 1125 	ld	e,7 (iy)
   062A 3Ar00r00      [13] 1126 	ld	a,(#_player_attack_value + 0)
   062D 93            [ 4] 1127 	sub	a, e
                           1128 ;src/Enemy.c:313: if(dmg<1) dmg = 1;
   062E DD 77 FF      [19] 1129 	ld	-1 (ix), a
   0631 EE 80         [ 7] 1130 	xor	a, #0x80
   0633 D6 81         [ 7] 1131 	sub	a, #0x81
   0635 30 04         [12] 1132 	jr	NC,00102$
   0637 DD 36 FF 01   [19] 1133 	ld	-1 (ix),#0x01
   063B                    1134 00102$:
                           1135 ;src/Enemy.c:315: cpct_memcpy(t,integer_to_string(dmg,'d'),3);
   063B C5            [11] 1136 	push	bc
   063C 3E 64         [ 7] 1137 	ld	a,#0x64
   063E F5            [11] 1138 	push	af
   063F 33            [ 6] 1139 	inc	sp
   0640 DD 7E FF      [19] 1140 	ld	a,-1 (ix)
   0643 F5            [11] 1141 	push	af
   0644 33            [ 6] 1142 	inc	sp
   0645 CDr00r00      [17] 1143 	call	_integer_to_string
   0648 F1            [10] 1144 	pop	af
   0649 11 03 00      [10] 1145 	ld	de,#0x0003
   064C D5            [11] 1146 	push	de
   064D E5            [11] 1147 	push	hl
   064E 21rAFr06      [10] 1148 	ld	hl,#___str_0
   0651 E5            [11] 1149 	push	hl
   0652 CDr00r00      [17] 1150 	call	_cpct_memcpy
   0655 3E 03         [ 7] 1151 	ld	a,#0x03
   0657 F5            [11] 1152 	push	af
   0658 33            [ 6] 1153 	inc	sp
   0659 21rB7r06      [10] 1154 	ld	hl,#___str_1
   065C E5            [11] 1155 	push	hl
   065D CDr00r00      [17] 1156 	call	_ui_log_add_log
   0660 F1            [10] 1157 	pop	af
   0661 33            [ 6] 1158 	inc	sp
   0662 3E 05         [ 7] 1159 	ld	a,#0x05
   0664 F5            [11] 1160 	push	af
   0665 33            [ 6] 1161 	inc	sp
   0666 21rAFr06      [10] 1162 	ld	hl,#___str_0
   0669 E5            [11] 1163 	push	hl
   066A CDr00r00      [17] 1164 	call	_ui_log_add_log
   066D F1            [10] 1165 	pop	af
   066E 33            [ 6] 1166 	inc	sp
   066F CDr00r00      [17] 1167 	call	_ui_log_render
   0672 C1            [10] 1168 	pop	bc
                           1169 ;src/Enemy.c:320: if(e->hitPoints>(u8)dmg){
   0673 21 05 00      [10] 1170 	ld	hl,#0x0005
   0676 09            [11] 1171 	add	hl,bc
   0677 5E            [ 7] 1172 	ld	e,(hl)
   0678 DD 7E FF      [19] 1173 	ld	a, -1 (ix)
   067B 93            [ 4] 1174 	sub	a, e
   067C 30 09         [12] 1175 	jr	NC,00107$
                           1176 ;src/Enemy.c:321: e->hitPoints -= dmg;
   067E 7B            [ 4] 1177 	ld	a,e
   067F DD 96 FF      [19] 1178 	sub	a, -1 (ix)
   0682 77            [ 7] 1179 	ld	(hl),a
                           1180 ;src/Enemy.c:322: return 0;
   0683 2E 00         [ 7] 1181 	ld	l,#0x00
   0685 18 24         [12] 1182 	jr	00109$
   0687                    1183 00107$:
                           1184 ;src/Enemy.c:326: enemy_remove(e);
   0687 C5            [11] 1185 	push	bc
   0688 C5            [11] 1186 	push	bc
   0689 CDr2Ar05      [17] 1187 	call	_enemy_remove
   068C F1            [10] 1188 	pop	af
   068D CDr00r00      [17] 1189 	call	_cpct_getRandom_mxor_u8
   0690 C1            [10] 1190 	pop	bc
   0691 CB 45         [ 8] 1191 	bit	0, l
   0693 20 0A         [12] 1192 	jr	NZ,00103$
   0695 C5            [11] 1193 	push	bc
   0696 CDr00r00      [17] 1194 	call	_level_get_level
   0699 C1            [10] 1195 	pop	bc
   069A 7D            [ 4] 1196 	ld	a,l
   069B D6 20         [ 7] 1197 	sub	a, #0x20
   069D 20 0A         [12] 1198 	jr	NZ,00104$
   069F                    1199 00103$:
                           1200 ;src/Enemy.c:329: item_try_new_spawn_at(&(e->position));
   069F 03            [ 6] 1201 	inc	bc
   06A0 03            [ 6] 1202 	inc	bc
   06A1 03            [ 6] 1203 	inc	bc
   06A2 60            [ 4] 1204 	ld	h,b
   06A3 69            [ 4] 1205 	ld	l, c
   06A4 E5            [11] 1206 	push	hl
   06A5 CDr00r00      [17] 1207 	call	_item_try_new_spawn_at
   06A8 F1            [10] 1208 	pop	af
   06A9                    1209 00104$:
                           1210 ;src/Enemy.c:332: return 1;
   06A9 2E 01         [ 7] 1211 	ld	l,#0x01
   06AB                    1212 00109$:
   06AB 33            [ 6] 1213 	inc	sp
   06AC DD E1         [14] 1214 	pop	ix
   06AE C9            [10] 1215 	ret
   06AF                    1216 ___str_0:
   06AF 20 20 20 20 44 4D  1217 	.ascii "    DMG"
        47
   06B6 00                 1218 	.db 0x00
   06B7                    1219 ___str_1:
   06B7 59 4F 55 20 4D 41  1220 	.ascii "YOU MAKE"
        4B 45
   06BF 00                 1221 	.db 0x00
                           1222 ;src/Enemy.c:336: void enemy_attack(Enemy* e){
                           1223 ;	---------------------------------
                           1224 ; Function enemy_attack
                           1225 ; ---------------------------------
   06C0                    1226 _enemy_attack::
   06C0 DD E5         [15] 1227 	push	ix
   06C2 DD 21 00 00   [14] 1228 	ld	ix,#0
   06C6 DD 39         [15] 1229 	add	ix,sp
                           1230 ;src/Enemy.c:338: const char* t = "    HP";
                           1231 ;src/Enemy.c:339: dmg = (e->attackValue - player_defense_value);
   06C8 DD 6E 04      [19] 1232 	ld	l,4 (ix)
   06CB DD 66 05      [19] 1233 	ld	h,5 (ix)
   06CE 11 06 00      [10] 1234 	ld	de, #0x0006
   06D1 19            [11] 1235 	add	hl, de
   06D2 4E            [ 7] 1236 	ld	c,(hl)
   06D3 21r00r00      [10] 1237 	ld	hl,#_player_defense_value
   06D6 79            [ 4] 1238 	ld	a,c
   06D7 96            [ 7] 1239 	sub	a, (hl)
                           1240 ;src/Enemy.c:340: if(dmg<1) dmg = 1;
   06D8 47            [ 4] 1241 	ld	b,a
   06D9 EE 80         [ 7] 1242 	xor	a, #0x80
   06DB D6 81         [ 7] 1243 	sub	a, #0x81
   06DD 30 02         [12] 1244 	jr	NC,00102$
   06DF 06 01         [ 7] 1245 	ld	b,#0x01
   06E1                    1246 00102$:
                           1247 ;src/Enemy.c:342: cpct_memcpy(t,integer_to_string(dmg,'d'),3);
   06E1 C5            [11] 1248 	push	bc
   06E2 3E 64         [ 7] 1249 	ld	a,#0x64
   06E4 F5            [11] 1250 	push	af
   06E5 33            [ 6] 1251 	inc	sp
   06E6 C5            [11] 1252 	push	bc
   06E7 33            [ 6] 1253 	inc	sp
   06E8 CDr00r00      [17] 1254 	call	_integer_to_string
   06EB F1            [10] 1255 	pop	af
   06EC 11 03 00      [10] 1256 	ld	de,#0x0003
   06EF D5            [11] 1257 	push	de
   06F0 E5            [11] 1258 	push	hl
   06F1 21r35r07      [10] 1259 	ld	hl,#___str_2
   06F4 E5            [11] 1260 	push	hl
   06F5 CDr00r00      [17] 1261 	call	_cpct_memcpy
   06F8 3E 03         [ 7] 1262 	ld	a,#0x03
   06FA F5            [11] 1263 	push	af
   06FB 33            [ 6] 1264 	inc	sp
   06FC 21r3Cr07      [10] 1265 	ld	hl,#___str_3
   06FF E5            [11] 1266 	push	hl
   0700 CDr00r00      [17] 1267 	call	_ui_log_add_log
   0703 F1            [10] 1268 	pop	af
   0704 33            [ 6] 1269 	inc	sp
   0705 3E 04         [ 7] 1270 	ld	a,#0x04
   0707 F5            [11] 1271 	push	af
   0708 33            [ 6] 1272 	inc	sp
   0709 21r35r07      [10] 1273 	ld	hl,#___str_2
   070C E5            [11] 1274 	push	hl
   070D CDr00r00      [17] 1275 	call	_ui_log_add_log
   0710 F1            [10] 1276 	pop	af
   0711 33            [ 6] 1277 	inc	sp
   0712 CDr00r00      [17] 1278 	call	_ui_log_render
   0715 C1            [10] 1279 	pop	bc
                           1280 ;src/Enemy.c:347: if(player_health_points>(u8)dmg){
   0716 78            [ 4] 1281 	ld	a, b
   0717 FD 21r00r00   [14] 1282 	ld	iy,#_player_health_points
   071B FD 96 00      [19] 1283 	sub	a, 0 (iy)
   071E 30 0A         [12] 1284 	jr	NC,00104$
                           1285 ;src/Enemy.c:348: player_health_points -= dmg;
   0720 3Ar00r00      [13] 1286 	ld	a,(#_player_health_points + 0)
   0723 21r00r00      [10] 1287 	ld	hl, #_player_health_points
   0726 90            [ 4] 1288 	sub	a, b
   0727 77            [ 7] 1289 	ld	(hl),a
   0728 18 05         [12] 1290 	jr	00105$
   072A                    1291 00104$:
                           1292 ;src/Enemy.c:351: player_is_dead = 1;
   072A 21r00r00      [10] 1293 	ld	hl,#_player_is_dead + 0
   072D 36 01         [10] 1294 	ld	(hl), #0x01
   072F                    1295 00105$:
                           1296 ;src/Enemy.c:353: ui_playerstats_render_hp();
   072F CDr00r00      [17] 1297 	call	_ui_playerstats_render_hp
   0732 DD E1         [14] 1298 	pop	ix
   0734 C9            [10] 1299 	ret
   0735                    1300 ___str_2:
   0735 20 20 20 20 48 50  1301 	.ascii "    HP"
   073B 00                 1302 	.db 0x00
   073C                    1303 ___str_3:
   073C 59 4F 55 20 4C 4F  1304 	.ascii "YOU LOSE"
        53 45
   0744 00                 1305 	.db 0x00
                           1306 ;src/Enemy.c:356: void enemy_go_to_player(Enemy* e){//NOT WORKING
                           1307 ;	---------------------------------
                           1308 ; Function enemy_go_to_player
                           1309 ; ---------------------------------
   0745                    1310 _enemy_go_to_player::
   0745 DD E5         [15] 1311 	push	ix
   0747 DD 21 00 00   [14] 1312 	ld	ix,#0
   074B DD 39         [15] 1313 	add	ix,sp
   074D F5            [11] 1314 	push	af
   074E F5            [11] 1315 	push	af
                           1316 ;src/Enemy.c:361: dx=player_position.x-e->position.x;
   074F 21r00r00      [10] 1317 	ld	hl,#_player_position+0
   0752 5E            [ 7] 1318 	ld	e,(hl)
   0753 DD 4E 04      [19] 1319 	ld	c,4 (ix)
   0756 DD 46 05      [19] 1320 	ld	b,5 (ix)
   0759 21 03 00      [10] 1321 	ld	hl,#0x0003
   075C 09            [11] 1322 	add	hl,bc
   075D DD 75 FD      [19] 1323 	ld	-3 (ix),l
   0760 DD 74 FE      [19] 1324 	ld	-2 (ix),h
   0763 DD 6E FD      [19] 1325 	ld	l,-3 (ix)
   0766 DD 66 FE      [19] 1326 	ld	h,-2 (ix)
   0769 56            [ 7] 1327 	ld	d,(hl)
   076A 7B            [ 4] 1328 	ld	a,e
   076B 92            [ 4] 1329 	sub	a, d
   076C DD 77 FC      [19] 1330 	ld	-4 (ix),a
                           1331 ;src/Enemy.c:362: dy=player_position.y-e->position.y;
   076F 21r01r00      [10] 1332 	ld	hl,#_player_position+1
   0772 5E            [ 7] 1333 	ld	e,(hl)
   0773 C5            [11] 1334 	push	bc
   0774 FD E1         [14] 1335 	pop	iy
   0776 FD 56 04      [19] 1336 	ld	d,4 (iy)
   0779 7B            [ 4] 1337 	ld	a,e
   077A 92            [ 4] 1338 	sub	a, d
   077B 6F            [ 4] 1339 	ld	l,a
                           1340 ;src/Enemy.c:364: dirX = (dx>0)?MOVEMENT_EAST:MOVEMENT_WEST;
   077C AF            [ 4] 1341 	xor	a, a
   077D DD 96 FC      [19] 1342 	sub	a, -4 (ix)
   0780 E2r85r07      [10] 1343 	jp	PO, 00136$
   0783 EE 80         [ 7] 1344 	xor	a, #0x80
   0785                    1345 00136$:
   0785 F2r8Cr07      [10] 1346 	jp	P,00112$
   0788 1E 00         [ 7] 1347 	ld	e,#0x00
   078A 18 02         [12] 1348 	jr	00113$
   078C                    1349 00112$:
   078C 1E 04         [ 7] 1350 	ld	e,#0x04
   078E                    1351 00113$:
                           1352 ;src/Enemy.c:365: dirY = (dy>0)?MOVEMENT_SOUTH:MOVEMENT_NORTH;
   078E AF            [ 4] 1353 	xor	a, a
   078F 95            [ 4] 1354 	sub	a, l
   0790 E2r95r07      [10] 1355 	jp	PO, 00137$
   0793 EE 80         [ 7] 1356 	xor	a, #0x80
   0795                    1357 00137$:
   0795 F2r9Cr07      [10] 1358 	jp	P,00114$
   0798 16 06         [ 7] 1359 	ld	d,#0x06
   079A 18 02         [12] 1360 	jr	00115$
   079C                    1361 00114$:
   079C 16 02         [ 7] 1362 	ld	d,#0x02
   079E                    1363 00115$:
                           1364 ;src/Enemy.c:367: if(abs(dx)>abs(dy)){
   079E E5            [11] 1365 	push	hl
   079F C5            [11] 1366 	push	bc
   07A0 D5            [11] 1367 	push	de
   07A1 DD 7E FC      [19] 1368 	ld	a,-4 (ix)
   07A4 F5            [11] 1369 	push	af
   07A5 33            [ 6] 1370 	inc	sp
   07A6 CDr70r00      [17] 1371 	call	_abs
   07A9 33            [ 6] 1372 	inc	sp
   07AA DD 75 FF      [19] 1373 	ld	-1 (ix),l
   07AD D1            [10] 1374 	pop	de
   07AE C1            [10] 1375 	pop	bc
   07AF E1            [10] 1376 	pop	hl
   07B0 C5            [11] 1377 	push	bc
   07B1 D5            [11] 1378 	push	de
   07B2 7D            [ 4] 1379 	ld	a,l
   07B3 F5            [11] 1380 	push	af
   07B4 33            [ 6] 1381 	inc	sp
   07B5 CDr70r00      [17] 1382 	call	_abs
   07B8 33            [ 6] 1383 	inc	sp
   07B9 D1            [10] 1384 	pop	de
   07BA C1            [10] 1385 	pop	bc
   07BB 7D            [ 4] 1386 	ld	a,l
   07BC DD 96 FF      [19] 1387 	sub	a, -1 (ix)
   07BF E2rC4r07      [10] 1388 	jp	PO, 00138$
   07C2 EE 80         [ 7] 1389 	xor	a, #0x80
   07C4                    1390 00138$:
   07C4 F2rF3r07      [10] 1391 	jp	P,00108$
                           1392 ;src/Enemy.c:368: if(!enemy_collision_at_dir(&(e->position),dirX)){
   07C7 C5            [11] 1393 	push	bc
   07C8 D5            [11] 1394 	push	de
   07C9 7B            [ 4] 1395 	ld	a,e
   07CA F5            [11] 1396 	push	af
   07CB 33            [ 6] 1397 	inc	sp
   07CC DD 6E FD      [19] 1398 	ld	l,-3 (ix)
   07CF DD 66 FE      [19] 1399 	ld	h,-2 (ix)
   07D2 E5            [11] 1400 	push	hl
   07D3 CDr16r04      [17] 1401 	call	_enemy_collision_at_dir
   07D6 F1            [10] 1402 	pop	af
   07D7 33            [ 6] 1403 	inc	sp
   07D8 D1            [10] 1404 	pop	de
   07D9 C1            [10] 1405 	pop	bc
   07DA 7D            [ 4] 1406 	ld	a,l
   07DB B7            [ 4] 1407 	or	a, a
   07DC 20 0B         [12] 1408 	jr	NZ,00102$
                           1409 ;src/Enemy.c:371: enemy_move(e, dirX);
   07DE 7B            [ 4] 1410 	ld	a,e
   07DF F5            [11] 1411 	push	af
   07E0 33            [ 6] 1412 	inc	sp
   07E1 C5            [11] 1413 	push	bc
   07E2 CDr63r05      [17] 1414 	call	_enemy_move
   07E5 F1            [10] 1415 	pop	af
   07E6 33            [ 6] 1416 	inc	sp
   07E7 18 33         [12] 1417 	jr	00110$
   07E9                    1418 00102$:
                           1419 ;src/Enemy.c:376: enemy_move(e, dirY);
   07E9 D5            [11] 1420 	push	de
   07EA 33            [ 6] 1421 	inc	sp
   07EB C5            [11] 1422 	push	bc
   07EC CDr63r05      [17] 1423 	call	_enemy_move
   07EF F1            [10] 1424 	pop	af
   07F0 33            [ 6] 1425 	inc	sp
   07F1 18 29         [12] 1426 	jr	00110$
   07F3                    1427 00108$:
                           1428 ;src/Enemy.c:380: if(!enemy_collision_at_dir(&(e->position),dirY)){
   07F3 C5            [11] 1429 	push	bc
   07F4 D5            [11] 1430 	push	de
   07F5 D5            [11] 1431 	push	de
   07F6 33            [ 6] 1432 	inc	sp
   07F7 DD 6E FD      [19] 1433 	ld	l,-3 (ix)
   07FA DD 66 FE      [19] 1434 	ld	h,-2 (ix)
   07FD E5            [11] 1435 	push	hl
   07FE CDr16r04      [17] 1436 	call	_enemy_collision_at_dir
   0801 F1            [10] 1437 	pop	af
   0802 33            [ 6] 1438 	inc	sp
   0803 D1            [10] 1439 	pop	de
   0804 C1            [10] 1440 	pop	bc
   0805 7D            [ 4] 1441 	ld	a,l
   0806 B7            [ 4] 1442 	or	a, a
   0807 20 0A         [12] 1443 	jr	NZ,00105$
                           1444 ;src/Enemy.c:383: enemy_move(e, dirY);
   0809 D5            [11] 1445 	push	de
   080A 33            [ 6] 1446 	inc	sp
   080B C5            [11] 1447 	push	bc
   080C CDr63r05      [17] 1448 	call	_enemy_move
   080F F1            [10] 1449 	pop	af
   0810 33            [ 6] 1450 	inc	sp
   0811 18 09         [12] 1451 	jr	00110$
   0813                    1452 00105$:
                           1453 ;src/Enemy.c:388: enemy_move(e, dirX);
   0813 7B            [ 4] 1454 	ld	a,e
   0814 F5            [11] 1455 	push	af
   0815 33            [ 6] 1456 	inc	sp
   0816 C5            [11] 1457 	push	bc
   0817 CDr63r05      [17] 1458 	call	_enemy_move
   081A F1            [10] 1459 	pop	af
   081B 33            [ 6] 1460 	inc	sp
   081C                    1461 00110$:
   081C DD F9         [10] 1462 	ld	sp, ix
   081E DD E1         [14] 1463 	pop	ix
   0820 C9            [10] 1464 	ret
                           1465 ;src/Enemy.c:394: void enemy_flee(Enemy* e) {
                           1466 ;	---------------------------------
                           1467 ; Function enemy_flee
                           1468 ; ---------------------------------
   0821                    1469 _enemy_flee::
   0821 DD E5         [15] 1470 	push	ix
   0823 DD 21 00 00   [14] 1471 	ld	ix,#0
   0827 DD 39         [15] 1472 	add	ix,sp
   0829 21 F9 FF      [10] 1473 	ld	hl,#-7
   082C 39            [11] 1474 	add	hl,sp
   082D F9            [ 6] 1475 	ld	sp,hl
                           1476 ;src/Enemy.c:398: distFromPlayX = abs(player_position.x - e->position.x);
   082E 3Ar00r00      [13] 1477 	ld	a,(#_player_position+0)
   0831 DD 77 FF      [19] 1478 	ld	-1 (ix),a
   0834 DD 4E 04      [19] 1479 	ld	c,4 (ix)
   0837 DD 46 05      [19] 1480 	ld	b,5 (ix)
   083A 59            [ 4] 1481 	ld	e, c
   083B 50            [ 4] 1482 	ld	d, b
   083C 13            [ 6] 1483 	inc	de
   083D 13            [ 6] 1484 	inc	de
   083E 13            [ 6] 1485 	inc	de
   083F 1A            [ 7] 1486 	ld	a,(de)
   0840 6F            [ 4] 1487 	ld	l,a
   0841 DD 7E FF      [19] 1488 	ld	a,-1 (ix)
   0844 95            [ 4] 1489 	sub	a, l
   0845 67            [ 4] 1490 	ld	h,a
   0846 C5            [11] 1491 	push	bc
   0847 D5            [11] 1492 	push	de
   0848 E5            [11] 1493 	push	hl
   0849 33            [ 6] 1494 	inc	sp
   084A CDr70r00      [17] 1495 	call	_abs
   084D 33            [ 6] 1496 	inc	sp
   084E D1            [10] 1497 	pop	de
   084F C1            [10] 1498 	pop	bc
   0850 DD 75 FA      [19] 1499 	ld	-6 (ix),l
                           1500 ;src/Enemy.c:399: distFromPlayY = abs(player_position.y - e->position.y);
   0853 3Ar01r00      [13] 1501 	ld	a,(#(_player_position + 0x0001) + 0)
   0856 DD 77 FF      [19] 1502 	ld	-1 (ix),a
   0859 21 04 00      [10] 1503 	ld	hl,#0x0004
   085C 09            [11] 1504 	add	hl,bc
   085D DD 75 FD      [19] 1505 	ld	-3 (ix),l
   0860 DD 74 FE      [19] 1506 	ld	-2 (ix),h
   0863 DD 6E FD      [19] 1507 	ld	l,-3 (ix)
   0866 DD 66 FE      [19] 1508 	ld	h,-2 (ix)
   0869 6E            [ 7] 1509 	ld	l,(hl)
   086A DD 7E FF      [19] 1510 	ld	a,-1 (ix)
   086D 95            [ 4] 1511 	sub	a, l
   086E 67            [ 4] 1512 	ld	h,a
   086F C5            [11] 1513 	push	bc
   0870 D5            [11] 1514 	push	de
   0871 E5            [11] 1515 	push	hl
   0872 33            [ 6] 1516 	inc	sp
   0873 CDr70r00      [17] 1517 	call	_abs
   0876 33            [ 6] 1518 	inc	sp
   0877 D1            [10] 1519 	pop	de
   0878 C1            [10] 1520 	pop	bc
                           1521 ;src/Enemy.c:401: if(distFromPlayX>distFromPlayY){//Flee X
   0879 7D            [ 4] 1522 	ld	a,l
   087A DD 96 FA      [19] 1523 	sub	a, -6 (ix)
   087D 30 16         [12] 1524 	jr	NC,00102$
                           1525 ;src/Enemy.c:402: fleeFromDir=(player_position.x<e->position.x)?MOVEMENT_EAST:MOVEMENT_WEST;
   087F 3Ar00r00      [13] 1526 	ld	a,(#_player_position + 0)
   0882 DD 77 FF      [19] 1527 	ld	-1 (ix),a
   0885 1A            [ 7] 1528 	ld	a,(de)
   0886 5F            [ 4] 1529 	ld	e,a
   0887 DD 7E FF      [19] 1530 	ld	a,-1 (ix)
   088A 93            [ 4] 1531 	sub	a, e
   088B 30 04         [12] 1532 	jr	NC,00120$
   088D 3E 00         [ 7] 1533 	ld	a,#0x00
   088F 18 19         [12] 1534 	jr	00103$
   0891                    1535 00120$:
   0891 3E 04         [ 7] 1536 	ld	a,#0x04
   0893 18 15         [12] 1537 	jr	00103$
   0895                    1538 00102$:
                           1539 ;src/Enemy.c:405: fleeFromDir=(player_position.y<e->position.y)?MOVEMENT_NORTH:MOVEMENT_SOUTH;
   0895 21r01r00      [10] 1540 	ld	hl, #(_player_position + 0x0001) + 0
   0898 5E            [ 7] 1541 	ld	e,(hl)
   0899 DD 6E FD      [19] 1542 	ld	l,-3 (ix)
   089C DD 66 FE      [19] 1543 	ld	h,-2 (ix)
   089F 56            [ 7] 1544 	ld	d,(hl)
   08A0 7B            [ 4] 1545 	ld	a,e
   08A1 92            [ 4] 1546 	sub	a, d
   08A2 30 04         [12] 1547 	jr	NC,00122$
   08A4 3E 02         [ 7] 1548 	ld	a,#0x02
   08A6 18 02         [12] 1549 	jr	00123$
   08A8                    1550 00122$:
   08A8 3E 06         [ 7] 1551 	ld	a,#0x06
   08AA                    1552 00123$:
   08AA                    1553 00103$:
                           1554 ;src/Enemy.c:408: df = (fleeFromDir+4)&7;
   08AA C6 04         [ 7] 1555 	add	a, #0x04
   08AC E6 07         [ 7] 1556 	and	a, #0x07
                           1557 ;src/Enemy.c:409: dl = (df+2)&7;
   08AE DD 77 FB      [19] 1558 	ld	-5 (ix), a
   08B1 C6 02         [ 7] 1559 	add	a, #0x02
   08B3 E6 07         [ 7] 1560 	and	a, #0x07
   08B5 DD 77 F9      [19] 1561 	ld	-7 (ix),a
                           1562 ;src/Enemy.c:410: dr = (df-2)&7;
   08B8 DD 7E FB      [19] 1563 	ld	a,-5 (ix)
   08BB C6 FE         [ 7] 1564 	add	a,#0xFE
   08BD E6 07         [ 7] 1565 	and	a, #0x07
   08BF 5F            [ 4] 1566 	ld	e,a
                           1567 ;src/Enemy.c:412: distf = enemy_get_distance_to_obstacle(e, df);
   08C0 C5            [11] 1568 	push	bc
   08C1 D5            [11] 1569 	push	de
   08C2 DD 7E FB      [19] 1570 	ld	a,-5 (ix)
   08C5 F5            [11] 1571 	push	af
   08C6 33            [ 6] 1572 	inc	sp
   08C7 C5            [11] 1573 	push	bc
   08C8 CDr99r04      [17] 1574 	call	_enemy_get_distance_to_obstacle
   08CB F1            [10] 1575 	pop	af
   08CC 33            [ 6] 1576 	inc	sp
   08CD D1            [10] 1577 	pop	de
   08CE C1            [10] 1578 	pop	bc
   08CF DD 75 FC      [19] 1579 	ld	-4 (ix),l
                           1580 ;src/Enemy.c:413: distl = enemy_get_distance_to_obstacle(e, dl);
   08D2 C5            [11] 1581 	push	bc
   08D3 D5            [11] 1582 	push	de
   08D4 DD 7E F9      [19] 1583 	ld	a,-7 (ix)
   08D7 F5            [11] 1584 	push	af
   08D8 33            [ 6] 1585 	inc	sp
   08D9 DD 6E 04      [19] 1586 	ld	l,4 (ix)
   08DC DD 66 05      [19] 1587 	ld	h,5 (ix)
   08DF E5            [11] 1588 	push	hl
   08E0 CDr99r04      [17] 1589 	call	_enemy_get_distance_to_obstacle
   08E3 F1            [10] 1590 	pop	af
   08E4 33            [ 6] 1591 	inc	sp
   08E5 D1            [10] 1592 	pop	de
   08E6 C1            [10] 1593 	pop	bc
                           1594 ;src/Enemy.c:414: distr = enemy_get_distance_to_obstacle(e, dr);
   08E7 E5            [11] 1595 	push	hl
   08E8 C5            [11] 1596 	push	bc
   08E9 D5            [11] 1597 	push	de
   08EA 7B            [ 4] 1598 	ld	a,e
   08EB F5            [11] 1599 	push	af
   08EC 33            [ 6] 1600 	inc	sp
   08ED DD 6E 04      [19] 1601 	ld	l,4 (ix)
   08F0 DD 66 05      [19] 1602 	ld	h,5 (ix)
   08F3 E5            [11] 1603 	push	hl
   08F4 CDr99r04      [17] 1604 	call	_enemy_get_distance_to_obstacle
   08F7 F1            [10] 1605 	pop	af
   08F8 33            [ 6] 1606 	inc	sp
   08F9 7D            [ 4] 1607 	ld	a,l
   08FA D1            [10] 1608 	pop	de
   08FB C1            [10] 1609 	pop	bc
   08FC E1            [10] 1610 	pop	hl
   08FD 57            [ 4] 1611 	ld	d,a
                           1612 ;src/Enemy.c:416: if(distf>distl && distf>distr){
   08FE 7D            [ 4] 1613 	ld	a,l
   08FF DD 96 FC      [19] 1614 	sub	a, -4 (ix)
   0902 30 0E         [12] 1615 	jr	NC,00113$
   0904 7A            [ 4] 1616 	ld	a,d
   0905 DD 96 FC      [19] 1617 	sub	a, -4 (ix)
   0908 30 08         [12] 1618 	jr	NC,00113$
                           1619 ;src/Enemy.c:417: d = df;
   090A DD 5E FB      [19] 1620 	ld	e,-5 (ix)
                           1621 ;src/Enemy.c:418: dist = distf;
   090D DD 6E FC      [19] 1622 	ld	l,-4 (ix)
   0910 18 22         [12] 1623 	jr	00114$
   0912                    1624 00113$:
                           1625 ;src/Enemy.c:420: else if(distl>distf && distl>distr){
   0912 DD 7E FC      [19] 1626 	ld	a,-4 (ix)
   0915 95            [ 4] 1627 	sub	a, l
   0916 30 09         [12] 1628 	jr	NC,00109$
   0918 7A            [ 4] 1629 	ld	a,d
   0919 95            [ 4] 1630 	sub	a, l
   091A 30 05         [12] 1631 	jr	NC,00109$
                           1632 ;src/Enemy.c:421: d=dl;
   091C DD 5E F9      [19] 1633 	ld	e,-7 (ix)
                           1634 ;src/Enemy.c:422: dist=distl;
   091F 18 13         [12] 1635 	jr	00114$
   0921                    1636 00109$:
                           1637 ;src/Enemy.c:424: else if(distr>distf && distr>distl){
   0921 DD 7E FC      [19] 1638 	ld	a,-4 (ix)
   0924 92            [ 4] 1639 	sub	a, d
   0925 30 07         [12] 1640 	jr	NC,00105$
   0927 7D            [ 4] 1641 	ld	a,l
   0928 92            [ 4] 1642 	sub	a, d
   0929 30 03         [12] 1643 	jr	NC,00105$
                           1644 ;src/Enemy.c:425: d=dr;
                           1645 ;src/Enemy.c:426: dist=distr;
   092B 6A            [ 4] 1646 	ld	l,d
   092C 18 06         [12] 1647 	jr	00114$
   092E                    1648 00105$:
                           1649 ;src/Enemy.c:429: d=df;
   092E DD 5E FB      [19] 1650 	ld	e,-5 (ix)
                           1651 ;src/Enemy.c:430: dist=distf;
   0931 DD 6E FC      [19] 1652 	ld	l,-4 (ix)
   0934                    1653 00114$:
                           1654 ;src/Enemy.c:433: if(dist){
   0934 7D            [ 4] 1655 	ld	a,l
   0935 B7            [ 4] 1656 	or	a, a
   0936 28 09         [12] 1657 	jr	Z,00118$
                           1658 ;src/Enemy.c:434: enemy_move(e,d);
   0938 7B            [ 4] 1659 	ld	a,e
   0939 F5            [11] 1660 	push	af
   093A 33            [ 6] 1661 	inc	sp
   093B C5            [11] 1662 	push	bc
   093C CDr63r05      [17] 1663 	call	_enemy_move
   093F F1            [10] 1664 	pop	af
   0940 33            [ 6] 1665 	inc	sp
   0941                    1666 00118$:
   0941 DD F9         [10] 1667 	ld	sp, ix
   0943 DD E1         [14] 1668 	pop	ix
   0945 C9            [10] 1669 	ret
                           1670 ;src/Enemy.c:439: void enemy_roam(Enemy* e) {
                           1671 ;	---------------------------------
                           1672 ; Function enemy_roam
                           1673 ; ---------------------------------
   0946                    1674 _enemy_roam::
   0946 DD E5         [15] 1675 	push	ix
   0948 DD 21 00 00   [14] 1676 	ld	ix,#0
   094C DD 39         [15] 1677 	add	ix,sp
   094E 21 F8 FF      [10] 1678 	ld	hl,#-8
   0951 39            [11] 1679 	add	hl,sp
   0952 F9            [ 6] 1680 	ld	sp,hl
                           1681 ;src/Enemy.c:440: u8 d, nd=0;
   0953 0E 00         [ 7] 1682 	ld	c,#0x00
                           1683 ;src/Enemy.c:444: d = e->direction;
   0955 DD 7E 04      [19] 1684 	ld	a,4 (ix)
   0958 DD 77 FE      [19] 1685 	ld	-2 (ix),a
   095B DD 7E 05      [19] 1686 	ld	a,5 (ix)
   095E DD 77 FF      [19] 1687 	ld	-1 (ix),a
   0961 DD 5E FE      [19] 1688 	ld	e,-2 (ix)
   0964 DD 56 FF      [19] 1689 	ld	d,-1 (ix)
   0967 13            [ 6] 1690 	inc	de
   0968 13            [ 6] 1691 	inc	de
   0969 1A            [ 7] 1692 	ld	a,(de)
   096A 47            [ 4] 1693 	ld	b,a
                           1694 ;src/Enemy.c:445: pos = &(e->position);
   096B DD 7E FE      [19] 1695 	ld	a,-2 (ix)
   096E C6 03         [ 7] 1696 	add	a, #0x03
   0970 DD 77 F8      [19] 1697 	ld	-8 (ix),a
   0973 DD 7E FF      [19] 1698 	ld	a,-1 (ix)
   0976 CE 00         [ 7] 1699 	adc	a, #0x00
   0978 DD 77 F9      [19] 1700 	ld	-7 (ix),a
                           1701 ;src/Enemy.c:447: if(!enemy_collision_at_dir(pos,d)){//If not wall nor enemy forward
   097B C5            [11] 1702 	push	bc
   097C D5            [11] 1703 	push	de
   097D C5            [11] 1704 	push	bc
   097E 33            [ 6] 1705 	inc	sp
   097F DD 6E F8      [19] 1706 	ld	l,-8 (ix)
   0982 DD 66 F9      [19] 1707 	ld	h,-7 (ix)
   0985 E5            [11] 1708 	push	hl
   0986 CDr16r04      [17] 1709 	call	_enemy_collision_at_dir
   0989 F1            [10] 1710 	pop	af
   098A 33            [ 6] 1711 	inc	sp
   098B D1            [10] 1712 	pop	de
   098C C1            [10] 1713 	pop	bc
   098D 7D            [ 4] 1714 	ld	a,l
   098E B7            [ 4] 1715 	or	a, a
   098F 20 07         [12] 1716 	jr	NZ,00102$
                           1717 ;src/Enemy.c:449: directions[nd]=d;
   0991 21 02 00      [10] 1718 	ld	hl,#0x0002
   0994 39            [11] 1719 	add	hl,sp
   0995 70            [ 7] 1720 	ld	(hl),b
                           1721 ;src/Enemy.c:450: ++nd;
   0996 0E 01         [ 7] 1722 	ld	c,#0x01
   0998                    1723 00102$:
                           1724 ;src/Enemy.c:454: d=((e->direction+2)&7);
   0998 1A            [ 7] 1725 	ld	a,(de)
   0999 C6 02         [ 7] 1726 	add	a, #0x02
   099B E6 07         [ 7] 1727 	and	a, #0x07
   099D 47            [ 4] 1728 	ld	b,a
                           1729 ;src/Enemy.c:456: if(!enemy_collision_at_dir(pos,d)){//If not wall nor enemy forward
   099E C5            [11] 1730 	push	bc
   099F D5            [11] 1731 	push	de
   09A0 C5            [11] 1732 	push	bc
   09A1 33            [ 6] 1733 	inc	sp
   09A2 DD 6E F8      [19] 1734 	ld	l,-8 (ix)
   09A5 DD 66 F9      [19] 1735 	ld	h,-7 (ix)
   09A8 E5            [11] 1736 	push	hl
   09A9 CDr16r04      [17] 1737 	call	_enemy_collision_at_dir
   09AC F1            [10] 1738 	pop	af
   09AD 33            [ 6] 1739 	inc	sp
   09AE D1            [10] 1740 	pop	de
   09AF C1            [10] 1741 	pop	bc
   09B0 7D            [ 4] 1742 	ld	a,l
   09B1 B7            [ 4] 1743 	or	a, a
   09B2 20 0D         [12] 1744 	jr	NZ,00104$
                           1745 ;src/Enemy.c:458: directions[nd]=d;
   09B4 21 02 00      [10] 1746 	ld	hl,#0x0002
   09B7 39            [11] 1747 	add	hl,sp
   09B8 7D            [ 4] 1748 	ld	a,l
   09B9 81            [ 4] 1749 	add	a, c
   09BA 6F            [ 4] 1750 	ld	l,a
   09BB 7C            [ 4] 1751 	ld	a,h
   09BC CE 00         [ 7] 1752 	adc	a, #0x00
   09BE 67            [ 4] 1753 	ld	h,a
   09BF 70            [ 7] 1754 	ld	(hl),b
                           1755 ;src/Enemy.c:459: ++nd;
   09C0 0C            [ 4] 1756 	inc	c
   09C1                    1757 00104$:
                           1758 ;src/Enemy.c:463: d=((e->direction-2)&7);
   09C1 1A            [ 7] 1759 	ld	a,(de)
   09C2 C6 FE         [ 7] 1760 	add	a,#0xFE
   09C4 E6 07         [ 7] 1761 	and	a, #0x07
   09C6 47            [ 4] 1762 	ld	b,a
                           1763 ;src/Enemy.c:465: if(!enemy_collision_at_dir(pos,d)){//If not wall nor enemy forward
   09C7 C5            [11] 1764 	push	bc
   09C8 D5            [11] 1765 	push	de
   09C9 C5            [11] 1766 	push	bc
   09CA 33            [ 6] 1767 	inc	sp
   09CB DD 6E F8      [19] 1768 	ld	l,-8 (ix)
   09CE DD 66 F9      [19] 1769 	ld	h,-7 (ix)
   09D1 E5            [11] 1770 	push	hl
   09D2 CDr16r04      [17] 1771 	call	_enemy_collision_at_dir
   09D5 F1            [10] 1772 	pop	af
   09D6 33            [ 6] 1773 	inc	sp
   09D7 D1            [10] 1774 	pop	de
   09D8 C1            [10] 1775 	pop	bc
   09D9 7D            [ 4] 1776 	ld	a,l
   09DA B7            [ 4] 1777 	or	a, a
   09DB 20 0D         [12] 1778 	jr	NZ,00106$
                           1779 ;src/Enemy.c:467: directions[nd]=d;
   09DD 21 02 00      [10] 1780 	ld	hl,#0x0002
   09E0 39            [11] 1781 	add	hl,sp
   09E1 7D            [ 4] 1782 	ld	a,l
   09E2 81            [ 4] 1783 	add	a, c
   09E3 6F            [ 4] 1784 	ld	l,a
   09E4 7C            [ 4] 1785 	ld	a,h
   09E5 CE 00         [ 7] 1786 	adc	a, #0x00
   09E7 67            [ 4] 1787 	ld	h,a
   09E8 70            [ 7] 1788 	ld	(hl),b
                           1789 ;src/Enemy.c:468: ++nd;
   09E9 0C            [ 4] 1790 	inc	c
   09EA                    1791 00106$:
                           1792 ;src/Enemy.c:472: if(nd==0){//If cannot move any other direction than back
   09EA 79            [ 4] 1793 	ld	a,c
   09EB B7            [ 4] 1794 	or	a, a
   09EC 20 1D         [12] 1795 	jr	NZ,00110$
                           1796 ;src/Enemy.c:474: d=((e->direction+4)&7);
   09EE 1A            [ 7] 1797 	ld	a,(de)
   09EF C6 04         [ 7] 1798 	add	a, #0x04
   09F1 E6 07         [ 7] 1799 	and	a, #0x07
   09F3 47            [ 4] 1800 	ld	b,a
                           1801 ;src/Enemy.c:476: if(!enemy_collision_at_dir(pos,d)){//If not wall nor enemy forward
   09F4 C5            [11] 1802 	push	bc
   09F5 C5            [11] 1803 	push	bc
   09F6 33            [ 6] 1804 	inc	sp
   09F7 DD 6E F8      [19] 1805 	ld	l,-8 (ix)
   09FA DD 66 F9      [19] 1806 	ld	h,-7 (ix)
   09FD E5            [11] 1807 	push	hl
   09FE CDr16r04      [17] 1808 	call	_enemy_collision_at_dir
   0A01 F1            [10] 1809 	pop	af
   0A02 33            [ 6] 1810 	inc	sp
   0A03 C1            [10] 1811 	pop	bc
   0A04 7D            [ 4] 1812 	ld	a,l
   0A05 B7            [ 4] 1813 	or	a, a
   0A06 20 1F         [12] 1814 	jr	NZ,00111$
                           1815 ;src/Enemy.c:478: ++nd;
   0A08 0C            [ 4] 1816 	inc	c
   0A09 18 1C         [12] 1817 	jr	00111$
   0A0B                    1818 00110$:
                           1819 ;src/Enemy.c:483: d=directions[cpct_getRandom_mxor_u8()%(nd)];
   0A0B 21 02 00      [10] 1820 	ld	hl,#0x0002
   0A0E 39            [11] 1821 	add	hl,sp
   0A0F E5            [11] 1822 	push	hl
   0A10 C5            [11] 1823 	push	bc
   0A11 CDr00r00      [17] 1824 	call	_cpct_getRandom_mxor_u8
   0A14 55            [ 4] 1825 	ld	d,l
   0A15 C1            [10] 1826 	pop	bc
   0A16 C5            [11] 1827 	push	bc
   0A17 79            [ 4] 1828 	ld	a,c
   0A18 F5            [11] 1829 	push	af
   0A19 33            [ 6] 1830 	inc	sp
   0A1A D5            [11] 1831 	push	de
   0A1B 33            [ 6] 1832 	inc	sp
   0A1C CDr00r00      [17] 1833 	call	__moduchar
   0A1F F1            [10] 1834 	pop	af
   0A20 5D            [ 4] 1835 	ld	e,l
   0A21 C1            [10] 1836 	pop	bc
   0A22 E1            [10] 1837 	pop	hl
   0A23 16 00         [ 7] 1838 	ld	d,#0x00
   0A25 19            [11] 1839 	add	hl,de
   0A26 46            [ 7] 1840 	ld	b,(hl)
   0A27                    1841 00111$:
                           1842 ;src/Enemy.c:486: if(nd){//If can move
   0A27 79            [ 4] 1843 	ld	a,c
   0A28 B7            [ 4] 1844 	or	a, a
   0A29 28 0E         [12] 1845 	jr	Z,00114$
                           1846 ;src/Enemy.c:487: enemy_move(e, d);
   0A2B C5            [11] 1847 	push	bc
   0A2C 33            [ 6] 1848 	inc	sp
   0A2D DD 6E FE      [19] 1849 	ld	l,-2 (ix)
   0A30 DD 66 FF      [19] 1850 	ld	h,-1 (ix)
   0A33 E5            [11] 1851 	push	hl
   0A34 CDr63r05      [17] 1852 	call	_enemy_move
   0A37 F1            [10] 1853 	pop	af
   0A38 33            [ 6] 1854 	inc	sp
   0A39                    1855 00114$:
   0A39 DD F9         [10] 1856 	ld	sp, ix
   0A3B DD E1         [14] 1857 	pop	ix
   0A3D C9            [10] 1858 	ret
                           1859 ;src/Enemy.c:491: void enemy_AI_passive(Enemy* e) {
                           1860 ;	---------------------------------
                           1861 ; Function enemy_AI_passive
                           1862 ; ---------------------------------
   0A3E                    1863 _enemy_AI_passive::
   0A3E DD E5         [15] 1864 	push	ix
   0A40 DD 21 00 00   [14] 1865 	ld	ix,#0
   0A44 DD 39         [15] 1866 	add	ix,sp
   0A46 F5            [11] 1867 	push	af
   0A47 3B            [ 6] 1868 	dec	sp
                           1869 ;src/Enemy.c:494: x = e->position.x;
   0A48 DD 4E 04      [19] 1870 	ld	c,4 (ix)
   0A4B DD 46 05      [19] 1871 	ld	b,5 (ix)
   0A4E C5            [11] 1872 	push	bc
   0A4F FD E1         [14] 1873 	pop	iy
   0A51 FD 7E 03      [19] 1874 	ld	a,3 (iy)
   0A54 DD 77 FE      [19] 1875 	ld	-2 (ix),a
                           1876 ;src/Enemy.c:495: y = e->position.y;
   0A57 69            [ 4] 1877 	ld	l, c
   0A58 60            [ 4] 1878 	ld	h, b
   0A59 11 04 00      [10] 1879 	ld	de, #0x0004
   0A5C 19            [11] 1880 	add	hl, de
   0A5D 5E            [ 7] 1881 	ld	e,(hl)
                           1882 ;src/Enemy.c:497: hp=e->hitPoints;
   0A5E C5            [11] 1883 	push	bc
   0A5F FD E1         [14] 1884 	pop	iy
   0A61 FD 7E 05      [19] 1885 	ld	a,5 (iy)
   0A64 DD 77 FD      [19] 1886 	ld	-3 (ix),a
                           1887 ;src/Enemy.c:499: if(dist(player_position.x, player_position.y, x,y)<ENEMY_VIEW_DISTANCE){
   0A67 21r01r00      [10] 1888 	ld	hl, #_player_position + 1
   0A6A 56            [ 7] 1889 	ld	d,(hl)
   0A6B 3Ar00r00      [13] 1890 	ld	a,(#_player_position + 0)
   0A6E DD 77 FF      [19] 1891 	ld	-1 (ix),a
   0A71 C5            [11] 1892 	push	bc
   0A72 7B            [ 4] 1893 	ld	a,e
   0A73 F5            [11] 1894 	push	af
   0A74 33            [ 6] 1895 	inc	sp
   0A75 DD 7E FE      [19] 1896 	ld	a,-2 (ix)
   0A78 F5            [11] 1897 	push	af
   0A79 33            [ 6] 1898 	inc	sp
   0A7A D5            [11] 1899 	push	de
   0A7B 33            [ 6] 1900 	inc	sp
   0A7C DD 7E FF      [19] 1901 	ld	a,-1 (ix)
   0A7F F5            [11] 1902 	push	af
   0A80 33            [ 6] 1903 	inc	sp
   0A81 CDr8Dr00      [17] 1904 	call	_dist
   0A84 F1            [10] 1905 	pop	af
   0A85 F1            [10] 1906 	pop	af
   0A86 C1            [10] 1907 	pop	bc
   0A87 7D            [ 4] 1908 	ld	a,l
   0A88 D6 06         [ 7] 1909 	sub	a, #0x06
   0A8A 30 39         [12] 1910 	jr	NC,00112$
                           1911 ;src/Enemy.c:500: if(enemy_can_view(e)){
   0A8C C5            [11] 1912 	push	bc
   0A8D C5            [11] 1913 	push	bc
   0A8E CDrBCr00      [17] 1914 	call	_enemy_can_view
   0A91 F1            [10] 1915 	pop	af
   0A92 C1            [10] 1916 	pop	bc
   0A93 7D            [ 4] 1917 	ld	a,l
   0A94 B7            [ 4] 1918 	or	a, a
   0A95 28 2E         [12] 1919 	jr	Z,00112$
                           1920 ;src/Enemy.c:501: if(hp < ENEMY_INITIAL_HP){//Aggresive
   0A97 DD 7E FD      [19] 1921 	ld	a,-3 (ix)
   0A9A D6 FF         [ 7] 1922 	sub	a, #0xFF
   0A9C 30 19         [12] 1923 	jr	NC,00107$
                           1924 ;src/Enemy.c:502: if(enemy_is_adjacent_to_player(e)){//Attack
   0A9E C5            [11] 1925 	push	bc
   0A9F C5            [11] 1926 	push	bc
   0AA0 CDr6Ar02      [17] 1927 	call	_enemy_is_adjacent_to_player
   0AA3 F1            [10] 1928 	pop	af
   0AA4 C1            [10] 1929 	pop	bc
   0AA5 7D            [ 4] 1930 	ld	a,l
   0AA6 B7            [ 4] 1931 	or	a, a
   0AA7 28 07         [12] 1932 	jr	Z,00102$
                           1933 ;src/Enemy.c:503: enemy_attack(e);
   0AA9 C5            [11] 1934 	push	bc
   0AAA CDrC0r06      [17] 1935 	call	_enemy_attack
   0AAD F1            [10] 1936 	pop	af
                           1937 ;src/Enemy.c:504: return;
   0AAE 18 1A         [12] 1938 	jr	00113$
   0AB0                    1939 00102$:
                           1940 ;src/Enemy.c:507: enemy_go_to_player(e);
   0AB0 C5            [11] 1941 	push	bc
   0AB1 CDr45r07      [17] 1942 	call	_enemy_go_to_player
   0AB4 F1            [10] 1943 	pop	af
                           1944 ;src/Enemy.c:508: return;
   0AB5 18 13         [12] 1945 	jr	00113$
   0AB7                    1946 00107$:
                           1947 ;src/Enemy.c:511: else if(hp < ENEMY_INITIAL_HP/4){ //Flee
   0AB7 DD 7E FD      [19] 1948 	ld	a,-3 (ix)
   0ABA D6 3F         [ 7] 1949 	sub	a, #0x3F
   0ABC 30 07         [12] 1950 	jr	NC,00112$
                           1951 ;src/Enemy.c:512: enemy_flee(e);
   0ABE C5            [11] 1952 	push	bc
   0ABF CDr21r08      [17] 1953 	call	_enemy_flee
   0AC2 F1            [10] 1954 	pop	af
                           1955 ;src/Enemy.c:513: return;
   0AC3 18 05         [12] 1956 	jr	00113$
   0AC5                    1957 00112$:
                           1958 ;src/Enemy.c:517: enemy_roam(e);   
   0AC5 C5            [11] 1959 	push	bc
   0AC6 CDr46r09      [17] 1960 	call	_enemy_roam
   0AC9 F1            [10] 1961 	pop	af
   0ACA                    1962 00113$:
   0ACA DD F9         [10] 1963 	ld	sp, ix
   0ACC DD E1         [14] 1964 	pop	ix
   0ACE C9            [10] 1965 	ret
                           1966 ;src/Enemy.c:520: void enemy_AI_aggressive(Enemy* e){
                           1967 ;	---------------------------------
                           1968 ; Function enemy_AI_aggressive
                           1969 ; ---------------------------------
   0ACF                    1970 _enemy_AI_aggressive::
   0ACF DD E5         [15] 1971 	push	ix
   0AD1 DD 21 00 00   [14] 1972 	ld	ix,#0
   0AD5 DD 39         [15] 1973 	add	ix,sp
   0AD7 F5            [11] 1974 	push	af
                           1975 ;src/Enemy.c:523: x = e->position.x;
   0AD8 DD 4E 04      [19] 1976 	ld	c,4 (ix)
   0ADB DD 46 05      [19] 1977 	ld	b,5 (ix)
   0ADE C5            [11] 1978 	push	bc
   0ADF FD E1         [14] 1979 	pop	iy
   0AE1 FD 7E 03      [19] 1980 	ld	a,3 (iy)
   0AE4 DD 77 FE      [19] 1981 	ld	-2 (ix),a
                           1982 ;src/Enemy.c:524: y = e->position.y;
   0AE7 C5            [11] 1983 	push	bc
   0AE8 FD E1         [14] 1984 	pop	iy
   0AEA FD 7E 04      [19] 1985 	ld	a,4 (iy)
   0AED DD 77 FF      [19] 1986 	ld	-1 (ix),a
                           1987 ;src/Enemy.c:526: if(dist(player_position.x, player_position.y, x,y)<ENEMY_VIEW_DISTANCE){
   0AF0 21r01r00      [10] 1988 	ld	hl, #_player_position + 1
   0AF3 56            [ 7] 1989 	ld	d,(hl)
   0AF4 21r00r00      [10] 1990 	ld	hl, #_player_position + 0
   0AF7 5E            [ 7] 1991 	ld	e,(hl)
   0AF8 C5            [11] 1992 	push	bc
   0AF9 DD 66 FF      [19] 1993 	ld	h,-1 (ix)
   0AFC DD 6E FE      [19] 1994 	ld	l,-2 (ix)
   0AFF E5            [11] 1995 	push	hl
   0B00 D5            [11] 1996 	push	de
   0B01 CDr8Dr00      [17] 1997 	call	_dist
   0B04 F1            [10] 1998 	pop	af
   0B05 F1            [10] 1999 	pop	af
   0B06 C1            [10] 2000 	pop	bc
   0B07 7D            [ 4] 2001 	ld	a,l
   0B08 D6 06         [ 7] 2002 	sub	a, #0x06
   0B0A 30 24         [12] 2003 	jr	NC,00107$
                           2004 ;src/Enemy.c:527: if(enemy_can_view(e)){
   0B0C C5            [11] 2005 	push	bc
   0B0D C5            [11] 2006 	push	bc
   0B0E CDrBCr00      [17] 2007 	call	_enemy_can_view
   0B11 F1            [10] 2008 	pop	af
   0B12 C1            [10] 2009 	pop	bc
   0B13 7D            [ 4] 2010 	ld	a,l
   0B14 B7            [ 4] 2011 	or	a, a
   0B15 28 19         [12] 2012 	jr	Z,00107$
                           2013 ;src/Enemy.c:528: if(enemy_is_adjacent_to_player(e)){//Attack
   0B17 C5            [11] 2014 	push	bc
   0B18 C5            [11] 2015 	push	bc
   0B19 CDr6Ar02      [17] 2016 	call	_enemy_is_adjacent_to_player
   0B1C F1            [10] 2017 	pop	af
   0B1D C1            [10] 2018 	pop	bc
   0B1E 7D            [ 4] 2019 	ld	a,l
   0B1F B7            [ 4] 2020 	or	a, a
   0B20 28 07         [12] 2021 	jr	Z,00102$
                           2022 ;src/Enemy.c:529: enemy_attack(e);
   0B22 C5            [11] 2023 	push	bc
   0B23 CDrC0r06      [17] 2024 	call	_enemy_attack
   0B26 F1            [10] 2025 	pop	af
                           2026 ;src/Enemy.c:530: return;
   0B27 18 0C         [12] 2027 	jr	00108$
   0B29                    2028 00102$:
                           2029 ;src/Enemy.c:533: enemy_go_to_player(e);
   0B29 C5            [11] 2030 	push	bc
   0B2A CDr45r07      [17] 2031 	call	_enemy_go_to_player
   0B2D F1            [10] 2032 	pop	af
                           2033 ;src/Enemy.c:534: return;
   0B2E 18 05         [12] 2034 	jr	00108$
   0B30                    2035 00107$:
                           2036 ;src/Enemy.c:538: enemy_roam(e);     
   0B30 C5            [11] 2037 	push	bc
   0B31 CDr46r09      [17] 2038 	call	_enemy_roam
   0B34 F1            [10] 2039 	pop	af
   0B35                    2040 00108$:
   0B35 DD F9         [10] 2041 	ld	sp, ix
   0B37 DD E1         [14] 2042 	pop	ix
   0B39 C9            [10] 2043 	ret
                           2044 ;src/Enemy.c:585: void enemy_update(){
                           2045 ;	---------------------------------
                           2046 ; Function enemy_update
                           2047 ; ---------------------------------
   0B3A                    2048 _enemy_update::
                           2049 ;src/Enemy.c:587: Enemy* enemy=enemyArray;
   0B3A 01r01r00      [10] 2050 	ld	bc,#_enemyArray+0
                           2051 ;src/Enemy.c:589: for(i;i;--i){
   0B3D 1E 0F         [ 7] 2052 	ld	e,#0x0F
   0B3F                    2053 00108$:
   0B3F 7B            [ 4] 2054 	ld	a,e
   0B40 B7            [ 4] 2055 	or	a, a
   0B41 C8            [11] 2056 	ret	Z
                           2057 ;src/Enemy.c:590: if(enemy->hitPoints){
   0B42 C5            [11] 2058 	push	bc
   0B43 FD E1         [14] 2059 	pop	iy
   0B45 FD 7E 05      [19] 2060 	ld	a,5 (iy)
   0B48 B7            [ 4] 2061 	or	a, a
   0B49 28 21         [12] 2062 	jr	Z,00105$
                           2063 ;src/Enemy.c:591: switch(enemy->type){
   0B4B 69            [ 4] 2064 	ld	l, c
   0B4C 60            [ 4] 2065 	ld	h, b
   0B4D 23            [ 6] 2066 	inc	hl
   0B4E 56            [ 7] 2067 	ld	d,(hl)
   0B4F 7A            [ 4] 2068 	ld	a,d
   0B50 B7            [ 4] 2069 	or	a, a
   0B51 28 05         [12] 2070 	jr	Z,00101$
   0B53 15            [ 4] 2071 	dec	d
   0B54 28 0D         [12] 2072 	jr	Z,00102$
   0B56 18 14         [12] 2073 	jr	00105$
                           2074 ;src/Enemy.c:592: case 0:{
   0B58                    2075 00101$:
                           2076 ;src/Enemy.c:593: enemy_AI_passive(enemy);
   0B58 C5            [11] 2077 	push	bc
   0B59 D5            [11] 2078 	push	de
   0B5A C5            [11] 2079 	push	bc
   0B5B CDr3Er0A      [17] 2080 	call	_enemy_AI_passive
   0B5E F1            [10] 2081 	pop	af
   0B5F D1            [10] 2082 	pop	de
   0B60 C1            [10] 2083 	pop	bc
                           2084 ;src/Enemy.c:594: break;
   0B61 18 09         [12] 2085 	jr	00105$
                           2086 ;src/Enemy.c:596: case 1:{
   0B63                    2087 00102$:
                           2088 ;src/Enemy.c:597: enemy_AI_aggressive(enemy);
   0B63 C5            [11] 2089 	push	bc
   0B64 D5            [11] 2090 	push	de
   0B65 C5            [11] 2091 	push	bc
   0B66 CDrCFr0A      [17] 2092 	call	_enemy_AI_aggressive
   0B69 F1            [10] 2093 	pop	af
   0B6A D1            [10] 2094 	pop	de
   0B6B C1            [10] 2095 	pop	bc
                           2096 ;src/Enemy.c:608: }
   0B6C                    2097 00105$:
                           2098 ;src/Enemy.c:610: ++enemy;
   0B6C 21 08 00      [10] 2099 	ld	hl,#0x0008
   0B6F 09            [11] 2100 	add	hl,bc
   0B70 4D            [ 4] 2101 	ld	c,l
   0B71 44            [ 4] 2102 	ld	b,h
                           2103 ;src/Enemy.c:589: for(i;i;--i){
   0B72 1D            [ 4] 2104 	dec	e
   0B73 18 CA         [12] 2105 	jr	00108$
                           2106 	.area _CODE
                           2107 	.area _INITIALIZER
                           2108 	.area _CABS (ABS)
