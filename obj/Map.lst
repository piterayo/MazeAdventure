                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.5.5 #9498 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module Map
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _generate_exit_door
                             12 	.globl _generate_map
                             13 	.globl _get_random_wall
                             14 	.globl _cpct_setSeed_lcg_u8
                             15 	.globl _cpct_getRandom_lcg_u8
                             16 	.globl _cpct_memset
                             17 	.globl _rand_seed
                             18 	.globl _init_generator
                             19 	.globl _generate_level
                             20 ;--------------------------------------------------------
                             21 ; special function registers
                             22 ;--------------------------------------------------------
                             23 ;--------------------------------------------------------
                             24 ; ram data
                             25 ;--------------------------------------------------------
                             26 	.area _DATA
                             27 ;--------------------------------------------------------
                             28 ; ram data
                             29 ;--------------------------------------------------------
                             30 	.area _INITIALIZED
                             31 ;--------------------------------------------------------
                             32 ; absolute external ram data
                             33 ;--------------------------------------------------------
                             34 	.area _DABS (ABS)
                             35 ;--------------------------------------------------------
                             36 ; global & static initialisations
                             37 ;--------------------------------------------------------
                             38 	.area _HOME
                             39 	.area _GSINIT
                             40 	.area _GSFINAL
                             41 	.area _GSINIT
                             42 ;--------------------------------------------------------
                             43 ; Home
                             44 ;--------------------------------------------------------
                             45 	.area _HOME
                             46 	.area _HOME
                             47 ;--------------------------------------------------------
                             48 ; code
                             49 ;--------------------------------------------------------
                             50 	.area _CODE
                             51 ;src/Map.c:10: void init_generator(){
                             52 ;	---------------------------------
                             53 ; Function init_generator
                             54 ; ---------------------------------
   0000                      55 _init_generator::
                             56 ;src/Map.c:11: cpct_setSeed_lcg_u8(rand_seed);
   0000 FD 21r0Ar00   [14]   57 	ld	iy,#_rand_seed
   0004 FD 6E 00      [19]   58 	ld	l,0 (iy)
   0007 C3r00r00      [10]   59 	jp  _cpct_setSeed_lcg_u8
   000A                      60 _rand_seed:
   000A 00                   61 	.db #0x00	; 0
                             62 ;src/Map.c:14: u8 get_random_wall(){
                             63 ;	---------------------------------
                             64 ; Function get_random_wall
                             65 ; ---------------------------------
   000B                      66 _get_random_wall::
                             67 ;src/Map.c:15: u8 cellType = cpct_getRandom_lcg_u8();
   000B CDr00r00      [17]   68 	call	_cpct_getRandom_lcg_u8
                             69 ;src/Map.c:16: if(cellType&1){
   000E CB 45         [ 8]   70 	bit	0, l
   0010 28 03         [12]   71 	jr	Z,00108$
                             72 ;src/Map.c:17: return CELLTYPE_WALL1;
   0012 2E 81         [ 7]   73 	ld	l,#0x81
   0014 C9            [10]   74 	ret
   0015                      75 00108$:
                             76 ;src/Map.c:20: if(cellType&3){
   0015 7D            [ 4]   77 	ld	a,l
   0016 E6 03         [ 7]   78 	and	a, #0x03
   0018 28 03         [12]   79 	jr	Z,00105$
                             80 ;src/Map.c:21: return CELLTYPE_WALL2;
   001A 2E 82         [ 7]   81 	ld	l,#0x82
   001C C9            [10]   82 	ret
   001D                      83 00105$:
                             84 ;src/Map.c:24: if(cellType&5){
   001D 7D            [ 4]   85 	ld	a,l
   001E E6 05         [ 7]   86 	and	a, #0x05
   0020 28 03         [12]   87 	jr	Z,00102$
                             88 ;src/Map.c:25: return CELLTYPE_WALL3;
   0022 2E 83         [ 7]   89 	ld	l,#0x83
   0024 C9            [10]   90 	ret
   0025                      91 00102$:
                             92 ;src/Map.c:28: return CELLTYPE_WALL4;  
   0025 2E 84         [ 7]   93 	ld	l,#0x84
   0027 C9            [10]   94 	ret
                             95 ;src/Map.c:34: void generate_map(){
                             96 ;	---------------------------------
                             97 ; Function generate_map
                             98 ; ---------------------------------
   0028                      99 _generate_map::
   0028 DD E5         [15]  100 	push	ix
   002A DD 21 00 00   [14]  101 	ld	ix,#0
   002E DD 39         [15]  102 	add	ix,sp
   0030 21 EB FF      [10]  103 	ld	hl,#-21
   0033 39            [11]  104 	add	hl,sp
   0034 F9            [ 6]  105 	ld	sp,hl
                            106 ;src/Map.c:37: u16 remainingCells = MAP_SIZE-(MAP_WIDTH*2)-((MAP_HEIGHT-2)*2)-1;
   0035 DD 36 F1 83   [19]  107 	ld	-15 (ix),#0x83
   0039 DD 36 F2 03   [19]  108 	ld	-14 (ix),#0x03
                            109 ;src/Map.c:43: u16 wallListCount = 0;
   003D DD 36 ED 00   [19]  110 	ld	-19 (ix),#0x00
   0041 DD 36 EE 00   [19]  111 	ld	-18 (ix),#0x00
                            112 ;src/Map.c:44: u16 lastStackItem = 0;
   0045 21 00 00      [10]  113 	ld	hl,#0x0000
   0048 E3            [19]  114 	ex	(sp), hl
                            115 ;src/Map.c:46: (*cellStack).x = (cpct_getRandom_lcg_u8()%(MAP_WIDTH-2))+1; //RANDOM
   0049 CDr00r00      [17]  116 	call	_cpct_getRandom_lcg_u8
   004C 45            [ 4]  117 	ld	b,l
   004D 3E 1E         [ 7]  118 	ld	a,#0x1E
   004F F5            [11]  119 	push	af
   0050 33            [ 6]  120 	inc	sp
   0051 C5            [11]  121 	push	bc
   0052 33            [ 6]  122 	inc	sp
   0053 CDr00r00      [17]  123 	call	__moduchar
   0056 F1            [10]  124 	pop	af
   0057 4D            [ 4]  125 	ld	c,l
   0058 0C            [ 4]  126 	inc	c
   0059 21 40 29      [10]  127 	ld	hl,#0x2940
   005C 71            [ 7]  128 	ld	(hl),c
                            129 ;src/Map.c:47: (*cellStack).y = (cpct_getRandom_lcg_u8()%(MAP_HEIGHT-2))+1; //RANDOM
   005D CDr00r00      [17]  130 	call	_cpct_getRandom_lcg_u8
   0060 45            [ 4]  131 	ld	b,l
   0061 3E 1E         [ 7]  132 	ld	a,#0x1E
   0063 F5            [11]  133 	push	af
   0064 33            [ 6]  134 	inc	sp
   0065 C5            [11]  135 	push	bc
   0066 33            [ 6]  136 	inc	sp
   0067 CDr00r00      [17]  137 	call	__moduchar
   006A F1            [10]  138 	pop	af
   006B 4D            [ 4]  139 	ld	c,l
   006C 0C            [ 4]  140 	inc	c
   006D 21 41 29      [10]  141 	ld	hl,#0x2941
   0070 71            [ 7]  142 	ld	(hl),c
                            143 ;src/Map.c:50: *(i8*)&(PLAYER_position.x) = (*cellStack).y;
   0071 DD 36 FBr00   [19]  144 	ld	-5 (ix),#<(_PLAYER_position)
   0075 DD 36 FCs00   [19]  145 	ld	-4 (ix),#>(_PLAYER_position)
   0079 2E 41         [ 7]  146 	ld	l, #0x41
   007B 7E            [ 7]  147 	ld	a,(hl)
   007C DD 77 FD      [19]  148 	ld	-3 (ix),a
   007F DD 6E FB      [19]  149 	ld	l,-5 (ix)
   0082 DD 66 FC      [19]  150 	ld	h,-4 (ix)
   0085 DD 7E FD      [19]  151 	ld	a,-3 (ix)
   0088 77            [ 7]  152 	ld	(hl),a
                            153 ;src/Map.c:51: *(i8*)&(PLAYER_position.y) = (*cellStack).x;
   0089 DD 36 FBr01   [19]  154 	ld	-5 (ix),#<((_PLAYER_position + 0x0001))
   008D DD 36 FCs00   [19]  155 	ld	-4 (ix),#>((_PLAYER_position + 0x0001))
   0091 21 40 29      [10]  156 	ld	hl,#0x2940
   0094 4E            [ 7]  157 	ld	c,(hl)
   0095 DD 6E FB      [19]  158 	ld	l,-5 (ix)
   0098 DD 66 FC      [19]  159 	ld	h,-4 (ix)
   009B 71            [ 7]  160 	ld	(hl),c
                            161 ;src/Map.c:53: cpct_memset (MAP_MEM,CELLTYPE_UNDEFINED,MAP_SIZE);
   009C 21 00 04      [10]  162 	ld	hl,#0x0400
   009F E5            [11]  163 	push	hl
   00A0 3E 87         [ 7]  164 	ld	a,#0x87
   00A2 F5            [11]  165 	push	af
   00A3 33            [ 6]  166 	inc	sp
   00A4 21 40 00      [10]  167 	ld	hl,#0x0040
   00A7 E5            [11]  168 	push	hl
   00A8 CDr00r00      [17]  169 	call	_cpct_memset
                            170 ;src/Map.c:55: map[(*cellStack).x][(*cellStack).y] = CELLTYPE_FLOOR;
   00AB 3A 40 29      [13]  171 	ld	a,(#0x2940)
   00AE DD 77 FD      [19]  172 	ld	-3 (ix), a
   00B1 DD 77 FB      [19]  173 	ld	-5 (ix),a
   00B4 DD 36 FC 00   [19]  174 	ld	-4 (ix),#0x00
   00B8 3E 06         [ 7]  175 	ld	a,#0x05+1
   00BA 18 08         [12]  176 	jr	00315$
   00BC                     177 00314$:
   00BC DD CB FB 26   [23]  178 	sla	-5 (ix)
   00C0 DD CB FC 16   [23]  179 	rl	-4 (ix)
   00C4                     180 00315$:
   00C4 3D            [ 4]  181 	dec	a
   00C5 20 F5         [12]  182 	jr	NZ,00314$
   00C7 DD 7E FB      [19]  183 	ld	a,-5 (ix)
   00CA C6 40         [ 7]  184 	add	a, #0x40
   00CC DD 77 FB      [19]  185 	ld	-5 (ix),a
   00CF DD 7E FC      [19]  186 	ld	a,-4 (ix)
   00D2 CE 00         [ 7]  187 	adc	a, #0x00
   00D4 DD 77 FC      [19]  188 	ld	-4 (ix),a
   00D7 21 41 29      [10]  189 	ld	hl,#0x2941
   00DA 4E            [ 7]  190 	ld	c,(hl)
   00DB DD 6E FB      [19]  191 	ld	l,-5 (ix)
   00DE DD 66 FC      [19]  192 	ld	h,-4 (ix)
   00E1 06 00         [ 7]  193 	ld	b,#0x00
   00E3 09            [11]  194 	add	hl, bc
   00E4 36 00         [10]  195 	ld	(hl),#0x00
                            196 ;src/Map.c:58: for(i=0;i<MAP_WIDTH;++i){
   00E6 DD 36 F3 00   [19]  197 	ld	-13 (ix),#0x00
   00EA                     198 00167$:
                            199 ;src/Map.c:59: map[0][i]=get_random_wall();
   00EA DD 7E F3      [19]  200 	ld	a,-13 (ix)
   00ED C6 40         [ 7]  201 	add	a, #0x40
   00EF DD 77 FB      [19]  202 	ld	-5 (ix),a
   00F2 3E 00         [ 7]  203 	ld	a,#0x00
   00F4 CE 00         [ 7]  204 	adc	a, #0x00
   00F6 DD 77 FC      [19]  205 	ld	-4 (ix),a
   00F9 CDr0Br00      [17]  206 	call	_get_random_wall
   00FC DD 75 FD      [19]  207 	ld	-3 (ix),l
   00FF DD 6E FB      [19]  208 	ld	l,-5 (ix)
   0102 DD 66 FC      [19]  209 	ld	h,-4 (ix)
   0105 DD 7E FD      [19]  210 	ld	a,-3 (ix)
   0108 77            [ 7]  211 	ld	(hl),a
                            212 ;src/Map.c:60: map[MAP_HEIGHT-1][i]=get_random_wall();
   0109 DD 7E F3      [19]  213 	ld	a,-13 (ix)
   010C C6 20         [ 7]  214 	add	a, #0x20
   010E DD 77 FB      [19]  215 	ld	-5 (ix),a
   0111 3E 00         [ 7]  216 	ld	a,#0x00
   0113 CE 04         [ 7]  217 	adc	a, #0x04
   0115 DD 77 FC      [19]  218 	ld	-4 (ix),a
   0118 CDr0Br00      [17]  219 	call	_get_random_wall
   011B 4D            [ 4]  220 	ld	c,l
   011C DD 6E FB      [19]  221 	ld	l,-5 (ix)
   011F DD 66 FC      [19]  222 	ld	h,-4 (ix)
   0122 71            [ 7]  223 	ld	(hl),c
                            224 ;src/Map.c:58: for(i=0;i<MAP_WIDTH;++i){
   0123 DD 34 F3      [23]  225 	inc	-13 (ix)
   0126 DD 7E F3      [19]  226 	ld	a,-13 (ix)
   0129 D6 20         [ 7]  227 	sub	a, #0x20
   012B 38 BD         [12]  228 	jr	C,00167$
                            229 ;src/Map.c:63: for(i=1;i<MAP_HEIGHT-1;++i){
   012D DD 36 F3 01   [19]  230 	ld	-13 (ix),#0x01
   0131                     231 00169$:
                            232 ;src/Map.c:64: map[i][0]=get_random_wall();
   0131 DD 7E F3      [19]  233 	ld	a,-13 (ix)
   0134 DD 77 FB      [19]  234 	ld	-5 (ix),a
   0137 DD 36 FC 00   [19]  235 	ld	-4 (ix),#0x00
   013B 3E 06         [ 7]  236 	ld	a,#0x05+1
   013D 18 08         [12]  237 	jr	00317$
   013F                     238 00316$:
   013F DD CB FB 26   [23]  239 	sla	-5 (ix)
   0143 DD CB FC 16   [23]  240 	rl	-4 (ix)
   0147                     241 00317$:
   0147 3D            [ 4]  242 	dec	a
   0148 20 F5         [12]  243 	jr	NZ,00316$
   014A DD 7E FB      [19]  244 	ld	a,-5 (ix)
   014D C6 40         [ 7]  245 	add	a, #0x40
   014F DD 77 FE      [19]  246 	ld	-2 (ix),a
   0152 DD 7E FC      [19]  247 	ld	a,-4 (ix)
   0155 CE 00         [ 7]  248 	adc	a, #0x00
   0157 DD 77 FF      [19]  249 	ld	-1 (ix),a
   015A CDr0Br00      [17]  250 	call	_get_random_wall
   015D DD 75 FD      [19]  251 	ld	-3 (ix),l
   0160 DD 6E FE      [19]  252 	ld	l,-2 (ix)
   0163 DD 66 FF      [19]  253 	ld	h,-1 (ix)
   0166 DD 7E FD      [19]  254 	ld	a,-3 (ix)
   0169 77            [ 7]  255 	ld	(hl),a
                            256 ;src/Map.c:65: map[i][MAP_WIDTH-1]=get_random_wall();
   016A DD 7E FB      [19]  257 	ld	a,-5 (ix)
   016D C6 40         [ 7]  258 	add	a, #0x40
   016F DD 77 FE      [19]  259 	ld	-2 (ix),a
   0172 DD 7E FC      [19]  260 	ld	a,-4 (ix)
   0175 CE 00         [ 7]  261 	adc	a, #0x00
   0177 DD 77 FF      [19]  262 	ld	-1 (ix),a
   017A DD 7E FE      [19]  263 	ld	a,-2 (ix)
   017D C6 1F         [ 7]  264 	add	a, #0x1F
   017F 4F            [ 4]  265 	ld	c,a
   0180 DD 7E FF      [19]  266 	ld	a,-1 (ix)
   0183 CE 00         [ 7]  267 	adc	a, #0x00
   0185 47            [ 4]  268 	ld	b,a
   0186 C5            [11]  269 	push	bc
   0187 CDr0Br00      [17]  270 	call	_get_random_wall
   018A 7D            [ 4]  271 	ld	a,l
   018B C1            [10]  272 	pop	bc
   018C 02            [ 7]  273 	ld	(bc),a
                            274 ;src/Map.c:63: for(i=1;i<MAP_HEIGHT-1;++i){
   018D DD 34 F3      [23]  275 	inc	-13 (ix)
   0190 DD 7E F3      [19]  276 	ld	a,-13 (ix)
   0193 D6 1F         [ 7]  277 	sub	a, #0x1F
   0195 38 9A         [12]  278 	jr	C,00169$
                            279 ;src/Map.c:68: while(remainingCells>0){
   0197 21 04 00      [10]  280 	ld	hl,#0x0004
   019A 39            [11]  281 	add	hl,sp
   019B DD 75 FE      [19]  282 	ld	-2 (ix),l
   019E DD 74 FF      [19]  283 	ld	-1 (ix),h
   01A1                     284 00164$:
   01A1 DD 7E F2      [19]  285 	ld	a,-14 (ix)
   01A4 DD B6 F1      [19]  286 	or	a,-15 (ix)
   01A7 CAr70r05      [10]  287 	jp	Z,00171$
                            288 ;src/Map.c:69: wallListPosition = wallList+wallListCount;
   01AA C1            [10]  289 	pop	bc
   01AB E1            [10]  290 	pop	hl
   01AC E5            [11]  291 	push	hl
   01AD C5            [11]  292 	push	bc
   01AE 29            [11]  293 	add	hl, hl
   01AF 7D            [ 4]  294 	ld	a,l
   01B0 C6 40         [ 7]  295 	add	a, #0x40
   01B2 DD 77 FB      [19]  296 	ld	-5 (ix),a
   01B5 7C            [ 4]  297 	ld	a,h
   01B6 CE 2D         [ 7]  298 	adc	a, #0x2D
   01B8 DD 77 FC      [19]  299 	ld	-4 (ix),a
                            300 ;src/Map.c:70: while(wallListCount<MAP_SIZE){
   01BB D1            [10]  301 	pop	de
   01BC C1            [10]  302 	pop	bc
   01BD C5            [11]  303 	push	bc
   01BE D5            [11]  304 	push	de
   01BF                     305 00134$:
                            306 ;src/Map.c:73: currentPos.y = (*wallListPosition).y;
   01BF DD 7E FE      [19]  307 	ld	a,-2 (ix)
   01C2 C6 01         [ 7]  308 	add	a, #0x01
   01C4 DD 77 F9      [19]  309 	ld	-7 (ix),a
   01C7 DD 7E FF      [19]  310 	ld	a,-1 (ix)
   01CA CE 00         [ 7]  311 	adc	a, #0x00
   01CC DD 77 FA      [19]  312 	ld	-6 (ix),a
                            313 ;src/Map.c:70: while(wallListCount<MAP_SIZE){
   01CF 78            [ 4]  314 	ld	a,b
   01D0 D6 04         [ 7]  315 	sub	a, #0x04
   01D2 D2r71r03      [10]  316 	jp	NC,00204$
                            317 ;src/Map.c:72: currentPos.x = (*wallListPosition).x;
   01D5 21 04 00      [10]  318 	ld	hl,#0x0004
   01D8 39            [11]  319 	add	hl,sp
   01D9 EB            [ 4]  320 	ex	de,hl
   01DA DD 6E FB      [19]  321 	ld	l,-5 (ix)
   01DD DD 66 FC      [19]  322 	ld	h,-4 (ix)
   01E0 7E            [ 7]  323 	ld	a,(hl)
   01E1 12            [ 7]  324 	ld	(de),a
                            325 ;src/Map.c:73: currentPos.y = (*wallListPosition).y;
   01E2 DD 5E FB      [19]  326 	ld	e,-5 (ix)
   01E5 DD 56 FC      [19]  327 	ld	d,-4 (ix)
   01E8 13            [ 6]  328 	inc	de
   01E9 1A            [ 7]  329 	ld	a,(de)
   01EA DD 6E F9      [19]  330 	ld	l,-7 (ix)
   01ED DD 66 FA      [19]  331 	ld	h,-6 (ix)
   01F0 77            [ 7]  332 	ld	(hl),a
                            333 ;src/Map.c:75: convertToFloor=0;
   01F1 DD 36 F4 00   [19]  334 	ld	-12 (ix),#0x00
                            335 ;src/Map.c:76: surroundedByWalls=1;
   01F5 DD 36 F5 01   [19]  336 	ld	-11 (ix),#0x01
                            337 ;src/Map.c:78: if(currentPos.x>0){
   01F9 DD 6E FE      [19]  338 	ld	l,-2 (ix)
   01FC DD 66 FF      [19]  339 	ld	h,-1 (ix)
   01FF 7E            [ 7]  340 	ld	a,(hl)
   0200 DD 77 FD      [19]  341 	ld	-3 (ix),a
                            342 ;src/Map.c:79: adjacentType = map[currentPos.x-1][currentPos.y];
   0203 DD 6E F9      [19]  343 	ld	l,-7 (ix)
   0206 DD 66 FA      [19]  344 	ld	h,-6 (ix)
   0209 7E            [ 7]  345 	ld	a,(hl)
   020A DD 77 F6      [19]  346 	ld	-10 (ix),a
   020D DD 7E FD      [19]  347 	ld	a,-3 (ix)
   0210 DD 77 F7      [19]  348 	ld	-9 (ix),a
   0213 DD 36 F8 00   [19]  349 	ld	-8 (ix),#0x00
                            350 ;src/Map.c:78: if(currentPos.x>0){
   0217 DD 7E FD      [19]  351 	ld	a,-3 (ix)
   021A B7            [ 4]  352 	or	a, a
   021B 28 2F         [12]  353 	jr	Z,00109$
                            354 ;src/Map.c:79: adjacentType = map[currentPos.x-1][currentPos.y];
   021D DD 6E F7      [19]  355 	ld	l,-9 (ix)
   0220 DD 66 F8      [19]  356 	ld	h,-8 (ix)
   0223 2B            [ 6]  357 	dec	hl
   0224 29            [11]  358 	add	hl, hl
   0225 29            [11]  359 	add	hl, hl
   0226 29            [11]  360 	add	hl, hl
   0227 29            [11]  361 	add	hl, hl
   0228 29            [11]  362 	add	hl, hl
   0229 D5            [11]  363 	push	de
   022A 11 40 00      [10]  364 	ld	de,#0x0040
   022D 19            [11]  365 	add	hl, de
   022E D1            [10]  366 	pop	de
   022F 7D            [ 4]  367 	ld	a,l
   0230 DD 86 F6      [19]  368 	add	a, -10 (ix)
   0233 6F            [ 4]  369 	ld	l,a
   0234 7C            [ 4]  370 	ld	a,h
   0235 CE 00         [ 7]  371 	adc	a, #0x00
   0237 67            [ 4]  372 	ld	h,a
   0238 6E            [ 7]  373 	ld	l,(hl)
                            374 ;src/Map.c:80: if(adjacentType == CELLTYPE_UNDEFINED){
   0239 7D            [ 4]  375 	ld	a,l
   023A D6 87         [ 7]  376 	sub	a, #0x87
   023C 20 06         [12]  377 	jr	NZ,00106$
                            378 ;src/Map.c:81: convertToFloor  = 1;
   023E DD 36 F4 01   [19]  379 	ld	-12 (ix),#0x01
   0242 18 08         [12]  380 	jr	00109$
   0244                     381 00106$:
                            382 ;src/Map.c:83: else if(adjacentType == CELLTYPE_FLOOR){
   0244 7D            [ 4]  383 	ld	a,l
   0245 B7            [ 4]  384 	or	a, a
   0246 20 04         [12]  385 	jr	NZ,00109$
                            386 ;src/Map.c:84: surroundedByWalls = 0;
   0248 DD 36 F5 00   [19]  387 	ld	-11 (ix),#0x00
   024C                     388 00109$:
                            389 ;src/Map.c:87: if(currentPos.x < (MAP_WIDTH-1)){
   024C DD 7E FD      [19]  390 	ld	a,-3 (ix)
   024F D6 1F         [ 7]  391 	sub	a, #0x1F
   0251 30 2F         [12]  392 	jr	NC,00116$
                            393 ;src/Map.c:89: adjacentType = map[currentPos.x+1][currentPos.y];
   0253 DD 6E F7      [19]  394 	ld	l,-9 (ix)
   0256 DD 66 F8      [19]  395 	ld	h,-8 (ix)
   0259 23            [ 6]  396 	inc	hl
   025A 29            [11]  397 	add	hl, hl
   025B 29            [11]  398 	add	hl, hl
   025C 29            [11]  399 	add	hl, hl
   025D 29            [11]  400 	add	hl, hl
   025E 29            [11]  401 	add	hl, hl
   025F D5            [11]  402 	push	de
   0260 11 40 00      [10]  403 	ld	de,#0x0040
   0263 19            [11]  404 	add	hl, de
   0264 D1            [10]  405 	pop	de
   0265 7D            [ 4]  406 	ld	a,l
   0266 DD 86 F6      [19]  407 	add	a, -10 (ix)
   0269 6F            [ 4]  408 	ld	l,a
   026A 7C            [ 4]  409 	ld	a,h
   026B CE 00         [ 7]  410 	adc	a, #0x00
   026D 67            [ 4]  411 	ld	h,a
   026E 6E            [ 7]  412 	ld	l,(hl)
                            413 ;src/Map.c:90: if(adjacentType == CELLTYPE_UNDEFINED){
   026F 7D            [ 4]  414 	ld	a,l
   0270 D6 87         [ 7]  415 	sub	a, #0x87
   0272 20 06         [12]  416 	jr	NZ,00113$
                            417 ;src/Map.c:91: convertToFloor  = 1;
   0274 DD 36 F4 01   [19]  418 	ld	-12 (ix),#0x01
   0278 18 08         [12]  419 	jr	00116$
   027A                     420 00113$:
                            421 ;src/Map.c:93: else if(adjacentType == CELLTYPE_FLOOR){
   027A 7D            [ 4]  422 	ld	a,l
   027B B7            [ 4]  423 	or	a, a
   027C 20 04         [12]  424 	jr	NZ,00116$
                            425 ;src/Map.c:94: surroundedByWalls = 0;
   027E DD 36 F5 00   [19]  426 	ld	-11 (ix),#0x00
   0282                     427 00116$:
                            428 ;src/Map.c:99: adjacentType = map[currentPos.x][currentPos.y-1];
   0282 DD 6E F7      [19]  429 	ld	l,-9 (ix)
   0285 DD 66 F8      [19]  430 	ld	h,-8 (ix)
   0288 29            [11]  431 	add	hl, hl
   0289 29            [11]  432 	add	hl, hl
   028A 29            [11]  433 	add	hl, hl
   028B 29            [11]  434 	add	hl, hl
   028C 29            [11]  435 	add	hl, hl
   028D 7D            [ 4]  436 	ld	a,l
   028E C6 40         [ 7]  437 	add	a, #0x40
   0290 DD 77 F7      [19]  438 	ld	-9 (ix),a
   0293 7C            [ 4]  439 	ld	a,h
   0294 CE 00         [ 7]  440 	adc	a, #0x00
   0296 DD 77 F8      [19]  441 	ld	-8 (ix),a
                            442 ;src/Map.c:97: if(currentPos.y > 0){
   0299 DD 7E F6      [19]  443 	ld	a,-10 (ix)
   029C B7            [ 4]  444 	or	a, a
   029D 28 23         [12]  445 	jr	Z,00123$
                            446 ;src/Map.c:99: adjacentType = map[currentPos.x][currentPos.y-1];
   029F DD 6E F6      [19]  447 	ld	l,-10 (ix)
   02A2 2D            [ 4]  448 	dec	l
   02A3 DD 7E F7      [19]  449 	ld	a,-9 (ix)
   02A6 85            [ 4]  450 	add	a, l
   02A7 6F            [ 4]  451 	ld	l,a
   02A8 DD 7E F8      [19]  452 	ld	a,-8 (ix)
   02AB CE 00         [ 7]  453 	adc	a, #0x00
   02AD 67            [ 4]  454 	ld	h,a
   02AE 6E            [ 7]  455 	ld	l,(hl)
                            456 ;src/Map.c:100: if(adjacentType == CELLTYPE_UNDEFINED){
   02AF 7D            [ 4]  457 	ld	a,l
   02B0 D6 87         [ 7]  458 	sub	a, #0x87
   02B2 20 06         [12]  459 	jr	NZ,00120$
                            460 ;src/Map.c:101: convertToFloor  = 1;
   02B4 DD 36 F4 01   [19]  461 	ld	-12 (ix),#0x01
   02B8 18 08         [12]  462 	jr	00123$
   02BA                     463 00120$:
                            464 ;src/Map.c:103: else if(adjacentType == CELLTYPE_FLOOR){
   02BA 7D            [ 4]  465 	ld	a,l
   02BB B7            [ 4]  466 	or	a, a
   02BC 20 04         [12]  467 	jr	NZ,00123$
                            468 ;src/Map.c:104: surroundedByWalls = 0;
   02BE DD 36 F5 00   [19]  469 	ld	-11 (ix),#0x00
   02C2                     470 00123$:
                            471 ;src/Map.c:107: if(currentPos.y < (MAP_HEIGHT-1)){
   02C2 DD 7E F6      [19]  472 	ld	a,-10 (ix)
   02C5 D6 1F         [ 7]  473 	sub	a, #0x1F
   02C7 30 23         [12]  474 	jr	NC,00130$
                            475 ;src/Map.c:109: adjacentType = map[currentPos.x][currentPos.y+1];
   02C9 DD 6E F6      [19]  476 	ld	l,-10 (ix)
   02CC 2C            [ 4]  477 	inc	l
   02CD DD 7E F7      [19]  478 	ld	a,-9 (ix)
   02D0 85            [ 4]  479 	add	a, l
   02D1 6F            [ 4]  480 	ld	l,a
   02D2 DD 7E F8      [19]  481 	ld	a,-8 (ix)
   02D5 CE 00         [ 7]  482 	adc	a, #0x00
   02D7 67            [ 4]  483 	ld	h,a
   02D8 6E            [ 7]  484 	ld	l,(hl)
                            485 ;src/Map.c:110: if(adjacentType == CELLTYPE_UNDEFINED){
   02D9 7D            [ 4]  486 	ld	a,l
   02DA D6 87         [ 7]  487 	sub	a, #0x87
   02DC 20 06         [12]  488 	jr	NZ,00127$
                            489 ;src/Map.c:111: convertToFloor  = 1;
   02DE DD 36 F4 01   [19]  490 	ld	-12 (ix),#0x01
   02E2 18 08         [12]  491 	jr	00130$
   02E4                     492 00127$:
                            493 ;src/Map.c:113: else if(adjacentType == CELLTYPE_FLOOR){
   02E4 7D            [ 4]  494 	ld	a,l
   02E5 B7            [ 4]  495 	or	a, a
   02E6 20 04         [12]  496 	jr	NZ,00130$
                            497 ;src/Map.c:114: surroundedByWalls = 0;
   02E8 DD 36 F5 00   [19]  498 	ld	-11 (ix),#0x00
   02EC                     499 00130$:
                            500 ;src/Map.c:118: (*wallListPosition).x = (*(wallList+wallListCount)).x;
   02EC 69            [ 4]  501 	ld	l, c
   02ED 60            [ 4]  502 	ld	h, b
   02EE 29            [11]  503 	add	hl, hl
   02EF FD 21 40 2D   [14]  504 	ld	iy,#0x2D40
   02F3 C5            [11]  505 	push	bc
   02F4 4D            [ 4]  506 	ld	c, l
   02F5 44            [ 4]  507 	ld	b, h
   02F6 FD 09         [15]  508 	add	iy, bc
   02F8 C1            [10]  509 	pop	bc
   02F9 FD 7E 00      [19]  510 	ld	a, 0 (iy)
   02FC DD 6E FB      [19]  511 	ld	l,-5 (ix)
   02FF DD 66 FC      [19]  512 	ld	h,-4 (ix)
   0302 77            [ 7]  513 	ld	(hl),a
                            514 ;src/Map.c:119: (*wallListPosition).y = (*(wallList+wallListCount)).y;
   0303 FD E5         [15]  515 	push	iy
   0305 E1            [10]  516 	pop	hl
   0306 23            [ 6]  517 	inc	hl
   0307 7E            [ 7]  518 	ld	a,(hl)
   0308 12            [ 7]  519 	ld	(de),a
                            520 ;src/Map.c:120: --wallListCount;
   0309 0B            [ 6]  521 	dec	bc
   030A DD 71 ED      [19]  522 	ld	-19 (ix),c
   030D DD 70 EE      [19]  523 	ld	-18 (ix),b
                            524 ;src/Map.c:123: if((convertToFloor)&&(!surroundedByWalls)){
   0310 DD 7E F4      [19]  525 	ld	a,-12 (ix)
   0313 B7            [ 4]  526 	or	a, a
   0314 28 4A         [12]  527 	jr	Z,00132$
   0316 DD 7E F5      [19]  528 	ld	a,-11 (ix)
   0319 B7            [ 4]  529 	or	a, a
   031A 20 44         [12]  530 	jr	NZ,00132$
                            531 ;src/Map.c:124: map[currentPos.x][currentPos.y] = CELLTYPE_FLOOR;
   031C DD 6E FE      [19]  532 	ld	l,-2 (ix)
   031F DD 66 FF      [19]  533 	ld	h,-1 (ix)
   0322 6E            [ 7]  534 	ld	l,(hl)
   0323 26 00         [ 7]  535 	ld	h,#0x00
   0325 29            [11]  536 	add	hl, hl
   0326 29            [11]  537 	add	hl, hl
   0327 29            [11]  538 	add	hl, hl
   0328 29            [11]  539 	add	hl, hl
   0329 29            [11]  540 	add	hl, hl
   032A 01 40 00      [10]  541 	ld	bc,#0x0040
   032D 09            [11]  542 	add	hl,bc
   032E 4D            [ 4]  543 	ld	c,l
   032F 44            [ 4]  544 	ld	b,h
   0330 DD 6E F9      [19]  545 	ld	l,-7 (ix)
   0333 DD 66 FA      [19]  546 	ld	h,-6 (ix)
   0336 6E            [ 7]  547 	ld	l, (hl)
   0337 26 00         [ 7]  548 	ld	h,#0x00
   0339 09            [11]  549 	add	hl,bc
   033A 36 00         [10]  550 	ld	(hl),#0x00
                            551 ;src/Map.c:126: ++lastStackItem;
   033C DD 34 EB      [23]  552 	inc	-21 (ix)
   033F 20 03         [12]  553 	jr	NZ,00326$
   0341 DD 34 EC      [23]  554 	inc	-20 (ix)
   0344                     555 00326$:
                            556 ;src/Map.c:127: (*(cellStack+lastStackItem)).x = currentPos.x;
   0344 E1            [10]  557 	pop	hl
   0345 E5            [11]  558 	push	hl
   0346 29            [11]  559 	add	hl, hl
   0347 01 40 29      [10]  560 	ld	bc, #0x2940
   034A 09            [11]  561 	add	hl,bc
   034B 4D            [ 4]  562 	ld	c, l
   034C 44            [ 4]  563 	ld	b, h
   034D DD 6E FE      [19]  564 	ld	l,-2 (ix)
   0350 DD 66 FF      [19]  565 	ld	h,-1 (ix)
   0353 7E            [ 7]  566 	ld	a,(hl)
   0354 02            [ 7]  567 	ld	(bc),a
                            568 ;src/Map.c:128: (*(cellStack+lastStackItem)).y = currentPos.y;
   0355 03            [ 6]  569 	inc	bc
   0356 DD 6E F9      [19]  570 	ld	l,-7 (ix)
   0359 DD 66 FA      [19]  571 	ld	h,-6 (ix)
   035C 7E            [ 7]  572 	ld	a,(hl)
   035D 02            [ 7]  573 	ld	(bc),a
                            574 ;src/Map.c:131: break;
   035E 18 11         [12]  575 	jr	00204$
   0360                     576 00132$:
                            577 ;src/Map.c:133: --wallListPosition;
   0360 DD 6E FB      [19]  578 	ld	l,-5 (ix)
   0363 DD 66 FC      [19]  579 	ld	h,-4 (ix)
   0366 2B            [ 6]  580 	dec	hl
   0367 2B            [ 6]  581 	dec	hl
   0368 DD 75 FB      [19]  582 	ld	-5 (ix),l
   036B DD 74 FC      [19]  583 	ld	-4 (ix),h
   036E C3rBFr01      [10]  584 	jp	00134$
                            585 ;src/Map.c:135: while(lastStackItem<MAP_SIZE){
   0371                     586 00204$:
   0371 DD 7E F1      [19]  587 	ld	a,-15 (ix)
   0374 DD 77 F7      [19]  588 	ld	-9 (ix),a
   0377 DD 7E F2      [19]  589 	ld	a,-14 (ix)
   037A DD 77 F8      [19]  590 	ld	-8 (ix),a
   037D DD 7E ED      [19]  591 	ld	a,-19 (ix)
   0380 DD 77 FB      [19]  592 	ld	-5 (ix),a
   0383 DD 7E EE      [19]  593 	ld	a,-18 (ix)
   0386 DD 77 FC      [19]  594 	ld	-4 (ix),a
   0389                     595 00161$:
   0389 DD 7E EC      [19]  596 	ld	a,-20 (ix)
   038C D6 04         [ 7]  597 	sub	a, #0x04
   038E D2rA1r01      [10]  598 	jp	NC,00164$
                            599 ;src/Map.c:136: currentPos.x=(*(lastStackItem+cellStack)).x;
   0391 21 04 00      [10]  600 	ld	hl,#0x0004
   0394 39            [11]  601 	add	hl,sp
   0395 4D            [ 4]  602 	ld	c,l
   0396 44            [ 4]  603 	ld	b,h
   0397 E1            [10]  604 	pop	hl
   0398 E5            [11]  605 	push	hl
   0399 29            [11]  606 	add	hl, hl
   039A FD 21 40 29   [14]  607 	ld	iy,#0x2940
   039E EB            [ 4]  608 	ex	de,hl
   039F FD 19         [15]  609 	add	iy, de
   03A1 FD 7E 00      [19]  610 	ld	a, 0 (iy)
   03A4 02            [ 7]  611 	ld	(bc),a
                            612 ;src/Map.c:137: currentPos.y=(*(lastStackItem+cellStack)).y;
   03A5 FD 4E 01      [19]  613 	ld	c,1 (iy)
   03A8 DD 6E F9      [19]  614 	ld	l,-7 (ix)
   03AB DD 66 FA      [19]  615 	ld	h,-6 (ix)
   03AE 71            [ 7]  616 	ld	(hl),c
                            617 ;src/Map.c:138: --lastStackItem;
   03AF E1            [10]  618 	pop	hl
   03B0 E5            [11]  619 	push	hl
   03B1 2B            [ 6]  620 	dec	hl
   03B2 E3            [19]  621 	ex	(sp), hl
                            622 ;src/Map.c:139: cellType = map[currentPos.x][currentPos.y];
   03B3 DD 6E FE      [19]  623 	ld	l,-2 (ix)
   03B6 DD 66 FF      [19]  624 	ld	h,-1 (ix)
   03B9 6E            [ 7]  625 	ld	l,(hl)
   03BA 26 00         [ 7]  626 	ld	h,#0x00
   03BC 29            [11]  627 	add	hl, hl
   03BD 29            [11]  628 	add	hl, hl
   03BE 29            [11]  629 	add	hl, hl
   03BF 29            [11]  630 	add	hl, hl
   03C0 29            [11]  631 	add	hl, hl
   03C1 11 40 00      [10]  632 	ld	de,#0x0040
   03C4 19            [11]  633 	add	hl,de
   03C5 59            [ 4]  634 	ld	e,c
   03C6 16 00         [ 7]  635 	ld	d,#0x00
   03C8 19            [11]  636 	add	hl,de
   03C9 4E            [ 7]  637 	ld	c,(hl)
                            638 ;src/Map.c:141: if(cellType == CELLTYPE_UNDEFINED){
   03CA 79            [ 4]  639 	ld	a,c
   03CB D6 87         [ 7]  640 	sub	a, #0x87
   03CD 20 47         [12]  641 	jr	NZ,00141$
                            642 ;src/Map.c:143: if(cpct_getRandom_lcg_u8()&1){//WALL
   03CF CDr00r00      [17]  643 	call	_cpct_getRandom_lcg_u8
   03D2 CB 45         [ 8]  644 	bit	0, l
   03D4 28 06         [12]  645 	jr	Z,00138$
                            646 ;src/Map.c:144: cellType = get_random_wall();
   03D6 CDr0Br00      [17]  647 	call	_get_random_wall
   03D9 4D            [ 4]  648 	ld	c,l
   03DA 18 02         [12]  649 	jr	00139$
   03DC                     650 00138$:
                            651 ;src/Map.c:147: cellType = CELLTYPE_FLOOR;
   03DC 0E 00         [ 7]  652 	ld	c,#0x00
   03DE                     653 00139$:
                            654 ;src/Map.c:149: map[currentPos.x][currentPos.y]=cellType;
   03DE DD 6E FE      [19]  655 	ld	l,-2 (ix)
   03E1 DD 66 FF      [19]  656 	ld	h,-1 (ix)
   03E4 6E            [ 7]  657 	ld	l,(hl)
   03E5 26 00         [ 7]  658 	ld	h,#0x00
   03E7 29            [11]  659 	add	hl, hl
   03E8 29            [11]  660 	add	hl, hl
   03E9 29            [11]  661 	add	hl, hl
   03EA 29            [11]  662 	add	hl, hl
   03EB 29            [11]  663 	add	hl, hl
   03EC EB            [ 4]  664 	ex	de,hl
   03ED 21 40 00      [10]  665 	ld	hl,#0x0040
   03F0 19            [11]  666 	add	hl,de
   03F1 EB            [ 4]  667 	ex	de,hl
   03F2 DD 6E F9      [19]  668 	ld	l,-7 (ix)
   03F5 DD 66 FA      [19]  669 	ld	h,-6 (ix)
   03F8 6E            [ 7]  670 	ld	l, (hl)
   03F9 26 00         [ 7]  671 	ld	h,#0x00
   03FB 19            [11]  672 	add	hl,de
   03FC 71            [ 7]  673 	ld	(hl),c
                            674 ;src/Map.c:150: --remainingCells;
   03FD DD 6E F7      [19]  675 	ld	l,-9 (ix)
   0400 DD 66 F8      [19]  676 	ld	h,-8 (ix)
   0403 2B            [ 6]  677 	dec	hl
   0404 DD 75 F7      [19]  678 	ld	-9 (ix),l
   0407 DD 74 F8      [19]  679 	ld	-8 (ix),h
   040A DD 7E F7      [19]  680 	ld	a,-9 (ix)
   040D DD 77 F1      [19]  681 	ld	-15 (ix),a
   0410 DD 7E F8      [19]  682 	ld	a,-8 (ix)
   0413 DD 77 F2      [19]  683 	ld	-14 (ix),a
   0416                     684 00141$:
                            685 ;src/Map.c:78: if(currentPos.x>0){
   0416 DD 6E FE      [19]  686 	ld	l,-2 (ix)
   0419 DD 66 FF      [19]  687 	ld	h,-1 (ix)
   041C 7E            [ 7]  688 	ld	a,(hl)
   041D DD 77 F6      [19]  689 	ld	-10 (ix),a
                            690 ;src/Map.c:153: if((cellType == CELLTYPE_FLOOR)){
   0420 79            [ 4]  691 	ld	a,c
   0421 B7            [ 4]  692 	or	a, a
   0422 C2r3Fr05      [10]  693 	jp	NZ,00159$
                            694 ;src/Map.c:154: if(currentPos.x>0){
   0425 DD 7E F6      [19]  695 	ld	a,-10 (ix)
   0428 B7            [ 4]  696 	or	a, a
   0429 28 3F         [12]  697 	jr	Z,00145$
                            698 ;src/Map.c:155: adjacentType = map[currentPos.x-1][currentPos.y];
   042B DD 6E F6      [19]  699 	ld	l,-10 (ix)
   042E 26 00         [ 7]  700 	ld	h,#0x00
   0430 2B            [ 6]  701 	dec	hl
   0431 29            [11]  702 	add	hl, hl
   0432 29            [11]  703 	add	hl, hl
   0433 29            [11]  704 	add	hl, hl
   0434 29            [11]  705 	add	hl, hl
   0435 29            [11]  706 	add	hl, hl
   0436 01 40 00      [10]  707 	ld	bc,#0x0040
   0439 09            [11]  708 	add	hl,bc
   043A 4D            [ 4]  709 	ld	c,l
   043B 44            [ 4]  710 	ld	b,h
   043C DD 6E F9      [19]  711 	ld	l,-7 (ix)
   043F DD 66 FA      [19]  712 	ld	h,-6 (ix)
   0442 6E            [ 7]  713 	ld	l, (hl)
   0443 26 00         [ 7]  714 	ld	h,#0x00
   0445 09            [11]  715 	add	hl,bc
   0446 7E            [ 7]  716 	ld	a,(hl)
                            717 ;src/Map.c:156: if(adjacentType == CELLTYPE_UNDEFINED){
   0447 D6 87         [ 7]  718 	sub	a, #0x87
   0449 20 1F         [12]  719 	jr	NZ,00145$
                            720 ;src/Map.c:158: ++lastStackItem;
   044B DD 34 EB      [23]  721 	inc	-21 (ix)
   044E 20 03         [12]  722 	jr	NZ,00332$
   0450 DD 34 EC      [23]  723 	inc	-20 (ix)
   0453                     724 00332$:
                            725 ;src/Map.c:159: (*(cellStack+lastStackItem)).x = currentPos.x-1;
   0453 E1            [10]  726 	pop	hl
   0454 E5            [11]  727 	push	hl
   0455 29            [11]  728 	add	hl, hl
   0456 01 40 29      [10]  729 	ld	bc,#0x2940
   0459 09            [11]  730 	add	hl,bc
   045A DD 4E F6      [19]  731 	ld	c,-10 (ix)
   045D 0D            [ 4]  732 	dec	c
   045E 71            [ 7]  733 	ld	(hl),c
                            734 ;src/Map.c:160: (*(cellStack+lastStackItem)).y = currentPos.y;
   045F 23            [ 6]  735 	inc	hl
   0460 4D            [ 4]  736 	ld	c,l
   0461 44            [ 4]  737 	ld	b,h
   0462 DD 6E F9      [19]  738 	ld	l,-7 (ix)
   0465 DD 66 FA      [19]  739 	ld	h,-6 (ix)
   0468 7E            [ 7]  740 	ld	a,(hl)
   0469 02            [ 7]  741 	ld	(bc),a
   046A                     742 00145$:
                            743 ;src/Map.c:164: if(currentPos.x < (MAP_WIDTH-1)){
   046A DD 6E FE      [19]  744 	ld	l,-2 (ix)
   046D DD 66 FF      [19]  745 	ld	h,-1 (ix)
   0470 4E            [ 7]  746 	ld	c,(hl)
   0471 79            [ 4]  747 	ld	a,c
   0472 D6 1F         [ 7]  748 	sub	a, #0x1F
   0474 30 3A         [12]  749 	jr	NC,00149$
                            750 ;src/Map.c:166: adjacentType = map[currentPos.x+1][currentPos.y];
   0476 69            [ 4]  751 	ld	l,c
   0477 26 00         [ 7]  752 	ld	h,#0x00
   0479 23            [ 6]  753 	inc	hl
   047A 29            [11]  754 	add	hl, hl
   047B 29            [11]  755 	add	hl, hl
   047C 29            [11]  756 	add	hl, hl
   047D 29            [11]  757 	add	hl, hl
   047E 29            [11]  758 	add	hl, hl
   047F EB            [ 4]  759 	ex	de,hl
   0480 21 40 00      [10]  760 	ld	hl,#0x0040
   0483 19            [11]  761 	add	hl,de
   0484 EB            [ 4]  762 	ex	de,hl
   0485 DD 6E F9      [19]  763 	ld	l,-7 (ix)
   0488 DD 66 FA      [19]  764 	ld	h,-6 (ix)
   048B 6E            [ 7]  765 	ld	l, (hl)
   048C 26 00         [ 7]  766 	ld	h,#0x00
   048E 19            [11]  767 	add	hl,de
   048F 7E            [ 7]  768 	ld	a,(hl)
                            769 ;src/Map.c:167: if(adjacentType == CELLTYPE_UNDEFINED){
   0490 D6 87         [ 7]  770 	sub	a, #0x87
   0492 20 1C         [12]  771 	jr	NZ,00149$
                            772 ;src/Map.c:170: ++lastStackItem;
   0494 DD 34 EB      [23]  773 	inc	-21 (ix)
   0497 20 03         [12]  774 	jr	NZ,00335$
   0499 DD 34 EC      [23]  775 	inc	-20 (ix)
   049C                     776 00335$:
                            777 ;src/Map.c:171: (*(cellStack+lastStackItem)).x = currentPos.x+1;
   049C E1            [10]  778 	pop	hl
   049D E5            [11]  779 	push	hl
   049E 29            [11]  780 	add	hl, hl
   049F 11 40 29      [10]  781 	ld	de,#0x2940
   04A2 19            [11]  782 	add	hl,de
   04A3 0C            [ 4]  783 	inc	c
   04A4 71            [ 7]  784 	ld	(hl),c
                            785 ;src/Map.c:172: (*(cellStack+lastStackItem)).y = currentPos.y;
   04A5 23            [ 6]  786 	inc	hl
   04A6 4D            [ 4]  787 	ld	c,l
   04A7 44            [ 4]  788 	ld	b,h
   04A8 DD 6E F9      [19]  789 	ld	l,-7 (ix)
   04AB DD 66 FA      [19]  790 	ld	h,-6 (ix)
   04AE 7E            [ 7]  791 	ld	a,(hl)
   04AF 02            [ 7]  792 	ld	(bc),a
   04B0                     793 00149$:
                            794 ;src/Map.c:79: adjacentType = map[currentPos.x-1][currentPos.y];
   04B0 DD 6E F9      [19]  795 	ld	l,-7 (ix)
   04B3 DD 66 FA      [19]  796 	ld	h,-6 (ix)
   04B6 4E            [ 7]  797 	ld	c,(hl)
                            798 ;src/Map.c:176: if(currentPos.y > 0){
   04B7 79            [ 4]  799 	ld	a,c
   04B8 B7            [ 4]  800 	or	a, a
   04B9 28 3A         [12]  801 	jr	Z,00153$
                            802 ;src/Map.c:178: adjacentType = map[currentPos.x][currentPos.y-1];
   04BB DD 6E FE      [19]  803 	ld	l,-2 (ix)
   04BE DD 66 FF      [19]  804 	ld	h,-1 (ix)
   04C1 46            [ 7]  805 	ld	b,(hl)
   04C2 68            [ 4]  806 	ld	l,b
   04C3 26 00         [ 7]  807 	ld	h,#0x00
   04C5 29            [11]  808 	add	hl, hl
   04C6 29            [11]  809 	add	hl, hl
   04C7 29            [11]  810 	add	hl, hl
   04C8 29            [11]  811 	add	hl, hl
   04C9 29            [11]  812 	add	hl, hl
   04CA 11 40 00      [10]  813 	ld	de,#0x0040
   04CD 19            [11]  814 	add	hl,de
   04CE 0D            [ 4]  815 	dec	c
   04CF 59            [ 4]  816 	ld	e,c
   04D0 16 00         [ 7]  817 	ld	d,#0x00
   04D2 19            [11]  818 	add	hl,de
   04D3 7E            [ 7]  819 	ld	a,(hl)
                            820 ;src/Map.c:179: if(adjacentType == CELLTYPE_UNDEFINED){
   04D4 D6 87         [ 7]  821 	sub	a, #0x87
   04D6 20 1D         [12]  822 	jr	NZ,00153$
                            823 ;src/Map.c:182: ++lastStackItem;
   04D8 DD 34 EB      [23]  824 	inc	-21 (ix)
   04DB 20 03         [12]  825 	jr	NZ,00338$
   04DD DD 34 EC      [23]  826 	inc	-20 (ix)
   04E0                     827 00338$:
                            828 ;src/Map.c:183: (*(cellStack+lastStackItem)).x = currentPos.x;
   04E0 E1            [10]  829 	pop	hl
   04E1 E5            [11]  830 	push	hl
   04E2 29            [11]  831 	add	hl, hl
   04E3 11 40 29      [10]  832 	ld	de,#0x2940
   04E6 19            [11]  833 	add	hl,de
   04E7 70            [ 7]  834 	ld	(hl),b
                            835 ;src/Map.c:184: (*(cellStack+lastStackItem)).y = currentPos.y-1;
   04E8 23            [ 6]  836 	inc	hl
   04E9 4D            [ 4]  837 	ld	c,l
   04EA 44            [ 4]  838 	ld	b,h
   04EB DD 6E F9      [19]  839 	ld	l,-7 (ix)
   04EE DD 66 FA      [19]  840 	ld	h,-6 (ix)
   04F1 5E            [ 7]  841 	ld	e,(hl)
   04F2 1D            [ 4]  842 	dec	e
   04F3 7B            [ 4]  843 	ld	a,e
   04F4 02            [ 7]  844 	ld	(bc),a
   04F5                     845 00153$:
                            846 ;src/Map.c:79: adjacentType = map[currentPos.x-1][currentPos.y];
   04F5 DD 6E F9      [19]  847 	ld	l,-7 (ix)
   04F8 DD 66 FA      [19]  848 	ld	h,-6 (ix)
   04FB 46            [ 7]  849 	ld	b,(hl)
                            850 ;src/Map.c:188: if(currentPos.y < (MAP_HEIGHT-1)){
   04FC 78            [ 4]  851 	ld	a,b
   04FD D6 1F         [ 7]  852 	sub	a, #0x1F
   04FF D2r89r03      [10]  853 	jp	NC,00161$
                            854 ;src/Map.c:190: adjacentType = map[currentPos.x][currentPos.y+1];
   0502 DD 6E FE      [19]  855 	ld	l,-2 (ix)
   0505 DD 66 FF      [19]  856 	ld	h,-1 (ix)
   0508 4E            [ 7]  857 	ld	c,(hl)
   0509 69            [ 4]  858 	ld	l,c
   050A 26 00         [ 7]  859 	ld	h,#0x00
   050C 29            [11]  860 	add	hl, hl
   050D 29            [11]  861 	add	hl, hl
   050E 29            [11]  862 	add	hl, hl
   050F 29            [11]  863 	add	hl, hl
   0510 29            [11]  864 	add	hl, hl
   0511 11 40 00      [10]  865 	ld	de,#0x0040
   0514 19            [11]  866 	add	hl,de
   0515 04            [ 4]  867 	inc	b
   0516 58            [ 4]  868 	ld	e,b
   0517 16 00         [ 7]  869 	ld	d,#0x00
   0519 19            [11]  870 	add	hl,de
   051A 7E            [ 7]  871 	ld	a,(hl)
                            872 ;src/Map.c:191: if(adjacentType == CELLTYPE_UNDEFINED){
   051B D6 87         [ 7]  873 	sub	a, #0x87
   051D C2r89r03      [10]  874 	jp	NZ,00161$
                            875 ;src/Map.c:194: ++lastStackItem;
   0520 DD 34 EB      [23]  876 	inc	-21 (ix)
   0523 20 03         [12]  877 	jr	NZ,00341$
   0525 DD 34 EC      [23]  878 	inc	-20 (ix)
   0528                     879 00341$:
                            880 ;src/Map.c:195: (*(cellStack+lastStackItem)).x = currentPos.x;
   0528 E1            [10]  881 	pop	hl
   0529 E5            [11]  882 	push	hl
   052A 29            [11]  883 	add	hl, hl
   052B 11 40 29      [10]  884 	ld	de,#0x2940
   052E 19            [11]  885 	add	hl,de
   052F 71            [ 7]  886 	ld	(hl),c
                            887 ;src/Map.c:196: (*(cellStack+lastStackItem)).y = currentPos.y+1;
   0530 23            [ 6]  888 	inc	hl
   0531 4D            [ 4]  889 	ld	c,l
   0532 44            [ 4]  890 	ld	b,h
   0533 DD 6E F9      [19]  891 	ld	l,-7 (ix)
   0536 DD 66 FA      [19]  892 	ld	h,-6 (ix)
   0539 7E            [ 7]  893 	ld	a,(hl)
   053A 3C            [ 4]  894 	inc	a
   053B 02            [ 7]  895 	ld	(bc),a
   053C C3r89r03      [10]  896 	jp	00161$
   053F                     897 00159$:
                            898 ;src/Map.c:202: ++wallListCount;
   053F DD 34 FB      [23]  899 	inc	-5 (ix)
   0542 20 03         [12]  900 	jr	NZ,00342$
   0544 DD 34 FC      [23]  901 	inc	-4 (ix)
   0547                     902 00342$:
   0547 DD 7E FB      [19]  903 	ld	a,-5 (ix)
   054A DD 77 ED      [19]  904 	ld	-19 (ix),a
   054D DD 7E FC      [19]  905 	ld	a,-4 (ix)
   0550 DD 77 EE      [19]  906 	ld	-18 (ix),a
                            907 ;src/Map.c:203: (*(wallList+wallListCount)).x = currentPos.x;
   0553 DD 6E FB      [19]  908 	ld	l,-5 (ix)
   0556 DD 66 FC      [19]  909 	ld	h,-4 (ix)
   0559 29            [11]  910 	add	hl, hl
   055A 01 40 2D      [10]  911 	ld	bc,#0x2D40
   055D 09            [11]  912 	add	hl,bc
   055E DD 7E F6      [19]  913 	ld	a,-10 (ix)
   0561 77            [ 7]  914 	ld	(hl),a
                            915 ;src/Map.c:204: (*(wallList+wallListCount)).y = currentPos.y;
   0562 23            [ 6]  916 	inc	hl
   0563 4D            [ 4]  917 	ld	c,l
   0564 44            [ 4]  918 	ld	b,h
   0565 DD 6E F9      [19]  919 	ld	l,-7 (ix)
   0568 DD 66 FA      [19]  920 	ld	h,-6 (ix)
   056B 7E            [ 7]  921 	ld	a,(hl)
   056C 02            [ 7]  922 	ld	(bc),a
   056D C3r89r03      [10]  923 	jp	00161$
   0570                     924 00171$:
   0570 DD F9         [10]  925 	ld	sp, ix
   0572 DD E1         [14]  926 	pop	ix
   0574 C9            [10]  927 	ret
                            928 ;src/Map.c:210: void generate_exit_door(){
                            929 ;	---------------------------------
                            930 ; Function generate_exit_door
                            931 ; ---------------------------------
   0575                     932 _generate_exit_door::
   0575 DD E5         [15]  933 	push	ix
   0577 DD 21 00 00   [14]  934 	ld	ix,#0
   057B DD 39         [15]  935 	add	ix,sp
   057D 21 F4 FF      [10]  936 	ld	hl,#-12
   0580 39            [11]  937 	add	hl,sp
   0581 F9            [ 6]  938 	ld	sp,hl
                            939 ;src/Map.c:211: u8 x=(cpct_getRandom_lcg_u8()%32);
   0582 CDr00r00      [17]  940 	call	_cpct_getRandom_lcg_u8
   0585 7D            [ 4]  941 	ld	a,l
   0586 E6 1F         [ 7]  942 	and	a, #0x1F
   0588 4F            [ 4]  943 	ld	c,a
                            944 ;src/Map.c:212: u8 y=(cpct_getRandom_lcg_u8()%32);
   0589 C5            [11]  945 	push	bc
   058A CDr00r00      [17]  946 	call	_cpct_getRandom_lcg_u8
   058D C1            [10]  947 	pop	bc
   058E 7D            [ 4]  948 	ld	a,l
   058F E6 1F         [ 7]  949 	and	a, #0x1F
   0591 5F            [ 4]  950 	ld	e,a
                            951 ;src/Map.c:213: u8 door_not_positioned=1;
   0592 DD 36 F4 01   [19]  952 	ld	-12 (ix),#0x01
                            953 ;src/Map.c:220: u8* position = (u8*)(MAP_MEM + x + MAP_WIDTH*y);
   0596 06 00         [ 7]  954 	ld	b,#0x00
   0598 21 40 00      [10]  955 	ld	hl,#0x0040
   059B 09            [11]  956 	add	hl,bc
   059C 4D            [ 4]  957 	ld	c,l
   059D 44            [ 4]  958 	ld	b,h
   059E 6B            [ 4]  959 	ld	l,e
   059F 26 00         [ 7]  960 	ld	h,#0x00
   05A1 29            [11]  961 	add	hl, hl
   05A2 29            [11]  962 	add	hl, hl
   05A3 29            [11]  963 	add	hl, hl
   05A4 29            [11]  964 	add	hl, hl
   05A5 29            [11]  965 	add	hl, hl
   05A6 09            [11]  966 	add	hl,bc
   05A7 4D            [ 4]  967 	ld	c,l
   05A8 44            [ 4]  968 	ld	b,h
                            969 ;src/Map.c:225: lastVal = (position-1);
   05A9 59            [ 4]  970 	ld	e,c
   05AA 50            [ 4]  971 	ld	d,b
   05AB 1B            [ 6]  972 	dec	de
                            973 ;src/Map.c:226: nextVal = (position+1);
   05AC 21 01 00      [10]  974 	ld	hl,#0x0001
   05AF 09            [11]  975 	add	hl,bc
   05B0 DD 75 F7      [19]  976 	ld	-9 (ix),l
   05B3 DD 74 F8      [19]  977 	ld	-8 (ix),h
                            978 ;src/Map.c:227: topVal = (position-MAP_WIDTH);
   05B6 79            [ 4]  979 	ld	a,c
   05B7 C6 E0         [ 7]  980 	add	a,#0xE0
   05B9 DD 77 F5      [19]  981 	ld	-11 (ix),a
   05BC 78            [ 4]  982 	ld	a,b
   05BD CE FF         [ 7]  983 	adc	a,#0xFF
   05BF DD 77 F6      [19]  984 	ld	-10 (ix),a
                            985 ;src/Map.c:228: bottomVal = (position+MAP_WIDTH);
   05C2 FD 21 20 00   [14]  986 	ld	iy,#0x0020
   05C6 FD 09         [15]  987 	add	iy, bc
                            988 ;src/Map.c:230: while(door_not_positioned){
   05C8                     989 00138$:
   05C8 DD 7E F4      [19]  990 	ld	a,-12 (ix)
   05CB B7            [ 4]  991 	or	a, a
   05CC CAr21r07      [10]  992 	jp	Z,00141$
                            993 ;src/Map.c:231: if((*position)!=CELLTYPE_FLOOR){
   05CF 0A            [ 7]  994 	ld	a,(bc)
   05D0 B7            [ 4]  995 	or	a, a
   05D1 CArE2r06      [10]  996 	jp	Z,00135$
                            997 ;src/Map.c:232: if((((*lastVal)!=CELLTYPE_FLOOR) || (lastVal<MAP_MEM) )&& (((*nextVal)!=CELLTYPE_FLOOR)||(nextVal>=END_OF_MAP_MEM))){
   05D4 1A            [ 7]  998 	ld	a,(de)
   05D5 DD 77 FF      [19]  999 	ld	-1 (ix),a
   05D8 7B            [ 4] 1000 	ld	a,e
   05D9 D6 40         [ 7] 1001 	sub	a, #0x40
   05DB 7A            [ 4] 1002 	ld	a,d
   05DC DE 00         [ 7] 1003 	sbc	a, #0x00
   05DE 3E 00         [ 7] 1004 	ld	a,#0x00
   05E0 17            [ 4] 1005 	rla
   05E1 DD 77 FE      [19] 1006 	ld	-2 (ix),a
   05E4 DD 7E F7      [19] 1007 	ld	a,-9 (ix)
   05E7 DD 77 FC      [19] 1008 	ld	-4 (ix),a
   05EA DD 7E F8      [19] 1009 	ld	a,-8 (ix)
   05ED DD 77 FD      [19] 1010 	ld	-3 (ix),a
                           1011 ;src/Map.c:233: if((((*topVal)!=CELLTYPE_FLOOR)||(topVal<MAP_MEM)) && (((*bottomVal)==CELLTYPE_FLOOR)&&(bottomVal<END_OF_MAP_MEM))){
   05F0 DD 6E F5      [19] 1012 	ld	l,-11 (ix)
   05F3 DD 66 F6      [19] 1013 	ld	h,-10 (ix)
   05F6 7E            [ 7] 1014 	ld	a,(hl)
   05F7 DD 77 FB      [19] 1015 	ld	-5 (ix),a
   05FA DD 7E F5      [19] 1016 	ld	a,-11 (ix)
   05FD D6 40         [ 7] 1017 	sub	a, #0x40
   05FF DD 7E F6      [19] 1018 	ld	a,-10 (ix)
   0602 DE 00         [ 7] 1019 	sbc	a, #0x00
   0604 3E 00         [ 7] 1020 	ld	a,#0x00
   0606 17            [ 4] 1021 	rla
   0607 DD 77 FA      [19] 1022 	ld	-6 (ix),a
   060A FD E5         [15] 1023 	push	iy
   060C E1            [10] 1024 	pop	hl
                           1025 ;src/Map.c:232: if((((*lastVal)!=CELLTYPE_FLOOR) || (lastVal<MAP_MEM) )&& (((*nextVal)!=CELLTYPE_FLOOR)||(nextVal>=END_OF_MAP_MEM))){
   060D DD 7E FC      [19] 1026 	ld	a,-4 (ix)
   0610 D6 40         [ 7] 1027 	sub	a, #0x40
   0612 DD 7E FD      [19] 1028 	ld	a,-3 (ix)
   0615 DE 04         [ 7] 1029 	sbc	a, #0x04
   0617 3E 00         [ 7] 1030 	ld	a,#0x00
   0619 17            [ 4] 1031 	rla
   061A DD 77 FC      [19] 1032 	ld	-4 (ix),a
                           1033 ;src/Map.c:233: if((((*topVal)!=CELLTYPE_FLOOR)||(topVal<MAP_MEM)) && (((*bottomVal)==CELLTYPE_FLOOR)&&(bottomVal<END_OF_MAP_MEM))){
   061D 7D            [ 4] 1034 	ld	a,l
   061E D6 40         [ 7] 1035 	sub	a, #0x40
   0620 7C            [ 4] 1036 	ld	a,h
   0621 DE 04         [ 7] 1037 	sbc	a, #0x04
   0623 3E 00         [ 7] 1038 	ld	a,#0x00
   0625 17            [ 4] 1039 	rla
   0626 DD 77 F9      [19] 1040 	ld	-7 (ix),a
                           1041 ;src/Map.c:232: if((((*lastVal)!=CELLTYPE_FLOOR) || (lastVal<MAP_MEM) )&& (((*nextVal)!=CELLTYPE_FLOOR)||(nextVal>=END_OF_MAP_MEM))){
   0629 DD 7E FF      [19] 1042 	ld	a,-1 (ix)
   062C B7            [ 4] 1043 	or	a, a
   062D 20 06         [12] 1044 	jr	NZ,00133$
   062F DD 7E FE      [19] 1045 	ld	a,-2 (ix)
   0632 B7            [ 4] 1046 	or	a, a
   0633 28 52         [12] 1047 	jr	Z,00129$
   0635                    1048 00133$:
   0635 DD 6E F7      [19] 1049 	ld	l,-9 (ix)
   0638 DD 66 F8      [19] 1050 	ld	h,-8 (ix)
   063B 7E            [ 7] 1051 	ld	a,(hl)
   063C B7            [ 4] 1052 	or	a, a
   063D 20 06         [12] 1053 	jr	NZ,00128$
   063F DD CB FC 46   [20] 1054 	bit	0,-4 (ix)
   0643 20 42         [12] 1055 	jr	NZ,00129$
   0645                    1056 00128$:
                           1057 ;src/Map.c:233: if((((*topVal)!=CELLTYPE_FLOOR)||(topVal<MAP_MEM)) && (((*bottomVal)==CELLTYPE_FLOOR)&&(bottomVal<END_OF_MAP_MEM))){
   0645 FD 6E 00      [19] 1058 	ld	l, 0 (iy)
   0648 DD 7E FB      [19] 1059 	ld	a,-5 (ix)
   064B B7            [ 4] 1060 	or	a, a
   064C 20 06         [12] 1061 	jr	NZ,00111$
   064E DD 7E FA      [19] 1062 	ld	a,-6 (ix)
   0651 B7            [ 4] 1063 	or	a, a
   0652 28 14         [12] 1064 	jr	Z,00107$
   0654                    1065 00111$:
   0654 7D            [ 4] 1066 	ld	a,l
   0655 B7            [ 4] 1067 	or	a, a
   0656 20 10         [12] 1068 	jr	NZ,00107$
   0658 DD 7E F9      [19] 1069 	ld	a,-7 (ix)
   065B B7            [ 4] 1070 	or	a, a
   065C 28 0A         [12] 1071 	jr	Z,00107$
                           1072 ;src/Map.c:234: door_not_positioned=0;
   065E DD 36 F4 00   [19] 1073 	ld	-12 (ix),#0x00
                           1074 ;src/Map.c:235: *position=CELLTYPE_DOOR;
   0662 3E 80         [ 7] 1075 	ld	a,#0x80
   0664 02            [ 7] 1076 	ld	(bc),a
   0665 C3rE2r06      [10] 1077 	jp	00135$
   0668                    1078 00107$:
                           1079 ;src/Map.c:237: else if((((*bottomVal)!=CELLTYPE_FLOOR)||(bottomVal>=END_OF_MAP_MEM)) && (((*topVal)==CELLTYPE_FLOOR)&&(topVal>=MAP_MEM))){
   0668 7D            [ 4] 1080 	ld	a,l
   0669 B7            [ 4] 1081 	or	a, a
   066A 20 06         [12] 1082 	jr	NZ,00105$
   066C DD 7E F9      [19] 1083 	ld	a,-7 (ix)
   066F B7            [ 4] 1084 	or	a, a
   0670 20 70         [12] 1085 	jr	NZ,00135$
   0672                    1086 00105$:
   0672 DD 7E FB      [19] 1087 	ld	a,-5 (ix)
   0675 B7            [ 4] 1088 	or	a, a
   0676 20 6A         [12] 1089 	jr	NZ,00135$
   0678 DD 7E FA      [19] 1090 	ld	a,-6 (ix)
   067B B7            [ 4] 1091 	or	a, a
   067C 20 64         [12] 1092 	jr	NZ,00135$
                           1093 ;src/Map.c:238: door_not_positioned=0;
   067E DD 36 F4 00   [19] 1094 	ld	-12 (ix),#0x00
                           1095 ;src/Map.c:239: *position=CELLTYPE_DOOR;
   0682 3E 80         [ 7] 1096 	ld	a,#0x80
   0684 02            [ 7] 1097 	ld	(bc),a
   0685 18 5B         [12] 1098 	jr	00135$
   0687                    1099 00129$:
                           1100 ;src/Map.c:242: else if((((*topVal)!=CELLTYPE_FLOOR)||(topVal<MAP_MEM)) && (((*bottomVal)!=CELLTYPE_FLOOR)||(bottomVal>=END_OF_MAP_MEM))){
   0687 DD 7E FB      [19] 1101 	ld	a,-5 (ix)
   068A B7            [ 4] 1102 	or	a, a
   068B 20 06         [12] 1103 	jr	NZ,00127$
   068D DD 7E FA      [19] 1104 	ld	a,-6 (ix)
   0690 B7            [ 4] 1105 	or	a, a
   0691 28 4F         [12] 1106 	jr	Z,00135$
   0693                    1107 00127$:
   0693 FD 7E 00      [19] 1108 	ld	a, 0 (iy)
   0696 B7            [ 4] 1109 	or	a, a
   0697 20 06         [12] 1110 	jr	NZ,00123$
   0699 DD 7E F9      [19] 1111 	ld	a,-7 (ix)
   069C B7            [ 4] 1112 	or	a, a
   069D 20 43         [12] 1113 	jr	NZ,00135$
   069F                    1114 00123$:
                           1115 ;src/Map.c:232: if((((*lastVal)!=CELLTYPE_FLOOR) || (lastVal<MAP_MEM) )&& (((*nextVal)!=CELLTYPE_FLOOR)||(nextVal>=END_OF_MAP_MEM))){
   069F DD 6E F7      [19] 1116 	ld	l,-9 (ix)
   06A2 DD 66 F8      [19] 1117 	ld	h,-8 (ix)
   06A5 6E            [ 7] 1118 	ld	l,(hl)
                           1119 ;src/Map.c:243: if((((*lastVal)!=CELLTYPE_FLOOR)|| (lastVal<MAP_MEM) ) && (((*nextVal)==CELLTYPE_FLOOR)&&(nextVal<END_OF_MAP_MEM))){
   06A6 DD 7E FF      [19] 1120 	ld	a,-1 (ix)
   06A9 B7            [ 4] 1121 	or	a, a
   06AA 20 06         [12] 1122 	jr	NZ,00122$
   06AC DD 7E FE      [19] 1123 	ld	a,-2 (ix)
   06AF B7            [ 4] 1124 	or	a, a
   06B0 28 13         [12] 1125 	jr	Z,00118$
   06B2                    1126 00122$:
   06B2 7D            [ 4] 1127 	ld	a,l
   06B3 B7            [ 4] 1128 	or	a, a
   06B4 20 0F         [12] 1129 	jr	NZ,00118$
   06B6 DD CB FC 46   [20] 1130 	bit	0,-4 (ix)
   06BA 28 09         [12] 1131 	jr	Z,00118$
                           1132 ;src/Map.c:244: door_not_positioned=0;
   06BC DD 36 F4 00   [19] 1133 	ld	-12 (ix),#0x00
                           1134 ;src/Map.c:245: *position=CELLTYPE_DOOR;
   06C0 3E 80         [ 7] 1135 	ld	a,#0x80
   06C2 02            [ 7] 1136 	ld	(bc),a
   06C3 18 1D         [12] 1137 	jr	00135$
   06C5                    1138 00118$:
                           1139 ;src/Map.c:247: else if((((*nextVal)!=CELLTYPE_FLOOR)||(nextVal>=END_OF_MAP_MEM)) && (((*lastVal)==CELLTYPE_FLOOR)&&(lastVal>=MAP_MEM))){
   06C5 7D            [ 4] 1140 	ld	a,l
   06C6 B7            [ 4] 1141 	or	a, a
   06C7 20 06         [12] 1142 	jr	NZ,00116$
   06C9 DD CB FC 46   [20] 1143 	bit	0,-4 (ix)
   06CD 20 13         [12] 1144 	jr	NZ,00135$
   06CF                    1145 00116$:
   06CF DD 7E FF      [19] 1146 	ld	a,-1 (ix)
   06D2 B7            [ 4] 1147 	or	a, a
   06D3 20 0D         [12] 1148 	jr	NZ,00135$
   06D5 DD 7E FE      [19] 1149 	ld	a,-2 (ix)
   06D8 B7            [ 4] 1150 	or	a, a
   06D9 20 07         [12] 1151 	jr	NZ,00135$
                           1152 ;src/Map.c:248: door_not_positioned=0;
   06DB DD 36 F4 00   [19] 1153 	ld	-12 (ix),#0x00
                           1154 ;src/Map.c:249: *position=CELLTYPE_DOOR;
   06DF 3E 80         [ 7] 1155 	ld	a,#0x80
   06E1 02            [ 7] 1156 	ld	(bc),a
   06E2                    1157 00135$:
                           1158 ;src/Map.c:253: ++position;
   06E2 03            [ 6] 1159 	inc	bc
                           1160 ;src/Map.c:254: ++lastVal;
   06E3 13            [ 6] 1161 	inc	de
                           1162 ;src/Map.c:255: ++nextVal;
   06E4 DD 34 F7      [23] 1163 	inc	-9 (ix)
   06E7 20 03         [12] 1164 	jr	NZ,00223$
   06E9 DD 34 F8      [23] 1165 	inc	-8 (ix)
   06EC                    1166 00223$:
                           1167 ;src/Map.c:256: ++topVal;
   06EC DD 34 F5      [23] 1168 	inc	-11 (ix)
   06EF 20 03         [12] 1169 	jr	NZ,00224$
   06F1 DD 34 F6      [23] 1170 	inc	-10 (ix)
   06F4                    1171 00224$:
                           1172 ;src/Map.c:257: ++bottomVal;
   06F4 FD 23         [10] 1173 	inc	iy
                           1174 ;src/Map.c:258: if(position==END_OF_MAP_MEM){
   06F6 69            [ 4] 1175 	ld	l, c
   06F7 60            [ 4] 1176 	ld	h, b
   06F8 7D            [ 4] 1177 	ld	a,l
   06F9 D6 40         [ 7] 1178 	sub	a, #0x40
   06FB C2rC8r05      [10] 1179 	jp	NZ,00138$
   06FE 7C            [ 4] 1180 	ld	a,h
   06FF D6 04         [ 7] 1181 	sub	a, #0x04
   0701 C2rC8r05      [10] 1182 	jp	NZ,00138$
                           1183 ;src/Map.c:259: position = MAP_MEM;
   0704 01 40 00      [10] 1184 	ld	bc,#0x0040
                           1185 ;src/Map.c:260: lastVal = (position-1);
   0707 11 3F 00      [10] 1186 	ld	de,#0x003F
                           1187 ;src/Map.c:261: nextVal = (position+1);
   070A DD 36 F7 41   [19] 1188 	ld	-9 (ix),#0x41
   070E DD 36 F8 00   [19] 1189 	ld	-8 (ix),#0x00
                           1190 ;src/Map.c:262: topVal = (position-MAP_WIDTH);
   0712 DD 36 F5 20   [19] 1191 	ld	-11 (ix),#0x20
   0716 DD 36 F6 00   [19] 1192 	ld	-10 (ix),#0x00
                           1193 ;src/Map.c:263: bottomVal = (position+MAP_WIDTH);
   071A FD 21 60 00   [14] 1194 	ld	iy,#0x0060
   071E C3rC8r05      [10] 1195 	jp	00138$
   0721                    1196 00141$:
   0721 DD F9         [10] 1197 	ld	sp, ix
   0723 DD E1         [14] 1198 	pop	ix
   0725 C9            [10] 1199 	ret
                           1200 ;src/Map.c:269: void generate_level(){
                           1201 ;	---------------------------------
                           1202 ; Function generate_level
                           1203 ; ---------------------------------
   0726                    1204 _generate_level::
                           1205 ;src/Map.c:270: generate_map();
   0726 CDr28r00      [17] 1206 	call	_generate_map
                           1207 ;src/Map.c:271: generate_exit_door();
   0729 CDr75r05      [17] 1208 	call	_generate_exit_door
                           1209 ;src/Map.c:272: *(u8*)(MAP_MEM + 5 + MAP_WIDTH*5)=0b00000001;
   072C 21 E5 00      [10] 1210 	ld	hl,#0x00E5
   072F 36 01         [10] 1211 	ld	(hl),#0x01
   0731 C9            [10] 1212 	ret
                           1213 	.area _CODE
                           1214 	.area _INITIALIZER
                           1215 	.area _CABS (ABS)
