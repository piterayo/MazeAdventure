                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.5.5 #9498 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module Textures
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _uncompress_item_textures
                             12 	.globl _uncompress_texture
                             13 	.globl _enemy_textures
                             14 	.globl _theme_textures
                             15 	.globl _uncompress_theme_textures
                             16 	.globl _uncompress_enemy_textures
                             17 ;--------------------------------------------------------
                             18 ; special function registers
                             19 ;--------------------------------------------------------
                             20 ;--------------------------------------------------------
                             21 ; ram data
                             22 ;--------------------------------------------------------
                             23 	.area _DATA
                             24 ;--------------------------------------------------------
                             25 ; ram data
                             26 ;--------------------------------------------------------
                             27 	.area _INITIALIZED
                             28 ;--------------------------------------------------------
                             29 ; absolute external ram data
                             30 ;--------------------------------------------------------
                             31 	.area _DABS (ABS)
                             32 ;--------------------------------------------------------
                             33 ; global & static initialisations
                             34 ;--------------------------------------------------------
                             35 	.area _HOME
                             36 	.area _GSINIT
                             37 	.area _GSFINAL
                             38 	.area _GSINIT
                             39 ;--------------------------------------------------------
                             40 ; Home
                             41 ;--------------------------------------------------------
                             42 	.area _HOME
                             43 	.area _HOME
                             44 ;--------------------------------------------------------
                             45 ; code
                             46 ;--------------------------------------------------------
                             47 	.area _CODE
                             48 ;src/Textures.c:17: void uncompress_texture(u8* texture, u8* position, u8 sizeX, u8 sizeY){
                             49 ;	---------------------------------
                             50 ; Function uncompress_texture
                             51 ; ---------------------------------
   0000                      52 _uncompress_texture::
   0000 DD E5         [15]   53 	push	ix
   0002 DD 21 00 00   [14]   54 	ld	ix,#0
   0006 DD 39         [15]   55 	add	ix,sp
   0008 21 F9 FF      [10]   56 	ld	hl,#-7
   000B 39            [11]   57 	add	hl,sp
   000C F9            [ 6]   58 	ld	sp,hl
                             59 ;src/Textures.c:18: u8 p1, p2, tex_height=sizeY;
   000D DD 7E 09      [19]   60 	ld	a,9 (ix)
   0010 DD 77 FB      [19]   61 	ld	-5 (ix),a
                             62 ;src/Textures.c:24: while(sizeX){
   0013 DD 7E 08      [19]   63 	ld	a,8 (ix)
   0016 DD 77 FC      [19]   64 	ld	-4 (ix),a
   0019 DD 5E 06      [19]   65 	ld	e,6 (ix)
   001C DD 56 07      [19]   66 	ld	d,7 (ix)
   001F                      67 00104$:
   001F DD 7E FC      [19]   68 	ld	a,-4 (ix)
   0022 B7            [ 4]   69 	or	a, a
   0023 28 6D         [12]   70 	jr	Z,00107$
                             71 ;src/Textures.c:26: currPos = position;
   0025 DD 73 FD      [19]   72 	ld	-3 (ix),e
   0028 DD 72 FE      [19]   73 	ld	-2 (ix),d
                             74 ;src/Textures.c:27: while(sizeY){
   002B DD 7E 09      [19]   75 	ld	a,9 (ix)
   002E DD 77 FF      [19]   76 	ld	-1 (ix),a
   0031 DD 4E 04      [19]   77 	ld	c,4 (ix)
   0034 DD 46 05      [19]   78 	ld	b,5 (ix)
   0037                      79 00101$:
   0037 DD 7E FF      [19]   80 	ld	a,-1 (ix)
   003A B7            [ 4]   81 	or	a, a
   003B 28 43         [12]   82 	jr	Z,00113$
                             83 ;src/Textures.c:28: p1 = (*texture) & pixelMask[0];
   003D 0A            [ 7]   84 	ld	a,(bc)
   003E 21r00r00      [10]   85 	ld	hl, #_pixelMask + 0
   0041 6E            [ 7]   86 	ld	l,(hl)
   0042 A5            [ 4]   87 	and	a, l
                             88 ;src/Textures.c:29: p1= p1 | (p1>>1);
   0043 6F            [ 4]   89 	ld	l,a
   0044 CB 3F         [ 8]   90 	srl	a
   0046 B5            [ 4]   91 	or	a, l
                             92 ;src/Textures.c:30: *currPos = p1;
   0047 DD 6E FD      [19]   93 	ld	l,-3 (ix)
   004A DD 66 FE      [19]   94 	ld	h,-2 (ix)
   004D 77            [ 7]   95 	ld	(hl),a
                             96 ;src/Textures.c:31: currPos+=TEXTURE_WIDTH;
   004E DD 7E FD      [19]   97 	ld	a,-3 (ix)
   0051 C6 20         [ 7]   98 	add	a, #0x20
   0053 DD 77 F9      [19]   99 	ld	-7 (ix),a
   0056 DD 7E FE      [19]  100 	ld	a,-2 (ix)
   0059 CE 00         [ 7]  101 	adc	a, #0x00
   005B DD 77 FA      [19]  102 	ld	-6 (ix),a
                            103 ;src/Textures.c:33: p2 = (*texture) & pixelMask[1];
   005E 0A            [ 7]  104 	ld	a,(bc)
   005F 21r01r00      [10]  105 	ld	hl, #_pixelMask + 1
   0062 6E            [ 7]  106 	ld	l,(hl)
   0063 A5            [ 4]  107 	and	a, l
                            108 ;src/Textures.c:34: p2 = p2 | (p2<<1);
   0064 6F            [ 4]  109 	ld	l,a
   0065 87            [ 4]  110 	add	a, a
   0066 B5            [ 4]  111 	or	a, l
                            112 ;src/Textures.c:35: *currPos = p2;
   0067 E1            [10]  113 	pop	hl
   0068 E5            [11]  114 	push	hl
   0069 77            [ 7]  115 	ld	(hl),a
                            116 ;src/Textures.c:36: currPos+=TEXTURE_WIDTH;
   006A DD 7E F9      [19]  117 	ld	a,-7 (ix)
   006D C6 20         [ 7]  118 	add	a, #0x20
   006F DD 77 FD      [19]  119 	ld	-3 (ix),a
   0072 DD 7E FA      [19]  120 	ld	a,-6 (ix)
   0075 CE 00         [ 7]  121 	adc	a, #0x00
   0077 DD 77 FE      [19]  122 	ld	-2 (ix),a
                            123 ;src/Textures.c:37: --sizeY;
   007A DD 35 FF      [23]  124 	dec	-1 (ix)
                            125 ;src/Textures.c:38: ++texture;
   007D 03            [ 6]  126 	inc	bc
   007E 18 B7         [12]  127 	jr	00101$
   0080                     128 00113$:
   0080 DD 71 04      [19]  129 	ld	4 (ix),c
   0083 DD 70 05      [19]  130 	ld	5 (ix),b
                            131 ;src/Textures.c:40: --sizeX;
   0086 DD 35 FC      [23]  132 	dec	-4 (ix)
                            133 ;src/Textures.c:41: sizeY=tex_height;
   0089 DD 7E FB      [19]  134 	ld	a,-5 (ix)
   008C DD 77 09      [19]  135 	ld	9 (ix),a
                            136 ;src/Textures.c:42: ++position;
   008F 13            [ 6]  137 	inc	de
   0090 18 8D         [12]  138 	jr	00104$
   0092                     139 00107$:
   0092 DD F9         [10]  140 	ld	sp, ix
   0094 DD E1         [14]  141 	pop	ix
   0096 C9            [10]  142 	ret
   0097                     143 _theme_textures:
   0097r00r00               144 	.dw _g_tile_walls_0
   0099r00r00               145 	.dw _g_tile_walls_0
   009Br00r00               146 	.dw _g_tile_walls_0
   009Dr00r00               147 	.dw _g_tile_walls_0
   009F                     148 _enemy_textures:
   009Fr00r00               149 	.dw _level0_enemies_tileset
   00A1r00r00               150 	.dw _level0_enemies_tileset
   00A3r00r00               151 	.dw _level0_enemies_tileset
   00A5r00r00               152 	.dw _level0_enemies_tileset
                            153 ;src/Textures.c:47: void uncompress_theme_textures(u8 level){//TODO implement
                            154 ;	---------------------------------
                            155 ; Function uncompress_theme_textures
                            156 ; ---------------------------------
   00A7                     157 _uncompress_theme_textures::
   00A7 DD E5         [15]  158 	push	ix
   00A9 DD 21 00 00   [14]  159 	ld	ix,#0
   00AD DD 39         [15]  160 	add	ix,sp
                            161 ;src/Textures.c:48: uncompress_texture(theme_textures[level][0],(u8*)UNCOMPRESSED_LEVEL_TEXTURES,TEXTURE_WIDTH,TEXTURE_HEIGHT_HALF);
   00AF 01r97r00      [10]  162 	ld	bc,#_theme_textures+0
   00B2 DD 6E 04      [19]  163 	ld	l,4 (ix)
   00B5 26 00         [ 7]  164 	ld	h,#0x00
   00B7 29            [11]  165 	add	hl, hl
   00B8 09            [11]  166 	add	hl,bc
   00B9 4D            [ 4]  167 	ld	c,l
   00BA 44            [ 4]  168 	ld	b,h
   00BB 5E            [ 7]  169 	ld	e,(hl)
   00BC 23            [ 6]  170 	inc	hl
   00BD 66            [ 7]  171 	ld	h,(hl)
   00BE 6B            [ 4]  172 	ld	l, e
   00BF 5E            [ 7]  173 	ld	e,(hl)
   00C0 23            [ 6]  174 	inc	hl
   00C1 56            [ 7]  175 	ld	d,(hl)
   00C2 C5            [11]  176 	push	bc
   00C3 21 20 10      [10]  177 	ld	hl,#0x1020
   00C6 E5            [11]  178 	push	hl
   00C7 21 40 08      [10]  179 	ld	hl,#0x0840
   00CA E5            [11]  180 	push	hl
   00CB D5            [11]  181 	push	de
   00CC CDr00r00      [17]  182 	call	_uncompress_texture
   00CF 21 06 00      [10]  183 	ld	hl,#6
   00D2 39            [11]  184 	add	hl,sp
   00D3 F9            [ 6]  185 	ld	sp,hl
   00D4 C1            [10]  186 	pop	bc
                            187 ;src/Textures.c:49: uncompress_texture(theme_textures[level][1],(u8*)(UNCOMPRESSED_LEVEL_TEXTURES+1024),TEXTURE_WIDTH,TEXTURE_HEIGHT_HALF);
   00D5 69            [ 4]  188 	ld	l, c
   00D6 60            [ 4]  189 	ld	h, b
   00D7 5E            [ 7]  190 	ld	e,(hl)
   00D8 23            [ 6]  191 	inc	hl
   00D9 66            [ 7]  192 	ld	h,(hl)
   00DA 6B            [ 4]  193 	ld	l, e
   00DB 23            [ 6]  194 	inc	hl
   00DC 23            [ 6]  195 	inc	hl
   00DD 5E            [ 7]  196 	ld	e,(hl)
   00DE 23            [ 6]  197 	inc	hl
   00DF 56            [ 7]  198 	ld	d,(hl)
   00E0 C5            [11]  199 	push	bc
   00E1 21 20 10      [10]  200 	ld	hl,#0x1020
   00E4 E5            [11]  201 	push	hl
   00E5 21 40 0C      [10]  202 	ld	hl,#0x0C40
   00E8 E5            [11]  203 	push	hl
   00E9 D5            [11]  204 	push	de
   00EA CDr00r00      [17]  205 	call	_uncompress_texture
   00ED 21 06 00      [10]  206 	ld	hl,#6
   00F0 39            [11]  207 	add	hl,sp
   00F1 F9            [ 6]  208 	ld	sp,hl
   00F2 C1            [10]  209 	pop	bc
                            210 ;src/Textures.c:50: uncompress_texture(theme_textures[level][2],(u8*)(UNCOMPRESSED_LEVEL_TEXTURES+2048),TEXTURE_WIDTH,TEXTURE_HEIGHT_HALF);
   00F3 69            [ 4]  211 	ld	l, c
   00F4 60            [ 4]  212 	ld	h, b
   00F5 5E            [ 7]  213 	ld	e,(hl)
   00F6 23            [ 6]  214 	inc	hl
   00F7 66            [ 7]  215 	ld	h,(hl)
   00F8 6B            [ 4]  216 	ld	l, e
   00F9 11 04 00      [10]  217 	ld	de, #0x0004
   00FC 19            [11]  218 	add	hl, de
   00FD 5E            [ 7]  219 	ld	e,(hl)
   00FE 23            [ 6]  220 	inc	hl
   00FF 56            [ 7]  221 	ld	d,(hl)
   0100 C5            [11]  222 	push	bc
   0101 21 20 10      [10]  223 	ld	hl,#0x1020
   0104 E5            [11]  224 	push	hl
   0105 2E 40         [ 7]  225 	ld	l, #0x40
   0107 E5            [11]  226 	push	hl
   0108 D5            [11]  227 	push	de
   0109 CDr00r00      [17]  228 	call	_uncompress_texture
   010C 21 06 00      [10]  229 	ld	hl,#6
   010F 39            [11]  230 	add	hl,sp
   0110 F9            [ 6]  231 	ld	sp,hl
                            232 ;src/Textures.c:51: uncompress_texture(theme_textures[level][3],(u8*)(UNCOMPRESSED_LEVEL_TEXTURES+3072),TEXTURE_WIDTH,TEXTURE_HEIGHT_HALF);
   0111 E1            [10]  233 	pop	hl
   0112 4E            [ 7]  234 	ld	c,(hl)
   0113 23            [ 6]  235 	inc	hl
   0114 66            [ 7]  236 	ld	h,(hl)
   0115 69            [ 4]  237 	ld	l, c
   0116 11 06 00      [10]  238 	ld	de, #0x0006
   0119 19            [11]  239 	add	hl, de
   011A 4E            [ 7]  240 	ld	c,(hl)
   011B 23            [ 6]  241 	inc	hl
   011C 46            [ 7]  242 	ld	b,(hl)
   011D 21 20 10      [10]  243 	ld	hl,#0x1020
   0120 E5            [11]  244 	push	hl
   0121 21 40 14      [10]  245 	ld	hl,#0x1440
   0124 E5            [11]  246 	push	hl
   0125 C5            [11]  247 	push	bc
   0126 CDr00r00      [17]  248 	call	_uncompress_texture
   0129 21 06 00      [10]  249 	ld	hl,#6
   012C 39            [11]  250 	add	hl,sp
   012D F9            [ 6]  251 	ld	sp,hl
   012E DD E1         [14]  252 	pop	ix
   0130 C9            [10]  253 	ret
                            254 ;src/Textures.c:54: void uncompress_enemy_textures(u8 level){
                            255 ;	---------------------------------
                            256 ; Function uncompress_enemy_textures
                            257 ; ---------------------------------
   0131                     258 _uncompress_enemy_textures::
   0131 DD E5         [15]  259 	push	ix
   0133 DD 21 00 00   [14]  260 	ld	ix,#0
   0137 DD 39         [15]  261 	add	ix,sp
                            262 ;src/Textures.c:55: uncompress_texture(enemy_textures[level][0],(u8*)UNCOMPRESSED_ENEMY_TEXTURES,ENEMY_SPRITE_WIDTH,ENEMY_SPRITE_HEIGHT_HALF);
   0139 01r9Fr00      [10]  263 	ld	bc,#_enemy_textures+0
   013C DD 6E 04      [19]  264 	ld	l,4 (ix)
   013F 26 00         [ 7]  265 	ld	h,#0x00
   0141 29            [11]  266 	add	hl, hl
   0142 09            [11]  267 	add	hl,bc
   0143 4D            [ 4]  268 	ld	c,l
   0144 44            [ 4]  269 	ld	b,h
   0145 5E            [ 7]  270 	ld	e,(hl)
   0146 23            [ 6]  271 	inc	hl
   0147 66            [ 7]  272 	ld	h,(hl)
   0148 6B            [ 4]  273 	ld	l, e
   0149 5E            [ 7]  274 	ld	e,(hl)
   014A 23            [ 6]  275 	inc	hl
   014B 56            [ 7]  276 	ld	d,(hl)
   014C C5            [11]  277 	push	bc
   014D 21 18 0C      [10]  278 	ld	hl,#0x0C18
   0150 E5            [11]  279 	push	hl
   0151 21 40 18      [10]  280 	ld	hl,#0x1840
   0154 E5            [11]  281 	push	hl
   0155 D5            [11]  282 	push	de
   0156 CDr00r00      [17]  283 	call	_uncompress_texture
   0159 21 06 00      [10]  284 	ld	hl,#6
   015C 39            [11]  285 	add	hl,sp
   015D F9            [ 6]  286 	ld	sp,hl
   015E C1            [10]  287 	pop	bc
                            288 ;src/Textures.c:56: uncompress_texture(enemy_textures[level][1],(u8*)(UNCOMPRESSED_ENEMY_TEXTURES+576),ENEMY_SPRITE_WIDTH,ENEMY_SPRITE_HEIGHT_HALF);
   015F 69            [ 4]  289 	ld	l, c
   0160 60            [ 4]  290 	ld	h, b
   0161 5E            [ 7]  291 	ld	e,(hl)
   0162 23            [ 6]  292 	inc	hl
   0163 66            [ 7]  293 	ld	h,(hl)
   0164 6B            [ 4]  294 	ld	l, e
   0165 23            [ 6]  295 	inc	hl
   0166 23            [ 6]  296 	inc	hl
   0167 5E            [ 7]  297 	ld	e,(hl)
   0168 23            [ 6]  298 	inc	hl
   0169 56            [ 7]  299 	ld	d,(hl)
   016A C5            [11]  300 	push	bc
   016B 21 18 0C      [10]  301 	ld	hl,#0x0C18
   016E E5            [11]  302 	push	hl
   016F 21 80 1A      [10]  303 	ld	hl,#0x1A80
   0172 E5            [11]  304 	push	hl
   0173 D5            [11]  305 	push	de
   0174 CDr00r00      [17]  306 	call	_uncompress_texture
   0177 21 06 00      [10]  307 	ld	hl,#6
   017A 39            [11]  308 	add	hl,sp
   017B F9            [ 6]  309 	ld	sp,hl
   017C C1            [10]  310 	pop	bc
                            311 ;src/Textures.c:57: uncompress_texture(enemy_textures[level][2],(u8*)(UNCOMPRESSED_ENEMY_TEXTURES+1152),ENEMY_SPRITE_WIDTH,ENEMY_SPRITE_HEIGHT_HALF);
   017D 69            [ 4]  312 	ld	l, c
   017E 60            [ 4]  313 	ld	h, b
   017F 5E            [ 7]  314 	ld	e,(hl)
   0180 23            [ 6]  315 	inc	hl
   0181 66            [ 7]  316 	ld	h,(hl)
   0182 6B            [ 4]  317 	ld	l, e
   0183 11 04 00      [10]  318 	ld	de, #0x0004
   0186 19            [11]  319 	add	hl, de
   0187 5E            [ 7]  320 	ld	e,(hl)
   0188 23            [ 6]  321 	inc	hl
   0189 56            [ 7]  322 	ld	d,(hl)
   018A C5            [11]  323 	push	bc
   018B 21 18 0C      [10]  324 	ld	hl,#0x0C18
   018E E5            [11]  325 	push	hl
   018F 21 C0 1C      [10]  326 	ld	hl,#0x1CC0
   0192 E5            [11]  327 	push	hl
   0193 D5            [11]  328 	push	de
   0194 CDr00r00      [17]  329 	call	_uncompress_texture
   0197 21 06 00      [10]  330 	ld	hl,#6
   019A 39            [11]  331 	add	hl,sp
   019B F9            [ 6]  332 	ld	sp,hl
                            333 ;src/Textures.c:58: uncompress_texture(enemy_textures[level][3],(u8*)(UNCOMPRESSED_ENEMY_TEXTURES+1728),ENEMY_SPRITE_WIDTH,ENEMY_SPRITE_HEIGHT_HALF);
   019C E1            [10]  334 	pop	hl
   019D 4E            [ 7]  335 	ld	c,(hl)
   019E 23            [ 6]  336 	inc	hl
   019F 66            [ 7]  337 	ld	h,(hl)
   01A0 69            [ 4]  338 	ld	l, c
   01A1 11 06 00      [10]  339 	ld	de, #0x0006
   01A4 19            [11]  340 	add	hl, de
   01A5 4E            [ 7]  341 	ld	c,(hl)
   01A6 23            [ 6]  342 	inc	hl
   01A7 46            [ 7]  343 	ld	b,(hl)
   01A8 21 18 0C      [10]  344 	ld	hl,#0x0C18
   01AB E5            [11]  345 	push	hl
   01AC 21 00 1F      [10]  346 	ld	hl,#0x1F00
   01AF E5            [11]  347 	push	hl
   01B0 C5            [11]  348 	push	bc
   01B1 CDr00r00      [17]  349 	call	_uncompress_texture
   01B4 21 06 00      [10]  350 	ld	hl,#6
   01B7 39            [11]  351 	add	hl,sp
   01B8 F9            [ 6]  352 	ld	sp,hl
   01B9 DD E1         [14]  353 	pop	ix
   01BB C9            [10]  354 	ret
                            355 ;src/Textures.c:61: void uncompress_item_textures(){
                            356 ;	---------------------------------
                            357 ; Function uncompress_item_textures
                            358 ; ---------------------------------
   01BC                     359 _uncompress_item_textures::
                            360 ;src/Textures.c:63: }
   01BC C9            [10]  361 	ret
                            362 	.area _CODE
                            363 	.area _INITIALIZER
                            364 	.area _CABS (ABS)
